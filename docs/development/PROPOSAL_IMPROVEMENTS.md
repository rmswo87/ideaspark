# 제안서 생성 기능 개선 완료

**작성 일시**: 2025년 12월 4일  
**개선 목표**: 제안서 품질 향상 및 사용자 프롬프트 입력 기능 추가

---

## 🎯 개선 사항

### 1. 제안서 생성 프롬프트 개선 ✅

**문제점**:
- 제안서가 너무 허술하고 단순히 아이디어를 정리하는 수준에 그침
- 전문가가 서비스를 만들어서 배포할 수 있을 정도로 다듬어지지 않음

**개선 내용**:
- 프롬프트에 "실제로 상품으로 판매할 수 있을 정도로 재밌고 신선하고 유용하고 효율적인 서비스"로 발전시키라는 명확한 지시 추가
- "이런 기능을 추가해서 만들면 어떨까?" - 구체적인 기능 제안 요구
- "이런 기능을 개선하거나, 이런 부분은 삭제해서 더 좋은 서비스를 만들 수 있을 거 같다" - 개선/삭제 제안 요구
- 더 구체적이고 전문적인 제안서 구조 제시:
  - 문제 정의 및 시장 분석 강화
  - 추가 제안 기능 섹션 추가
  - 개선/삭제 제안 섹션 추가
  - 예상 성과 및 지표 섹션 추가

**변경 파일**:
- `src/services/ai.ts`: `buildProposalPrompt` 함수 개선

---

### 2. 사용자 프롬프트 입력 기능 추가 ✅

**요구사항**:
- 제안서에 사용자가 직접 개입하여 추가적으로 작성하고 출력할 수 있도록 기능 구현
- UI에 주관식 입력 박스 추가

**구현 내용**:
- 제안서 표시 영역에 "제안서 개선 프롬프트" 입력 박스 추가
- 접기/펼치기 기능으로 UI 깔끔하게 유지
- 사용자가 프롬프트를 입력하면 해당 프롬프트를 반영하여 제안서 생성
- 프롬프트 입력 시 버튼 텍스트가 "프롬프트로 제안서 개선"으로 변경

**변경 파일**:
- `src/services/ai.ts`: `generateProposal` 함수에 `userPrompt` 파라미터 추가
- `src/services/ai.ts`: `buildProposalPrompt` 함수에 사용자 프롬프트 섹션 추가
- `src/services/proposalService.ts`: `generateProposal` 함수에 `userPrompt` 파라미터 추가
- `src/pages/IdeaDetailPage.tsx`: 
  - 사용자 프롬프트 입력 UI 추가
  - `userProposalPrompt`, `showProposalPromptInput` state 추가
  - `handleGenerateProposal` 함수에 프롬프트 전달 로직 추가

---

### 3. PRD 생성 시 제안서 선택 로직 개선 ✅

**요구사항**:
- 기본 제안서든 사용자 프롬프트로 추가된 제안서든, 기본 아이디어를 기반으로 바로 PRD를 출력하든
- 사용자 액션에 따라 해당 사항들이 잘 적용이 된 상태로 PRD를 작성할 수 있게끔 출력

**구현 내용**:
- 기존 로직 유지: 선택된 제안서가 있으면 제안서 기반으로 PRD 생성, 없으면 기본 아이디어 기반으로 PRD 생성
- PRD 생성 버튼 텍스트가 제안서 존재 여부에 따라 동적으로 변경
- 주석 추가로 로직 명확화

**변경 파일**:
- `src/pages/IdeaDetailPage.tsx`: PRD 생성 로직 주석 개선, 버튼 텍스트 동적 변경

---

## 📋 구현 세부 사항

### 제안서 프롬프트 구조

```
1. 개요
   - 원본 아이디어
   - 개선 목표
   - 핵심 가치
   - 시장 기회

2. 문제 정의 및 시장 분석
   - 문제 상황
   - 영향받는 사용자
   - 현재 솔루션의 한계
   - 시장 기회

3. 제안 솔루션
   - 핵심 기능
   - 추가 제안 기능 (NEW)
   - 개선/삭제 제안 (NEW)
   - 차별화 포인트
   - 기술 스택

4. 사용자 시나리오
   - 시나리오 1-3

5. 실행 계획
   - Phase 1 (MVP)
   - Phase 2
   - Phase 3

6. 예상 성과 및 지표
   - 사용자 가치
   - 비즈니스 가치
   - 성공 지표 (NEW)
```

### 사용자 프롬프트 입력 UI

- 위치: 제안서 내용 표시 영역 하단
- 기능:
  - 접기/펼치기 버튼
  - Textarea 입력 박스 (4줄)
  - 안내 문구
  - 프롬프트 입력 시 버튼 텍스트 변경

### PRD 생성 플로우

1. **제안서 기반 PRD 생성**:
   - 제안서가 있고 선택된 경우 → 제안서 내용을 기반으로 PRD 생성
   - 제안서가 없는 경우 → 기본 아이디어를 기반으로 PRD 생성

2. **사용자 액션**:
   - 제안서 생성 → 제안서 표시 → PRD 생성 버튼 클릭 → 제안서 기반 PRD 생성
   - 프롬프트 입력 → 제안서 개선 → PRD 생성 버튼 클릭 → 개선된 제안서 기반 PRD 생성
   - 제안서 없이 → PRD 생성 버튼 클릭 → 기본 아이디어 기반 PRD 생성

---

## ✅ 완료된 작업

- [x] 제안서 생성 프롬프트 개선
- [x] 사용자 프롬프트 입력 UI 추가
- [x] 사용자 프롬프트로 제안서 개선 기능 구현
- [x] PRD 생성 시 제안서 선택 로직 개선
- [x] 빌드 성공 확인

---

## 🎯 다음 단계

- [ ] 실제 테스트 및 검증
- [ ] 사용자 피드백 수집
- [ ] 추가 개선 사항 반영

---

**작성자**: AI Assistant  
**최종 업데이트**: 2025년 12월 4일


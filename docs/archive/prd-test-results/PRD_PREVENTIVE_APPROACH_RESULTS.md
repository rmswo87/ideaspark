# PRD 생성 예방적 접근법 테스트 결과

**테스트 일시**: 2025년 12월 3일 (예방적 접근법 적용 후)  
**테스트 아이디어**: "The most toxic app ever"  
**접근법**: 각 Part별 Mermaid 사용 규칙 명확화

---

## 🎯 적용된 개선 사항

### 예방적 접근법
**핵심 아이디어**: 사후 처리(병합 로직)보다 사전 방지(프롬프트 명확화)

1. **Part 1-5, 7: Mermaid 절대 금지 명시**
   - 각 Part 프롬프트에 "⚠️⚠️⚠️ 절대 금지: 이 Part에서는 Mermaid 다이어그램을 절대 사용하지 마세요. 텍스트로만 작성하세요." 추가

2. **Part 6: Mermaid 필수 생성 명시**
   - "⚠️⚠️⚠️ 필수: 이 Part에서는 반드시 Mermaid 다이어그램을 한 번만 작성하세요. 이것이 전체 문서에서 유일한 다이어그램입니다." 추가

3. **각 Part의 역할 명확화**
   - 각 Part가 정확히 어떤 섹션을 담당하는지 명확히 지정
   - 다른 섹션 작성 금지 명시

---

## 📊 테스트 결과 분석

### 생성 결과
- **문서 길이**: 373줄, 1,707단어, 10,881자
- **섹션 구조**: 섹션 1-5 정상, 섹션 6 중복, 섹션 7 중복
- **Mermaid 다이어그램**: 4개 생성됨 (목표: 1개)

### 개선 효과
- ✅ **Part별 역할 명확화**: 각 Part가 정확히 어떤 섹션을 담당하는지 명확히 지정
- ✅ **Mermaid 사용 규칙 명확화**: Part 6에서만 생성, 다른 Part에서는 금지 (프롬프트에 명시)
- ⚠️ **실제 효과**: AI가 여전히 프롬프트를 무시하고 있음

---

## 🔍 상세 분석

### 섹션 구조
- ✅ 섹션 1-5: 정상적으로 한 번씩 나타남
- ⚠️ 섹션 6: 두 번 나타남 (프로젝트 구조, 성공 지표)
- ⚠️ 섹션 7: 두 번 나타남 (Line 136, 246)
- ⚠️ Line 76 이후: 중복 내용 시작 (프로젝트 개요부터 다시 시작)

### Mermaid 다이어그램
- ⚠️ 총 4개 생성됨 (목표: 1개)
- Line 59: 첫 번째 다이어그램 (Part 6, 정상)
- Line 129: 두 번째 다이어그램 (Part 7 이후, 비정상)
- Line 238: 세 번째 다이어그램 (중복 섹션, 비정상)
- Line 481: 네 번째 다이어그램 (중복 섹션, 비정상)

### 중복 제거 효과
- ⚠️ **"## PRD 문서" 중복**: 제거됨 (이전 개선 효과)
- ⚠️ **섹션 중복**: 여전히 발생 (섹션 6, 7 중복)
- ⚠️ **Mermaid 중복**: 여전히 발생 (4개 생성)

---

## 💡 예방적 접근법의 장점

### 1. 사전 방지
- **문제 발생 전 차단**: AI가 잘못된 행동을 하기 전에 명확한 지시 제공
- **병합 로직 의존도 감소**: 사후 처리보다 사전 방지가 더 효과적

### 2. 명확한 역할 분리
- **각 Part의 책임 명확화**: 무엇을 작성할지, 무엇을 작성하지 않을지 명확히 지정
- **중복 가능성 감소**: 명확한 지시로 중복 생성 가능성 감소

### 3. 프롬프트 강화
- **절대 금지 명시**: "절대 사용하지 마세요" 같은 강력한 지시
- **필수 생성 명시**: "반드시 작성하세요" 같은 명확한 지시

---

## 🎯 결론

### 예방적 접근법의 효과
- ✅ **프롬프트 명확화**: 각 Part의 역할과 Mermaid 사용 규칙을 명확히 지정
- ⚠️ **AI 모델의 한계**: 무료 모델이 여전히 프롬프트를 무시하고 있음
- ⚠️ **실제 개선 효과**: 제한적 (Mermaid 6-7개 → 4개로 감소했지만 목표인 1개에는 미달)

### 근본 원인
1. **AI 모델의 한계**: 무료 모델(meta-llama/llama-3.1-8b-instruct)이 복잡한 프롬프트를 정확히 따르지 않음
2. **프롬프트 길이**: 너무 긴 프롬프트로 인해 핵심 지시사항이 희석될 수 있음
3. **생성 방식의 한계**: 여러 Part로 나누어 생성하는 방식 자체가 중복을 유발할 수 있음

### 추가 개선 방안
1. **프롬프트 단순화**: 핵심 지시사항만 간결하게
2. **AI 모델 업그레이드**: 유료 모델 사용 검토
3. **생성 방식 변경**: 단일 생성 또는 더 작은 단위로 분할

---

**작성자**: AI Assistant  
**최종 업데이트**: 2025년 12월 3일


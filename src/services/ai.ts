// AI API í´ë¼ì´ì–¸íŠ¸ êµ¬í˜„
import type { AIConfig } from '@/types/ai';
import type { Idea } from '@/services/ideaService';

class AIClient {
  private config: AIConfig;

  constructor(config: AIConfig) {
    this.config = config;
  }

  /**
   * ì•„ì´ë””ì–´ë¥¼ ê¸°ë°˜ìœ¼ë¡œ PRD ìƒì„±
   * ì—¬ëŸ¬ ë²ˆì— ë‚˜ëˆ„ì–´ì„œ ìƒì„±í•˜ì—¬ ì™„ì „í•œ ë¬¸ì„œë¥¼ ë§Œë“­ë‹ˆë‹¤.
   * @param onProgress ì§„í–‰ë¥  ì½œë°± (0-100)
   */
  async generatePRD(idea: Idea, onProgress?: (progress: number) => void): Promise<string> {
    // PRDë¥¼ 10ê°œ ë¶€ë¶„ìœ¼ë¡œ ë‚˜ëˆ„ì–´ì„œ ë” ìƒì„¸í•˜ê³  ì™„ì „í•˜ê²Œ ìƒì„±
    const parts: string[] = [];
    const totalParts = 10;
    
    // ì´ˆê¸° ì§„í–‰ë¥ 
    if (onProgress) onProgress(0);
    
    for (let partNum = 1; partNum <= totalParts; partNum++) {
      const prompt = this.buildPRDPrompt(idea, partNum, parts);
      
      let partContent: string;
      if (this.config.provider === 'openrouter') {
        partContent = await this.callOpenRouter(prompt);
      } else if (this.config.provider === 'openai') {
        partContent = await this.callOpenAI(prompt);
      } else {
        partContent = await this.callClaude(prompt);
      }
      
      parts.push(partContent);
      
      // ê° ë¶€ë¶„ ì™„ë£Œ ì‹œ ì§„í–‰ë¥  ì—…ë°ì´íŠ¸ (ë¶€ë“œëŸ½ê²Œ ì¦ê°€í•˜ë„ë¡ ì‘ì€ ë‹¨ìœ„ë¡œ)
      // ê° ë¶€ë¶„ì€ ì•½ 80/totalParts%ì”©, í•©ì¹˜ê¸°ëŠ” 20%
      // ë¶€ë“œëŸ¬ìš´ ì§„í–‰ì„ ìœ„í•´ ì—¬ëŸ¬ ë‹¨ê³„ë¡œ ë‚˜ëˆ ì„œ ì—…ë°ì´íŠ¸
      if (onProgress) {
        const steps = 10; // ê° ë¶€ë¶„ì„ 10ë‹¨ê³„ë¡œ ë‚˜ëˆ”
        for (let step = 1; step <= steps; step++) {
          const stepProgress = Math.floor(((partNum - 1) / totalParts) * 80 + (step / steps) * (80 / totalParts));
          setTimeout(() => {
            if (onProgress) onProgress(stepProgress);
          }, step * 50); // 50ms ê°„ê²©ìœ¼ë¡œ ì—…ë°ì´íŠ¸
        }
      }
      
      // ë§ˆì§€ë§‰ ë¶€ë¶„ì´ ì•„ë‹ˆë©´ ì ì‹œ ëŒ€ê¸° (API rate limit ë°©ì§€)
      if (partNum < totalParts) {
        await new Promise(resolve => setTimeout(resolve, 1500));
      }
    }
    
    // ëª¨ë“  ë¶€ë¶„ì„ í•©ì³ì„œ í•˜ë‚˜ì˜ ë¬¸ì„œë¡œ ë§Œë“¤ê¸°
    if (onProgress) onProgress(90);
    const fullDocument = this.mergePRDParts(parts);
    if (onProgress) onProgress(100);
    return fullDocument;
  }

  /**
   * ì•„ì´ë””ì–´ì™€ PRDë¥¼ ê¸°ë°˜ìœ¼ë¡œ ê°œë°œ ê³„íšì„œ ìƒì„±
   * ì—¬ëŸ¬ ë²ˆì— ë‚˜ëˆ„ì–´ì„œ ìƒì„±í•˜ì—¬ ì™„ì „í•œ ë¬¸ì„œë¥¼ ë§Œë“­ë‹ˆë‹¤.
   * @param onProgress ì§„í–‰ë¥  ì½œë°± (0-100)
   */
  async generateDevelopmentPlan(idea: Idea, prdContent?: string, onProgress?: (progress: number) => void): Promise<string> {
    // ê°œë°œ ê³„íšì„œë¥¼ 12ê°œ ë¶€ë¶„ìœ¼ë¡œ ë‚˜ëˆ„ì–´ì„œ ë” ìƒì„¸í•˜ê³  ì™„ì „í•˜ê²Œ ìƒì„±
    const parts: string[] = [];
    const totalParts = 12;
    
    // ì´ˆê¸° ì§„í–‰ë¥ 
    if (onProgress) onProgress(0);
    
    for (let partNum = 1; partNum <= totalParts; partNum++) {
      const prompt = this.buildDevelopmentPlanPrompt(idea, prdContent, partNum, parts);
      
      let partContent: string;
      if (this.config.provider === 'openrouter') {
        partContent = await this.callOpenRouter(prompt);
      } else if (this.config.provider === 'openai') {
        partContent = await this.callOpenAI(prompt);
      } else {
        partContent = await this.callClaude(prompt);
      }
      
      parts.push(partContent);
      
      // ê° ë¶€ë¶„ ì™„ë£Œ ì‹œ ì§„í–‰ë¥  ì—…ë°ì´íŠ¸ (ë¶€ë“œëŸ½ê²Œ ì¦ê°€í•˜ë„ë¡ ì‘ì€ ë‹¨ìœ„ë¡œ)
      // ê° ë¶€ë¶„ì€ ì•½ 88/totalParts%ì”©, í•©ì¹˜ê¸°ëŠ” 12%
      // ë¶€ë“œëŸ¬ìš´ ì§„í–‰ì„ ìœ„í•´ ì—¬ëŸ¬ ë‹¨ê³„ë¡œ ë‚˜ëˆ ì„œ ì—…ë°ì´íŠ¸
      if (onProgress) {
        const steps = 10; // ê° ë¶€ë¶„ì„ 10ë‹¨ê³„ë¡œ ë‚˜ëˆ”
        for (let step = 1; step <= steps; step++) {
          const stepProgress = Math.floor(((partNum - 1) / totalParts) * 88 + (step / steps) * (88 / totalParts));
          setTimeout(() => {
            if (onProgress) onProgress(stepProgress);
          }, step * 50); // 50ms ê°„ê²©ìœ¼ë¡œ ì—…ë°ì´íŠ¸
        }
      }
      
      // ë§ˆì§€ë§‰ ë¶€ë¶„ì´ ì•„ë‹ˆë©´ ì ì‹œ ëŒ€ê¸° (API rate limit ë°©ì§€)
      if (partNum < totalParts) {
        await new Promise(resolve => setTimeout(resolve, 1500));
      }
    }
    
    // ëª¨ë“  ë¶€ë¶„ì„ í•©ì³ì„œ í•˜ë‚˜ì˜ ë¬¸ì„œë¡œ ë§Œë“¤ê¸°
    if (onProgress) onProgress(95);
    const fullDocument = this.mergeDevelopmentPlanParts(parts);
    if (onProgress) onProgress(100);
    return fullDocument;
  }

  /**
   * ê°œë°œ ê³„íšì„œ ë¶€ë¶„ë“¤ì„ í•©ì¹˜ê¸°
   */
  private mergeDevelopmentPlanParts(parts: string[]): string {
    if (parts.length === 0) return '';
    if (parts.length === 1) return parts[0];
    
    // ì²« ë²ˆì§¸ ë¶€ë¶„ì˜ í—¤ë”ì™€ ê°œìš” ìœ ì§€
    let merged = parts[0];
    
    // Task ë²ˆí˜¸ ì¶”ì¶œ ë° ì¬ì •ë ¬ì„ ìœ„í•œ ë§µ
    const taskMap = new Map<string, { major: number; minor: number; content: string }>();
    
    // ëª¨ë“  ë¶€ë¶„ì—ì„œ Task ì¶”ì¶œ
    parts.forEach((part) => {
      const taskRegex = /## ğŸ¯ \[P\d+\] Task (\d+)\.(\d+):([^\n]+)\n([\s\S]*?)(?=## ğŸ¯|## ğŸ“Š|## ğŸ—„ï¸|## ğŸ“…|## âš ï¸|## âœ…|$)/g;
      let match;
      while ((match = taskRegex.exec(part)) !== null) {
        const major = parseInt(match[1]);
        const minor = parseInt(match[2]);
        const taskKey = `${major}.${minor}`;
        const taskContent = match[0];
        
        // ì¤‘ë³µëœ Taskê°€ ìˆìœ¼ë©´ ì²« ë²ˆì§¸ ê²ƒë§Œ ìœ ì§€
        if (!taskMap.has(taskKey)) {
          taskMap.set(taskKey, { major, minor, content: taskContent });
        }
      }
    });
    
    // ë‚˜ë¨¸ì§€ ë¶€ë¶„ë“¤ì„ ìˆœì°¨ì ìœ¼ë¡œ ì¶”ê°€
    for (let i = 1; i < parts.length; i++) {
      const part = parts[i];
      
      // ì¤‘ë³µë˜ëŠ” í—¤ë”ë‚˜ ë©”íƒ€ ì •ë³´ ì œê±°
      let cleanedPart = part
        // Epic í—¤ë” ì œê±°
        .replace(/^#\s*Epic\s+\d+:.*$/m, '')
        // Planning Expert ì¸ìš©êµ¬ ì œê±°
        .replace(/^>.*Planning Expert.*$/m, '')
        // ë©”íƒ€ ì •ë³´ ì œê±°
        .replace(/^\*\*ê¸°ê°„\*\*:.*$/m, '')
        .replace(/^\*\*ëª©í‘œ\*\*:.*$/m, '')
        .replace(/^\*\*ì „ë¬¸ê°€\*\*:.*$/m, '')
        .replace(/^\*\*ë³µì¡ë„\*\*:.*$/m, '')
        // Planning Expert ê°€ì´ë“œë¼ì¸ ì„¹ì…˜ ì™„ì „ ì œê±°
        .replace(/#\s*Planning Expert v6\.1 ì‘ì„± ê°€ì´ë“œë¼ì¸[\s\S]*?(?=##|# Epic|$)/g, '')
        .replace(/##\s*Planning Expert v6\.1 ì‘ì„± ê°€ì´ë“œë¼ì¸[\s\S]*?(?=##|# Epic|$)/g, '')
        .replace(/###\s*Part \d+ ì „ì²´ ë‚´ìš©[\s\S]*?(?=##|# Epic|$)/g, '')
        // ë¹ˆ êµ¬ë¶„ì„  ì œê±°
        .replace(/^---\s*$/m, '')
        // ë¶€ë¶„ ì‘ì„± ê°€ì´ë“œ ì œê±°
        .replace(/\*\*âš ï¸ ë¶€ë¶„ ì‘ì„± ê°€ì´ë“œ.*?\n\n/gs, '')
        // ì´ì „ ë¶€ë¶„ ì°¸ê³  ë‚´ìš© ì œê±°
        .replace(/\*\*âš ï¸ CRITICAL: ì´ì „ ë¶€ë¶„ ì „ì²´ ë‚´ìš©.*?âš ï¸ ì¤‘ìš” ì§€ì‹œì‚¬í•­:.*?\n\n/gs, '')
        .replace(/\*\*âš ï¸ ì¤‘ìš” ì§€ì‹œì‚¬í•­:.*?\n\n/gs, '')
        .trim();
      
      // ì²« ë²ˆì§¸ ë¶€ë¶„ì— ì´ë¯¸ ìˆëŠ” ì„¹ì…˜ ì œê±°
      if (i === 1) {
        // Part 2ì—ì„œëŠ” Epic ê°œìš” ì„¹ì…˜ ì œê±°
        cleanedPart = cleanedPart
          .replace(/^## ğŸ“‹ Epic 1 ê°œìš”.*?(?=## ğŸ¯|## ğŸ“Š|## ğŸ—„ï¸|## ğŸ“…|## âš ï¸|## âœ…)/s, '')
          .trim();
      }
      
      // ì¤‘ë³µëœ ì„¹ì…˜ ì œê±° (ëª¨ë“  ë¶€ë¶„ì—ì„œ)
      // Epic ê°œìš” ì„¹ì…˜ ì¤‘ë³µ ì œê±°
      cleanedPart = cleanedPart
        .replace(/^## ğŸ“‹ Epic \d+ ê°œìš”.*?(?=## ğŸ¯|## ğŸ“Š|## ğŸ—„ï¸|## ğŸ“…|## âš ï¸|## âœ…)/s, '')
        .trim();
      
      // ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜ ì„¹ì…˜ ì¤‘ë³µ ì œê±° (ë‹¤ì–‘í•œ íŒ¨í„´)
      cleanedPart = cleanedPart
        .replace(/^## ğŸ“Š ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜.*?(?=## ğŸ—„ï¸|## ğŸ“…|## ğŸ¯|## âš ï¸|## âœ…)/s, '')
        .replace(/^##\s*ì‹œìŠ¤í…œ\s*ì•„í‚¤í…ì²˜.*?(?=## ğŸ—„ï¸|## ğŸ“…|## ğŸ¯|## âš ï¸|## âœ…)/s, '')
        .replace(/^###\s*ì‹œìŠ¤í…œ\s*êµ¬ì¡°\s*ë‹¤ì´ì–´ê·¸ë¨.*?(?=##|###|$)/s, '')
        .replace(/^###\s*ì‹œìŠ¤í…œ\s*ì•„í‚¤í…ì²˜.*?(?=##|###|$)/s, '')
        .trim();
      
      // ë°ì´í„°ë² ì´ìŠ¤ ì„¤ê³„ ì„¹ì…˜ ì¤‘ë³µ ì œê±°
      cleanedPart = cleanedPart
        .replace(/^## ğŸ—„ï¸ ë°ì´í„°ë² ì´ìŠ¤ ì„¤ê³„.*?(?=## ğŸ“…|## ğŸ¯|## âš ï¸|## âœ…)/s, '')
        .replace(/^##\s*ë°ì´í„°ë² ì´ìŠ¤\s*ì„¤ê³„.*?(?=## ğŸ“…|## ğŸ¯|## âš ï¸|## âœ…)/s, '')
        .trim();
      
      // í”„ë¡œì íŠ¸ êµ¬ì¡° ë‹¤ì´ì–´ê·¸ë¨ ì„¹ì…˜ ì¤‘ë³µ ì œê±°
      cleanedPart = cleanedPart
        .replace(/^##\s*í”„ë¡œì íŠ¸\s*êµ¬ì¡°.*?(?=##|###|$)/s, '')
        .replace(/^###\s*í”„ë¡œì íŠ¸\s*êµ¬ì¡°\s*ë‹¤ì´ì–´ê·¸ë¨.*?(?=##|###|$)/s, '')
        .replace(/^<h3[^>]*>í”„ë¡œì íŠ¸\s*êµ¬ì¡°\s*ë‹¤ì´ì–´ê·¸ë¨<\/h3>.*?(?=<h|##|###|$)/s, '')
        .replace(/^<h4[^>]*>í”„ë¡œì íŠ¸\s*êµ¬ì¡°\s*ë‹¤ì´ì–´ê·¸ë¨<\/h4>.*?(?=<h|##|###|$)/s, '')
        .trim();
      
      // ì¤‘ë³µëœ Task ì œê±° (ì´ë¯¸ mergedì— ìˆëŠ” Task ë²ˆí˜¸ëŠ” ì œê±°)
      const existingTaskNumbers = new Set<string>();
      const existingTaskRegex = /## ğŸ¯ \[P\d+\] Task (\d+)\.(\d+):/g;
      let existingMatch;
      while ((existingMatch = existingTaskRegex.exec(merged)) !== null) {
        existingTaskNumbers.add(`${existingMatch[1]}.${existingMatch[2]}`);
      }
      
      // cleanedPartì—ì„œ ì¤‘ë³µëœ Task ì œê±°
      cleanedPart = cleanedPart.replace(/## ğŸ¯ \[P\d+\] Task (\d+)\.(\d+):[\s\S]*?(?=## ğŸ¯|## ğŸ“Š|## ğŸ—„ï¸|## ğŸ“…|## âš ï¸|## âœ…|$)/g, (match, major, minor) => {
        const taskKey = `${major}.${minor}`;
        if (existingTaskNumbers.has(taskKey)) {
          return ''; // ì¤‘ë³µëœ Task ì œê±°
        }
        existingTaskNumbers.add(taskKey);
        return match;
      });
      
      // ìì—°ìŠ¤ëŸ½ê²Œ ì—°ê²°
      if (cleanedPart) {
        merged += '\n\n' + cleanedPart;
      }
    }
    
    // ì¤‘ë³µ ì œê±° ë° ì •ë¦¬
    merged = merged
      .replace(/\n{4,}/g, '\n\n\n') // ì—°ì†ëœ ì¤„ë°”ê¿ˆ ì •ë¦¬
      .replace(/^---\s*$/gm, '---') // êµ¬ë¶„ì„  ì •ë¦¬
      .replace(/\*\*âš ï¸ ì¤‘ìš”:.*?\n\n/gs, '') // ë¶€ë¶„ ì‘ì„± ê°€ì´ë“œ ì™„ì „ ì œê±°
      .replace(/\*\*âš ï¸ CRITICAL:.*?\n\n/gs, '') // CRITICAL ë©”ì‹œì§€ ì œê±°
      // Planning Expert ê°€ì´ë“œë¼ì¸ ì™„ì „ ì œê±°
      .replace(/#\s*Planning Expert v6\.1 ì‘ì„± ê°€ì´ë“œë¼ì¸[\s\S]*?(?=##|# Epic|$)/g, '')
      .replace(/##\s*Planning Expert v6\.1 ì‘ì„± ê°€ì´ë“œë¼ì¸[\s\S]*?(?=##|# Epic|$)/g, '')
      .replace(/###\s*Part \d+ ì „ì²´ ë‚´ìš©[\s\S]*?(?=##|# Epic|$)/g, '')
      // ì¤‘ë³µëœ Mermaid ë‹¤ì´ì–´ê·¸ë¨ ì œê±° (ê°™ì€ ë‚´ìš©ì˜ ë‹¤ì´ì–´ê·¸ë¨ì´ ì—¬ëŸ¬ ë²ˆ ë‚˜íƒ€ë‚˜ë©´ ì²« ë²ˆì§¸ ê²ƒë§Œ ìœ ì§€)
      .replace(/(```mermaid[\s\S]*?```)([\s\S]*?)\1/g, '$1$2')
      // ì¤‘ë³µëœ ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜ ì„¹ì…˜ ì œê±°
      .replace(/(## ğŸ“Š\s*ì‹œìŠ¤í…œ\s*ì•„í‚¤í…ì²˜[\s\S]*?)(?=## ğŸ“Š\s*ì‹œìŠ¤í…œ\s*ì•„í‚¤í…ì²˜|## ğŸ—„ï¸|## ğŸ“…|## âš ï¸|## âœ…|$)/g, '$1')
      .replace(/(##\s*ì‹œìŠ¤í…œ\s*ì•„í‚¤í…ì²˜[\s\S]*?)(?=##\s*ì‹œìŠ¤í…œ\s*ì•„í‚¤í…ì²˜|## ğŸ—„ï¸|## ğŸ“…|## âš ï¸|## âœ…|$)/g, '$1')
      // ì¤‘ë³µëœ ë°ì´í„°ë² ì´ìŠ¤ ì„¤ê³„ ì„¹ì…˜ ì œê±°
      .replace(/(## ğŸ—„ï¸\s*ë°ì´í„°ë² ì´ìŠ¤\s*ì„¤ê³„[\s\S]*?)(?=## ğŸ—„ï¸\s*ë°ì´í„°ë² ì´ìŠ¤\s*ì„¤ê³„|## ğŸ“…|## âš ï¸|## âœ…|$)/g, '$1')
      .replace(/(##\s*ë°ì´í„°ë² ì´ìŠ¤\s*ì„¤ê³„[\s\S]*?)(?=##\s*ë°ì´í„°ë² ì´ìŠ¤\s*ì„¤ê³„|## ğŸ“…|## âš ï¸|## âœ…|$)/g, '$1')
      // ì¤‘ë³µëœ í”„ë¡œì íŠ¸ êµ¬ì¡° ì„¹ì…˜ ì œê±°
      .replace(/(##\s*í”„ë¡œì íŠ¸\s*êµ¬ì¡°[\s\S]*?)(?=##\s*í”„ë¡œì íŠ¸\s*êµ¬ì¡°|## ğŸ“…|## âš ï¸|## âœ…|$)/g, '$1')
      .replace(/(###\s*í”„ë¡œì íŠ¸\s*êµ¬ì¡°\s*ë‹¤ì´ì–´ê·¸ë¨[\s\S]*?)(?=###\s*í”„ë¡œì íŠ¸\s*êµ¬ì¡°\s*ë‹¤ì´ì–´ê·¸ë¨|##|###|$)/g, '$1')
      .trim();
    
    // ë¬¸ì„œê°€ ì¤‘ê°„ì— ëŠê²¼ëŠ”ì§€ í™•ì¸ (ë§ˆì§€ë§‰ ì¤„ì´ "## ğŸ¯ [P1] Task"ë¡œ ëë‚˜ë©´ ë¶ˆì™„ì „)
    const lastLines = merged.split('\n').slice(-5).join('\n');
    if (lastLines.match(/^## ğŸ¯ \[P\d+\] Task \d+\.\d+:$/m)) {
      // ë¶ˆì™„ì „í•œ Task ì œê±°
      merged = merged.replace(/\n## ğŸ¯ \[P\d+\] Task \d+\.\d+:.*$/s, '');
    }
    
    return merged;
  }

  /**
   * ì•„ì´ë””ì–´ë¥¼ ê¸°ë°˜ìœ¼ë¡œ ê°œì„ ëœ ì œì•ˆì„œ ìƒì„±
   */
  async generateProposal(idea: Idea): Promise<string> {
    try {
      const prompt = this.buildProposalPrompt(idea);

      let result: string;
      if (this.config.provider === 'openrouter') {
        result = await this.callOpenRouter(prompt);
      } else if (this.config.provider === 'openai') {
        result = await this.callOpenAI(prompt);
      } else {
        result = await this.callClaude(prompt);
      }

      // ê²°ê³¼ê°€ ë¹„ì–´ìˆê±°ë‚˜ ë„ˆë¬´ ì§§ìœ¼ë©´ ì—ëŸ¬
      if (!result || result.trim().length < 100) {
        throw new Error('ì œì•ˆì„œ ìƒì„± ê²°ê³¼ê°€ ë¹„ì–´ìˆê±°ë‚˜ ë„ˆë¬´ ì§§ìŠµë‹ˆë‹¤. API ì‘ë‹µì„ í™•ì¸í•´ì£¼ì„¸ìš”.');
      }

      return result;
    } catch (error) {
      // ë” ëª…í™•í•œ ì—ëŸ¬ ë©”ì‹œì§€ ì œê³µ
      if (error instanceof Error) {
        if (error.message.includes('API key')) {
          throw new Error(`AI API í‚¤ê°€ ì„¤ì •ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤. í™˜ê²½ ë³€ìˆ˜ë¥¼ í™•ì¸í•´ì£¼ì„¸ìš”. (${this.config.provider})`);
        }
        if (error.message.includes('401') || error.message.includes('403')) {
          throw new Error(`AI API ì¸ì¦ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤. API í‚¤ë¥¼ í™•ì¸í•´ì£¼ì„¸ìš”. (${this.config.provider})`);
        }
        if (error.message.includes('429')) {
          throw new Error('API ìš”ì²­ í•œë„ë¥¼ ì´ˆê³¼í–ˆìŠµë‹ˆë‹¤. ì ì‹œ í›„ ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.');
        }
        throw new Error(`ì œì•ˆì„œ ìƒì„± ì‹¤íŒ¨: ${error.message}`);
      }
      throw new Error('ì œì•ˆì„œ ìƒì„± ì¤‘ ì•Œ ìˆ˜ ì—†ëŠ” ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.');
    }
  }

  /**
   * ì œì•ˆì„œ ê¸°ë°˜ PRD ìƒì„±
   * ì—¬ëŸ¬ ë²ˆì— ë‚˜ëˆ„ì–´ì„œ ìƒì„±í•˜ì—¬ ì™„ì „í•œ ë¬¸ì„œë¥¼ ë§Œë“­ë‹ˆë‹¤.
   * @param onProgress ì§„í–‰ë¥  ì½œë°± (0-100)
   */
  async generatePRDFromProposal(idea: Idea, proposalContent: string, onProgress?: (progress: number) => void): Promise<string> {
    // PRDë¥¼ 10ê°œ ë¶€ë¶„ìœ¼ë¡œ ë‚˜ëˆ„ì–´ì„œ ë” ìƒì„¸í•˜ê²Œ ìƒì„±
    const parts: string[] = [];
    const totalParts = 10;
    
    // ì´ˆê¸° ì§„í–‰ë¥ 
    if (onProgress) onProgress(0);
    
    for (let partNum = 1; partNum <= totalParts; partNum++) {
      const prompt = this.buildPRDFromProposalPrompt(idea, proposalContent, partNum, parts);
      
      let partContent: string;
      if (this.config.provider === 'openrouter') {
        partContent = await this.callOpenRouter(prompt);
      } else if (this.config.provider === 'openai') {
        partContent = await this.callOpenAI(prompt);
      } else {
        partContent = await this.callClaude(prompt);
      }
      
      parts.push(partContent);
      
      // ê° ë¶€ë¶„ ì™„ë£Œ ì‹œ ì§„í–‰ë¥  ì—…ë°ì´íŠ¸ (ê° ë¶€ë¶„ì€ ì•½ 20%ì”©, ë§ˆì§€ë§‰ í•©ì¹˜ê¸°ëŠ” 20%)
      const partProgress = Math.floor((partNum / totalParts) * 80);
      if (onProgress) onProgress(partProgress);
      
      // ë§ˆì§€ë§‰ ë¶€ë¶„ì´ ì•„ë‹ˆë©´ ì ì‹œ ëŒ€ê¸° (API rate limit ë°©ì§€)
      if (partNum < totalParts) {
        await new Promise(resolve => setTimeout(resolve, 1500));
      }
    }
    
    // ëª¨ë“  ë¶€ë¶„ì„ í•©ì³ì„œ í•˜ë‚˜ì˜ ë¬¸ì„œë¡œ ë§Œë“¤ê¸°
    if (onProgress) onProgress(90);
    const fullDocument = this.mergePRDParts(parts);
    if (onProgress) onProgress(100);
    return fullDocument;
  }


  /**
   * PRD ë¶€ë¶„ë“¤ì„ í•©ì¹˜ê¸°
   */
  private mergePRDParts(parts: string[]): string {
    if (parts.length === 0) return '';
    if (parts.length === 1) return parts[0];
    
    // ì²« ë²ˆì§¸ ë¶€ë¶„ì˜ í—¤ë” ìœ ì§€
    let merged = parts[0];
    
    // ë‚˜ë¨¸ì§€ ë¶€ë¶„ë“¤ì„ ìˆœì°¨ì ìœ¼ë¡œ ì¶”ê°€
    for (let i = 1; i < parts.length; i++) {
      const part = parts[i];
      
      // ì¤‘ë³µë˜ëŠ” í—¤ë”ë‚˜ ë©”íƒ€ ì •ë³´ ì œê±°
      let cleanedPart = part
        // PRD ì œëª© ì œê±°
        .replace(/^#\s*PRD.*$/m, '')
        // ì„¹ì…˜ ë²ˆí˜¸ ì¤‘ë³µ ì œê±° (ì´ë¯¸ ì‘ì„±ëœ ì„¹ì…˜ ì œëª© ì œê±°)
        .replace(/^###\s*1\.\s*í”„ë¡œì íŠ¸\s*ê°œìš”.*$/m, '')
        .replace(/^###\s*2\.\s*ì‚¬ìš©ì\s*ìŠ¤í† ë¦¬.*$/m, '')
        .replace(/^###\s*3\.\s*ê¸°ëŠ¥\s*ëª…ì„¸.*$/m, '')
        .replace(/^###\s*4\.\s*í™”ë©´\s*ì„¤ê³„.*$/m, '')
        .replace(/^###\s*5\.\s*ê¸°ìˆ \s*ìš”êµ¬ì‚¬í•­.*$/m, '')
        .replace(/^###\s*6\.\s*í”„ë¡œì íŠ¸\s*êµ¬ì¡°.*$/m, '')
        .replace(/^###\s*6\.\s*ì„±ê³µ\s*ì§€í‘œ.*$/m, '')
        // ì¤‘ë³µëœ ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜ ì„¹ì…˜ ì œê±° (ë‹¤ì–‘í•œ íŒ¨í„´)
        .replace(/^## ğŸ“Š\s*ì‹œìŠ¤í…œ\s*ì•„í‚¤í…ì²˜.*?(?=##|###|$)/gs, '')
        .replace(/^##\s*ì‹œìŠ¤í…œ\s*ì•„í‚¤í…ì²˜.*?(?=##|###|$)/gs, '')
        .replace(/^###\s*ì‹œìŠ¤í…œ\s*êµ¬ì¡°\s*ë‹¤ì´ì–´ê·¸ë¨.*?(?=##|###|$)/gs, '')
        .replace(/^###\s*ì‹œìŠ¤í…œ\s*ì•„í‚¤í…ì²˜.*?(?=##|###|$)/gs, '')
        .replace(/^## ğŸ“¦\s*ì‹œìŠ¤í…œ\s*ì•„í‚¤í…ì²˜.*?(?=##|###|$)/gs, '')
        .replace(/^## ğŸ“‹\s*ì‹œìŠ¤í…œ\s*ì•„í‚¤í…ì²˜.*?(?=##|###|$)/gs, '')
        // ì¤‘ë³µëœ ë°ì´í„°ë² ì´ìŠ¤ ì„¤ê³„ ì„¹ì…˜ ì œê±° (ë‹¤ì–‘í•œ íŒ¨í„´)
        .replace(/^## ğŸ—„ï¸\s*ë°ì´í„°ë² ì´ìŠ¤\s*ì„¤ê³„.*?(?=##|###|$)/gs, '')
        .replace(/^##\s*ë°ì´í„°ë² ì´ìŠ¤\s*ì„¤ê³„.*?(?=##|###|$)/gs, '')
        .replace(/^###\s*ERD.*?(?=##|###|$)/gs, '')
        .replace(/^###\s*ë°ì´í„°ë² ì´ìŠ¤\s*ì„¤ê³„.*?(?=##|###|$)/gs, '')
        // ì¤‘ë³µëœ í”„ë¡œì íŠ¸ êµ¬ì¡° ì„¹ì…˜ ì œê±°
        .replace(/^##\s*í”„ë¡œì íŠ¸\s*êµ¬ì¡°.*?(?=##|###|$)/gs, '')
        .replace(/^###\s*í”„ë¡œì íŠ¸\s*êµ¬ì¡°\s*ë‹¤ì´ì–´ê·¸ë¨.*?(?=##|###|$)/gs, '')
        .replace(/^<h3[^>]*>í”„ë¡œì íŠ¸\s*êµ¬ì¡°\s*ë‹¤ì´ì–´ê·¸ë¨<\/h3>.*?(?=<h|##|###|$)/gs, '')
        .replace(/^<h4[^>]*>í”„ë¡œì íŠ¸\s*êµ¬ì¡°\s*ë‹¤ì´ì–´ê·¸ë¨<\/h4>.*?(?=<h|##|###|$)/gs, '')
        // ë¹ˆ êµ¬ë¶„ì„  ì œê±°
        .replace(/^---\s*$/m, '')
        // ë¶€ë¶„ ì‘ì„± ê°€ì´ë“œ ì œê±°
        .replace(/\*\*âš ï¸ ë¶€ë¶„ ì‘ì„± ê°€ì´ë“œ.*?\n\n/gs, '')
        // ì´ì „ ë¶€ë¶„ ì°¸ê³  ë‚´ìš© ì œê±°
        .replace(/\*\*âš ï¸ CRITICAL: ì´ì „ ë¶€ë¶„ ì „ì²´ ë‚´ìš©.*?âš ï¸ ì¤‘ìš” ì§€ì‹œì‚¬í•­:.*?\n\n/gs, '')
        .trim();
      
      // ì²« ë²ˆì§¸ ë¶€ë¶„ì— ì´ë¯¸ ìˆëŠ” ì„¹ì…˜ ì œê±°
      if (i === 1) {
        cleanedPart = cleanedPart
          .replace(/^###\s*1\.\s*í”„ë¡œì íŠ¸\s*ê°œìš”.*?(?=###\s*2\.|##|$)/s, '')
          .trim();
      }
      
      // ì¤‘ë³µëœ ë‹¤ì´ì–´ê·¸ë¨ ì œê±° (ê°™ì€ ë‚´ìš©ì˜ Mermaid ë‹¤ì´ì–´ê·¸ë¨ì´ ì—¬ëŸ¬ ë²ˆ ë‚˜íƒ€ë‚˜ë©´ ì²« ë²ˆì§¸ ê²ƒë§Œ ìœ ì§€)
      if (i > 1) {
        // ì´ë¯¸ mergedì— ìˆëŠ” Mermaid ë‹¤ì´ì–´ê·¸ë¨ê³¼ ë™ì¼í•œ ë‚´ìš©ì´ë©´ ì œê±°
        const mermaidRegex = /```mermaid\n([\s\S]*?)```/g;
        const existingDiagrams: string[] = [];
        let match;
        while ((match = mermaidRegex.exec(merged)) !== null) {
          existingDiagrams.push(match[1].trim());
        }
        
        cleanedPart = cleanedPart.replace(/```mermaid\n([\s\S]*?)```/g, (fullMatch, content) => {
          const trimmedContent = content.trim();
          if (existingDiagrams.includes(trimmedContent)) {
            return ''; // ì¤‘ë³µëœ ë‹¤ì´ì–´ê·¸ë¨ ì œê±°
          }
          existingDiagrams.push(trimmedContent);
          return fullMatch;
        });
      }
      
      // ìì—°ìŠ¤ëŸ½ê²Œ ì—°ê²°
      if (cleanedPart) {
        merged += '\n\n' + cleanedPart;
      }
    }
    
      // ì¤‘ë³µ ì œê±° ë° ì •ë¦¬
    merged = merged
      .replace(/\n{4,}/g, '\n\n\n') // ì—°ì†ëœ ì¤„ë°”ê¿ˆ ì •ë¦¬
      .replace(/^---\s*$/gm, '---') // êµ¬ë¶„ì„  ì •ë¦¬
      .replace(/\*\*âš ï¸ ì¤‘ìš”:.*?\n\n/gs, '') // ë¶€ë¶„ ì‘ì„± ê°€ì´ë“œ ì™„ì „ ì œê±°
      .replace(/\*\*âš ï¸ CRITICAL:.*?\n\n/gs, '') // CRITICAL ë©”ì‹œì§€ ì œê±°
      // ë¶ˆí•„ìš”í•œ ë©”íƒ€ ì •ë³´ ì œê±° (ìµœì¢… í™•ì¸ ì‚¬í•­ ë“±)
      .replace(/\*\*âš ï¸ ìµœì¢… í™•ì¸ ì‚¬í•­.*?âœ….*?í™•ì¸.*?\n\n/gs, '')
      .replace(/âš ï¸ ìµœì¢… í™•ì¸ ì‚¬í•­.*?âœ….*?í™•ì¸.*?\n\n/gs, '')
      .replace(/<p[^>]*>âš ï¸ ìµœì¢… í™•ì¸ ì‚¬í•­.*?<\/p>/gs, '')
      .replace(/\*\*âš ï¸ CRITICAL: ë¬¸ì„œ ì™„ì„±ë„ í™•ì¸.*?âœ….*?í™•ì¸.*?\n\n/gs, '')
      .replace(/âš ï¸ CRITICAL: ë¬¸ì„œ ì™„ì„±ë„ í™•ì¸.*?âœ….*?í™•ì¸.*?\n\n/gs, '')
      // ì œì•ˆì„œ ë‚´ìš© ì™„ì „ ì œê±° (ë‹¤ì–‘í•œ íŒ¨í„´)
      .replace(/#\s*\[.*?\]\s*-\s*ì œì•ˆì„œ[\s\S]*?(?=##|#|$)/g, '')
      .replace(/#\s*.*?\s*-\s*ì œì•ˆì„œ[\s\S]*?(?=##|#|$)/g, '')
      .replace(/##\s*1\.\s*ê°œìš”[\s\S]*?##\s*2\.\s*ë¬¸ì œ\s*ì •ì˜[\s\S]*?##\s*3\.\s*ì œì•ˆ\s*ì†”ë£¨ì…˜[\s\S]*?##\s*4\.\s*ì‚¬ìš©ì\s*ì‹œë‚˜ë¦¬ì˜¤[\s\S]*?##\s*5\.\s*ì‹¤í–‰\s*ê³„íš[\s\S]*?##\s*6\.\s*ì˜ˆìƒ\s*ì„±ê³¼/g, '')
      .replace(/##\s*ì›ë³¸\s*ì•„ì´ë””ì–´[\s\S]*?##\s*ê°œì„ \s*ëª©í‘œ[\s\S]*?##\s*í•µì‹¬\s*ê°€ì¹˜/g, '')
      // ì œì•ˆì„œ ê´€ë ¨ ì„¹ì…˜ ì œê±°
      .replace(/##\s*ì œì•ˆì„œ\s*ì‘ì„±\s*ëª©í‘œ.*?(?=##|###|$)/gs, '')
      .replace(/##\s*ì œì•ˆì„œ\s*ì‘ì„±\s*í˜•ì‹.*?(?=##|###|$)/gs, '')
      // ë¶ˆì™„ì „í•œ ë¬¸ì¥ ì œê±° (ì˜ˆ: "ê¸°ëŠ¥ì˜ ì„±ê³µë¥ "ë¡œ ëë‚˜ëŠ” ê²½ìš°)
      .replace(/- ì‚¬ìš©ì ê¸°ì–µì„ í•™ìŠµí•˜ê³ , ê¸°ì–µì„ ìœ ì§€í•˜ëŠ” ê¸°ëŠ¥ì˜ ì„±ê³µë¥ \s*$/gm, '')
      .replace(/- ì‚¬ìš©ì ê¸°ì–µì„ í•™ìŠµí•˜ê³ , ê¸°ì–µì„ ìœ ì§€í•˜ëŠ” ê¸°ëŠ¥ì˜ ì„±ê³µë¥ \n*$/gm, '')
      // ì¤‘ë³µëœ Mermaid ë‹¤ì´ì–´ê·¸ë¨ ì œê±° (ë” ê°•ë ¥í•œ íŒ¨í„´)
      .replace(/(```mermaid[\s\S]*?```)([\s\S]*?)\1/g, '$1$2')
      // ì¤‘ë³µëœ ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜ ì„¹ì…˜ ì œê±°
      .replace(/(## ğŸ“Š\s*ì‹œìŠ¤í…œ\s*ì•„í‚¤í…ì²˜[\s\S]*?)(?=## ğŸ“Š\s*ì‹œìŠ¤í…œ\s*ì•„í‚¤í…ì²˜|## ğŸ—„ï¸|## ğŸ“…|## âš ï¸|## âœ…|$)/g, '$1')
      .replace(/(##\s*ì‹œìŠ¤í…œ\s*ì•„í‚¤í…ì²˜[\s\S]*?)(?=##\s*ì‹œìŠ¤í…œ\s*ì•„í‚¤í…ì²˜|## ğŸ—„ï¸|## ğŸ“…|## âš ï¸|## âœ…|$)/g, '$1')
      .replace(/(## ğŸ“¦\s*ì‹œìŠ¤í…œ\s*ì•„í‚¤í…ì²˜[\s\S]*?)(?=## ğŸ“¦\s*ì‹œìŠ¤í…œ\s*ì•„í‚¤í…ì²˜|## ğŸ—„ï¸|## ğŸ“…|## âš ï¸|## âœ…|$)/g, '$1')
      .replace(/(## ğŸ“‹\s*ì‹œìŠ¤í…œ\s*ì•„í‚¤í…ì²˜[\s\S]*?)(?=## ğŸ“‹\s*ì‹œìŠ¤í…œ\s*ì•„í‚¤í…ì²˜|## ğŸ—„ï¸|## ğŸ“…|## âš ï¸|## âœ…|$)/g, '$1')
      // ì¤‘ë³µëœ ë°ì´í„°ë² ì´ìŠ¤ ì„¤ê³„ ì„¹ì…˜ ì œê±°
      .replace(/(## ğŸ—„ï¸\s*ë°ì´í„°ë² ì´ìŠ¤\s*ì„¤ê³„[\s\S]*?)(?=## ğŸ—„ï¸\s*ë°ì´í„°ë² ì´ìŠ¤\s*ì„¤ê³„|## ğŸ“…|## âš ï¸|## âœ…|$)/g, '$1')
      .replace(/(##\s*ë°ì´í„°ë² ì´ìŠ¤\s*ì„¤ê³„[\s\S]*?)(?=##\s*ë°ì´í„°ë² ì´ìŠ¤\s*ì„¤ê³„|## ğŸ“…|## âš ï¸|## âœ…|$)/g, '$1')
      // ì¤‘ë³µëœ í”„ë¡œì íŠ¸ êµ¬ì¡° ì„¹ì…˜ ì œê±°
      .replace(/(##\s*í”„ë¡œì íŠ¸\s*êµ¬ì¡°[\s\S]*?)(?=##\s*í”„ë¡œì íŠ¸\s*êµ¬ì¡°|## ğŸ“…|## âš ï¸|## âœ…|$)/g, '$1')
      .replace(/(###\s*í”„ë¡œì íŠ¸\s*êµ¬ì¡°\s*ë‹¤ì´ì–´ê·¸ë¨[\s\S]*?)(?=###\s*í”„ë¡œì íŠ¸\s*êµ¬ì¡°\s*ë‹¤ì´ì–´ê·¸ë¨|##|###|$)/g, '$1')
      .replace(/(<h3[^>]*>í”„ë¡œì íŠ¸\s*êµ¬ì¡°\s*ë‹¤ì´ì–´ê·¸ë¨<\/h3>[\s\S]*?)(?=<h3[^>]*>í”„ë¡œì íŠ¸\s*êµ¬ì¡°\s*ë‹¤ì´ì–´ê·¸ë¨<\/h3>|<h|##|###|$)/g, '$1')
      .replace(/(<h4[^>]*>í”„ë¡œì íŠ¸\s*êµ¬ì¡°\s*ë‹¤ì´ì–´ê·¸ë¨<\/h4>[\s\S]*?)(?=<h4[^>]*>í”„ë¡œì íŠ¸\s*êµ¬ì¡°\s*ë‹¤ì´ì–´ê·¸ë¨<\/h4>|<h|##|###|$)/g, '$1')
      // ì œì•ˆì„œ ë‚´ìš© ì™„ì „ ì œê±° (ë” ê°•ë ¥í•œ íŒ¨í„´)
      .replace(/#\s*\[.*?\]\s*-\s*ì œì•ˆì„œ[\s\S]*?(?=##|#|$)/g, '')
      .replace(/#\s*.*?\s*-\s*ì œì•ˆì„œ[\s\S]*?(?=##|#|$)/g, '')
      .replace(/##\s*1\.\s*ê°œìš”[\s\S]*?##\s*2\.\s*ë¬¸ì œ\s*ì •ì˜[\s\S]*?##\s*3\.\s*ì œì•ˆ\s*ì†”ë£¨ì…˜[\s\S]*?##\s*4\.\s*ì‚¬ìš©ì\s*ì‹œë‚˜ë¦¬ì˜¤[\s\S]*?##\s*5\.\s*ì‹¤í–‰\s*ê³„íš[\s\S]*?##\s*6\.\s*ì˜ˆìƒ\s*ì„±ê³¼/g, '')
      .replace(/##\s*ì›ë³¸\s*ì•„ì´ë””ì–´[\s\S]*?##\s*ê°œì„ \s*ëª©í‘œ[\s\S]*?##\s*í•µì‹¬\s*ê°€ì¹˜/g, '')
      // ë¶ˆì™„ì „í•œ ë¬¸ì¥ ì œê±° (ì˜ˆ: "ê¸°ëŠ¥ì˜ ì„±ê³µë¥ "ë¡œ ëë‚˜ëŠ” ê²½ìš°)
      .replace(/- ì‚¬ìš©ì ê¸°ì–µì„ í•™ìŠµí•˜ê³ , ê¸°ì–µì„ ìœ ì§€í•˜ëŠ” ê¸°ëŠ¥ì˜ ì„±ê³µë¥ \s*$/gm, '')
      .replace(/- ì‚¬ìš©ì ê¸°ì–µì„ í•™ìŠµí•˜ê³ , ê¸°ì–µì„ ìœ ì§€í•˜ëŠ” ê¸°ëŠ¥ì˜ ì„±ê³µë¥ \n*$/gm, '')
      // ë¬¸ì„œê°€ ë¶ˆì™„ì „í•˜ê²Œ ëë‚˜ëŠ” ê²½ìš° ì²´í¬
      .replace(/\n- ì‚¬ìš©ì ê¸°ì–µì„ í•™ìŠµí•˜ê³ , ê¸°ì–µì„ ìœ ì§€í•˜ëŠ” ê¸°ëŠ¥ì˜ ì„±ê³µë¥ \s*$/s, '')
      .trim();
    
    // ë¬¸ì„œê°€ ë¶ˆì™„ì „í•˜ê²Œ ëë‚˜ëŠ”ì§€ í™•ì¸ (ë§ˆì§€ë§‰ ì¤„ì´ ë¶ˆì™„ì „í•œ ë¬¸ì¥ìœ¼ë¡œ ëë‚˜ë©´ ì œê±°)
    const lastLines = merged.split('\n').slice(-3).join('\n');
    if (lastLines.match(/ê¸°ëŠ¥ì˜ ì„±ê³µë¥ \s*$/) || lastLines.match(/ì„±ê³µë¥ \s*$/)) {
      // ë¶ˆì™„ì „í•œ ë§ˆì§€ë§‰ ì¤„ ì œê±°
      merged = merged.replace(/\n- .*?ì„±ê³µë¥ \s*$/s, '');
    }
    
    return merged;
  }

  /**
   * PRD í”„ë¡¬í”„íŠ¸ ìƒì„± (prd_ref.md ê¸°ë°˜ ìƒì„¸ ì–‘ì‹)
   * @param partNumber ë¶€ë¶„ ë²ˆí˜¸ (1, 2, 3 ë“±) - ì—¬ëŸ¬ ë²ˆì— ë‚˜ëˆ„ì–´ì„œ ìƒì„±í•  ë•Œ ì‚¬ìš©
   * @param previousParts ì´ì „ì— ìƒì„±ëœ ë¶€ë¶„ë“¤
   */
  private buildPRDPrompt(idea: Idea, partNumber?: number, previousParts?: string[]): string {
    const isMultiPart = partNumber !== undefined && partNumber > 1;
    const totalParts = 10;
    
    // ì´ì „ ë¶€ë¶„ì˜ ì „ì²´ ë‚´ìš© (ì¤‘ë³µ ì²´í¬ìš©)
    const previousContent = previousParts && previousParts.length > 0 
      ? `\n\n**âš ï¸ CRITICAL: ì´ì „ ë¶€ë¶„ ì „ì²´ ë‚´ìš© (ì¤‘ë³µ ë°©ì§€ í•„ìˆ˜):**\n${previousParts.map((p, i) => `\n### Part ${i + 1} ì „ì²´ ë‚´ìš©\n${p.substring(0, 5000)}${p.length > 5000 ? '\n\n...(ì´ì „ ë¶€ë¶„ì´ ê¸¸ì–´ ì¼ë¶€ë§Œ í‘œì‹œí–ˆìŠµë‹ˆë‹¤. ì „ì²´ ë‚´ìš©ì„ ì°¸ê³ í•˜ì—¬ ì¤‘ë³µë˜ì§€ ì•Šë„ë¡ ì‘ì„±í•˜ì„¸ìš”.)' : ''}`).join('\n\n---\n\n')}\n\n**âš ï¸ ì¤‘ìš” ì§€ì‹œì‚¬í•­:**\n- ìœ„ ì´ì „ ë¶€ë¶„ì˜ ë‚´ìš©ê³¼ **ì ˆëŒ€ ì¤‘ë³µë˜ì§€ ì•Šë„ë¡** ì‘ì„±í•˜ì„¸ìš”.\n- ì´ì „ ë¶€ë¶„ì— ì´ë¯¸ ì‘ì„±ëœ ì„¹ì…˜ì€ ë‹¤ì‹œ ì‘ì„±í•˜ì§€ ë§ˆì„¸ìš”.\n- ì´ì „ ë¶€ë¶„ì— ì´ë¯¸ ì‘ì„±ëœ ë‹¤ì´ì–´ê·¸ë¨ì€ ë‹¤ì‹œ ì‘ì„±í•˜ì§€ ë§ˆì„¸ìš”.\n- ì´ì „ ë¶€ë¶„ê³¼ ìì—°ìŠ¤ëŸ½ê²Œ ì—°ê²°ë˜ë„ë¡ ì‘ì„±í•˜ë˜, ë‚´ìš©ì€ ì™„ì „íˆ ìƒˆë¡œìš´ ê²ƒì´ì–´ì•¼ í•©ë‹ˆë‹¤.\n`
      : '';
    
    const partInfo = isMultiPart ? `\n\n**âš ï¸ ì¤‘ìš”: ì´ê²ƒì€ PRDì˜ ${partNumber}ë²ˆì§¸ ë¶€ë¶„ì…ë‹ˆë‹¤ (ì „ì²´ ${totalParts}ê°œ ë¶€ë¶„).**${previousContent}` : '';
    
    // ê° ë¶€ë¶„ë³„ë¡œ ì‘ì„±í•  ì„¹ì…˜ ì •ì˜ (7ê°œ ë¶€ë¶„ìœ¼ë¡œ ì„¸ë¶„í™”)
    const sectionGuide = partNumber === 1 
      ? `- **Part 1 ì‘ì„± ë‚´ìš©**: í”„ë¡œì íŠ¸ ê°œìš” ì„¹ì…˜ë§Œ ìƒì„¸íˆ ì‘ì„±í•˜ì„¸ìš”.\n- í”„ë¡œì íŠ¸ëª…, í•œ ì¤„ ì„¤ëª…, í”„ë¡œì íŠ¸ ëª©ì , í•µì‹¬ ê°€ì¹˜ ì œì•ˆ, íƒ€ê²Ÿ ì‚¬ìš©ì, í•´ê²°í•˜ë ¤ëŠ” ë¬¸ì œë¥¼ ëª¨ë‘ í¬í•¨í•˜ì„¸ìš”.`
      : partNumber === 2
      ? `- **Part 2 ì‘ì„± ë‚´ìš©**: ì‚¬ìš©ì ìŠ¤í† ë¦¬ ì„¹ì…˜ë§Œ ìƒì„¸íˆ ì‘ì„±í•˜ì„¸ìš”.\n- ì£¼ìš” ì‚¬ìš©ì í˜ë¥´ì†Œë‚˜, ì‚¬ìš©ì ì—¬ì •, í•µì‹¬ ê¸°ëŠ¥ ìš”êµ¬ì‚¬í•­ì„ ëª¨ë‘ í¬í•¨í•˜ì„¸ìš”.\n- í”„ë¡œì íŠ¸ ê°œìš” ì„¹ì…˜ì€ ì‘ì„±í•˜ì§€ ë§ˆì„¸ìš” (Part 1ì— ì´ë¯¸ ìˆìŒ).`
      : partNumber === 3
      ? `- **Part 3 ì‘ì„± ë‚´ìš©**: ê¸°ëŠ¥ ëª…ì„¸ ì„¹ì…˜ë§Œ ìƒì„¸íˆ ì‘ì„±í•˜ì„¸ìš”.\n- MVP ê¸°ëŠ¥ ëª©ë¡, ìš°ì„ ìˆœìœ„ë³„ ê¸°ëŠ¥ ë¶„ë¥˜, ê¸°ìˆ ì  ì œì•½ì‚¬í•­ì„ ëª¨ë‘ í¬í•¨í•˜ì„¸ìš”.\n- ì´ì „ ë¶€ë¶„ì— ì´ë¯¸ ì‘ì„±ëœ ì„¹ì…˜ì€ ì‘ì„±í•˜ì§€ ë§ˆì„¸ìš”.`
      : partNumber === 4
      ? `- **Part 4 ì‘ì„± ë‚´ìš©**: í™”ë©´ ì„¤ê³„ ì„¹ì…˜ë§Œ ìƒì„¸íˆ ì‘ì„±í•˜ì„¸ìš”.\n- ìµœì†Œ 2ê°œ ì´ìƒì˜ í™”ë©´ì„ êµ¬ì²´ì ìœ¼ë¡œ ì„¤ê³„í•˜ì„¸ìš”.\n- ì´ì „ ë¶€ë¶„ì— ì´ë¯¸ ì‘ì„±ëœ ì„¹ì…˜ì€ ì‘ì„±í•˜ì§€ ë§ˆì„¸ìš”.`
      : partNumber === 5
      ? `- **Part 5 ì‘ì„± ë‚´ìš©**: ê¸°ìˆ  ìš”êµ¬ì‚¬í•­ ì„¹ì…˜ë§Œ ìƒì„¸íˆ ì‘ì„±í•˜ì„¸ìš”.\n- ê¸°ìˆ  ìŠ¤íƒ ì œì•ˆ, ì¸í”„ë¼ ìš”êµ¬ì‚¬í•­, ë³´ì•ˆ ê³ ë ¤ì‚¬í•­ì„ ëª¨ë‘ í¬í•¨í•˜ì„¸ìš”.\n- ì´ì „ ë¶€ë¶„ì— ì´ë¯¸ ì‘ì„±ëœ ì„¹ì…˜ì€ ì‘ì„±í•˜ì§€ ë§ˆì„¸ìš”.`
      : partNumber === 6
      ? `- **Part 6 ì‘ì„± ë‚´ìš©**: í”„ë¡œì íŠ¸ êµ¬ì¡° ì„¹ì…˜ë§Œ ìƒì„¸íˆ ì‘ì„±í•˜ì„¸ìš”.\n- **âš ï¸ CRITICAL: í”„ë¡œì íŠ¸ êµ¬ì¡° ë‹¤ì´ì–´ê·¸ë¨ì„ ë°˜ë“œì‹œ í¬í•¨í•˜ì„¸ìš”. ë‹¤ì´ì–´ê·¸ë¨ì´ ë¹„ì–´ìˆìœ¼ë©´ ì•ˆ ë©ë‹ˆë‹¤.**\n- ì•„ì´ë””ì–´ì™€ PRDë¥¼ ë¶„ì„í•˜ì—¬ ì‹¤ì œ ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜ë¥¼ ê°„ê²°í•œ Mermaid ë‹¤ì´ì–´ê·¸ë¨ìœ¼ë¡œ ì‘ì„±í•˜ì„¸ìš”.\n- ë‹¤ì´ì–´ê·¸ë¨ ë…¸ë“œ í…ìŠ¤íŠ¸ëŠ” ìµœëŒ€ 15ì ì´í•˜ë¡œ ì‘ì„±í•˜ì„¸ìš” (ì˜ë¦¼ ë°©ì§€).\n- ì´ì „ ë¶€ë¶„ì— ì´ë¯¸ ì‘ì„±ëœ ì„¹ì…˜ì€ ì‘ì„±í•˜ì§€ ë§ˆì„¸ìš”.`
      : partNumber === 7
      ? `- **Part 7 ì‘ì„± ë‚´ìš©**: ì„±ê³µ ì§€í‘œ ì„¹ì…˜ë§Œ ìƒì„¸íˆ ì‘ì„±í•˜ì„¸ìš”.\n- **âš ï¸ CRITICAL: ë¬¸ì„œë¥¼ ì™„ì „íˆ ë§ˆë¬´ë¦¬í•˜ì„¸ìš”. ì¤‘ê°„ì— ëŠê¸°ì§€ ì•Šë„ë¡ ë§ˆì§€ë§‰ê¹Œì§€ ì‘ì„±í•˜ì„¸ìš”.**\n- KPI ì •ì˜ì™€ ì¸¡ì • ë°©ë²•ì„ ëª¨ë‘ í¬í•¨í•˜ì„¸ìš”.\n- ë¬¸ì„œ ë§ˆì§€ë§‰ì— "## ì™„ë£Œ ì¡°ê±´" ë˜ëŠ” "## ë‹¤ìŒ ë‹¨ê³„" ì„¹ì…˜ìœ¼ë¡œ ìì—°ìŠ¤ëŸ½ê²Œ ë§ˆë¬´ë¦¬í•˜ì„¸ìš”.`
      : '';
    
    return `ë‹¤ìŒ Reddit ê²Œì‹œê¸€ì„ ê¸°ë°˜ìœ¼ë¡œ ìƒì„¸í•˜ê³  êµ¬ì²´ì ì¸ PRD(Product Requirements Document) ë¬¸ì„œë¥¼ í•œêµ­ì–´ë¡œ ì‘ì„±í•´ì£¼ì„¸ìš”.

**âš ï¸ CRITICAL: ë¬¸ì„œë¥¼ ì™„ì „íˆ ë§ˆë¬´ë¦¬í•˜ì„¸ìš”. ì¤‘ê°„ì— ëŠê¸°ì§€ ì•Šë„ë¡ ë§ˆì§€ë§‰ê¹Œì§€ ì‘ì„±í•˜ì„¸ìš”. ë¶ˆì™„ì „í•œ ë¬¸ì¥ìœ¼ë¡œ ëë‚˜ë©´ ì•ˆ ë©ë‹ˆë‹¤.**

${partInfo}
${sectionGuide ? `\n**âš ï¸ ë¶€ë¶„ ì‘ì„± ê°€ì´ë“œ (Part ${partNumber}/${totalParts}):**\n${sectionGuide}\n- ì´ì „ ë¶€ë¶„ê³¼ ìì—°ìŠ¤ëŸ½ê²Œ ì—°ê²°ë˜ë„ë¡ ì‘ì„±í•˜ì„¸ìš”.\n- ì¤‘ë³µë˜ëŠ” í—¤ë”ë‚˜ ê°œìš” ì„¹ì…˜ì€ ì‘ì„±í•˜ì§€ ë§ˆì„¸ìš”.\n- ê° ë¶€ë¶„ë§ˆë‹¤ ìµœì†Œ 200-300ì¤„ ì´ìƒ ì‘ì„±í•˜ì„¸ìš”.\n- **âš ï¸ CRITICAL: ë¬¸ì„œë¥¼ ì™„ì „íˆ ë§ˆë¬´ë¦¬í•˜ì„¸ìš”. ë¶ˆì™„ì „í•œ ë¬¸ì¥ìœ¼ë¡œ ëë‚˜ë©´ ì•ˆ ë©ë‹ˆë‹¤.**\n` : ''}
## ì•„ì´ë””ì–´ ì •ë³´
- **ì œëª©**: ${idea.title}
- **ë‚´ìš©**: ${idea.content}
- **ì„œë¸Œë ˆë”§**: r/${idea.subreddit}
- **ì‘ì„±ì**: ${idea.author}
- **ì—…ë³´íŠ¸**: ${idea.upvotes}

## ì•„ì´ë””ì–´ ê°œì„  ë° êµ¬ì¶• ê°€ì´ë“œë¼ì¸

PRDë¥¼ ì‘ì„±í•  ë•Œ ë‹¤ìŒ ì‚¬í•­ì„ ê³ ë ¤í•˜ì—¬ ì•„ì´ë””ì–´ë¥¼ ë‹¤ë“¬ê³  êµ¬ì²´í™”í•´ì£¼ì„¸ìš”:

### 1. ì•„ì´ë””ì–´ ê²€ì¦ ë° ê°œì„ 
- **ë¬¸ì œ ì •ì˜ ëª…í™•í™”**: ì›ë³¸ ì•„ì´ë””ì–´ì—ì„œ ì œì‹œëœ ë¬¸ì œë¥¼ ë” êµ¬ì²´ì ì´ê³  ì¸¡ì • ê°€ëŠ¥í•˜ê²Œ ì •ì˜
- **íƒ€ê²Ÿ ì‚¬ìš©ì êµ¬ì²´í™”**: ëˆ„ê°€ ì´ ë¬¸ì œë¥¼ ê²ªê³  ìˆëŠ”ì§€, ì–¼ë§ˆë‚˜ ë§ì€ ì‚¬ëŒë“¤ì´ ì˜í–¥ì„ ë°›ëŠ”ì§€ ëª…í™•íˆ ì œì‹œ
- **ê²½ìŸ ë¶„ì„**: ìœ ì‚¬í•œ ì†”ë£¨ì…˜ì´ ìˆëŠ”ì§€, ê¸°ì¡´ ì†”ë£¨ì…˜ì˜ í•œê³„ì ì€ ë¬´ì—‡ì¸ì§€ ë¶„ì„
- **ì°¨ë³„í™” í¬ì¸íŠ¸**: ê¸°ì¡´ ì†”ë£¨ì…˜ ëŒ€ë¹„ ì´ ì•„ì´ë””ì–´ì˜ ê³ ìœ í•œ ê°€ì¹˜ì™€ ì°¨ë³„ì  ëª…í™•íˆ ì œì‹œ

### 2. íš¨ìœ¨ì ì¸ êµ¬ì¶• ë°©ë²•
- **MVP ìš°ì„ ìˆœìœ„**: ìµœì†Œ ê¸°ëŠ¥ ì œí’ˆ(MVP)ì„ ë¹ ë¥´ê²Œ ì¶œì‹œí•  ìˆ˜ ìˆë„ë¡ í•µì‹¬ ê¸°ëŠ¥ë§Œ ì„ ë³„
- **ë‹¨ê³„ì  í™•ì¥**: MVP â†’ Phase 2 â†’ Phase 3 ìˆœì„œë¡œ ê¸°ëŠ¥ì„ í™•ì¥í•˜ëŠ” ë¡œë“œë§µ ì œì‹œ
- **ê¸°ìˆ  ìŠ¤íƒ ì„ íƒ**: ë¬´ë£Œ/ì €ë¹„ìš©ìœ¼ë¡œ ì‹œì‘í•  ìˆ˜ ìˆëŠ” ê¸°ìˆ  ìŠ¤íƒê³¼ ì¸í”„ë¼ ì œì•ˆ
- **ê°œë°œ íš¨ìœ¨ì„±**: ì¬ì‚¬ìš© ê°€ëŠ¥í•œ ì»´í¬ë„ŒíŠ¸, ì˜¤í”ˆì†ŒìŠ¤ ë¼ì´ë¸ŒëŸ¬ë¦¬ í™œìš© ë°©ì•ˆ ì œì‹œ
- **ë¹„ìš© ìµœì í™”**: ì´ˆê¸° ë¹„ìš©ì„ ìµœì†Œí™”í•˜ë©´ì„œë„ í™•ì¥ ê°€ëŠ¥í•œ ì•„í‚¤í…ì²˜ ì„¤ê³„

### 3. ì‹¤ìš©ì„± ê°•í™”
- **ì‚¬ìš©ì ì¤‘ì‹¬ ì„¤ê³„**: ì‚¬ìš©ìê°€ ì‹¤ì œë¡œ í•„ìš”ë¡œ í•˜ëŠ” ê¸°ëŠ¥ì— ì§‘ì¤‘
- **ê°„ë‹¨í•œ UX**: ë³µì¡í•œ ê¸°ëŠ¥ë³´ë‹¤ ì§ê´€ì ì´ê³  ì‚¬ìš©í•˜ê¸° ì‰¬ìš´ ì¸í„°í˜ì´ìŠ¤ ìš°ì„ 
- **ë¹ ë¥¸ í”¼ë“œë°± ë£¨í”„**: ì‚¬ìš©ì í”¼ë“œë°±ì„ ë¹ ë¥´ê²Œ ìˆ˜ì§‘í•˜ê³  ë°˜ì˜í•  ìˆ˜ ìˆëŠ” ë°©ë²• ì œì‹œ
- **ì¸¡ì • ê°€ëŠ¥í•œ ì„±ê³µ ì§€í‘œ**: ì œí’ˆì˜ ì„±ê³µì„ ì¸¡ì •í•  ìˆ˜ ìˆëŠ” KPI ì •ì˜

### 4. ìœ„í—˜ ê´€ë¦¬
- **ê¸°ìˆ ì  ìœ„í—˜**: ì˜ˆìƒë˜ëŠ” ê¸°ìˆ ì  ë„ì „ê³¼ì œì™€ í•´ê²° ë°©ì•ˆ
- **ì‹œì¥ ìœ„í—˜**: ì‹œì¥ ì§„ì… ì‹œ ì˜ˆìƒë˜ëŠ” ì¥ë²½ê³¼ ëŒ€ì‘ ì „ëµ
- **ë¦¬ì†ŒìŠ¤ ì œì•½**: ì œí•œëœ ë¦¬ì†ŒìŠ¤ ë‚´ì—ì„œ ìµœëŒ€ íš¨ê³¼ë¥¼ ë‚¼ ìˆ˜ ìˆëŠ” ë°©ë²•

## âš ï¸ ì¤‘ìš” ì§€ì‹œì‚¬í•­

**ì ˆëŒ€ ê¸ˆì§€ ì‚¬í•­:**
- âŒ "[í”„ë¡œì íŠ¸ ì´ë¦„ì„ ëª…í™•í•˜ê²Œ ì œì‹œ]" ê°™ì€ í”Œë ˆì´ìŠ¤í™€ë”ë‚˜ ì˜ˆì‹œ í…œí”Œë¦¿ì„ ê·¸ëŒ€ë¡œ ì‚¬ìš©í•˜ì§€ ë§ˆì„¸ìš”
- âŒ "[ê¸°ëŠ¥ëª… 1]", "[ì„¤ëª…]", "[ì˜ˆìƒ ì‹œê°„]" ê°™ì€ ëŒ€ê´„í˜¸ ì•ˆì˜ ì˜ˆì‹œ í…ìŠ¤íŠ¸ë¥¼ ê·¸ëŒ€ë¡œ ë‚¨ê¸°ì§€ ë§ˆì„¸ìš”
- âŒ ì¼ë°˜ì ì¸ ì„¤ëª…ì´ë‚˜ ì¶”ìƒì ì¸ ë‚´ìš©ë§Œ ì‘ì„±í•˜ì§€ ë§ˆì„¸ìš”

**í•„ìˆ˜ ì‚¬í•­:**
- âœ… ìœ„ì— ì œê³µëœ ì•„ì´ë””ì–´ ì œëª©ê³¼ ë‚´ìš©ì„ **ë°˜ë“œì‹œ ë¶„ì„**í•˜ì—¬ ì‹¤ì œ ë‚´ìš©ì„ ì‘ì„±í•˜ì„¸ìš”
- âœ… ì•„ì´ë””ì–´ì—ì„œ ì–¸ê¸‰ëœ **êµ¬ì²´ì ì¸ ë¬¸ì œì , ê¸°ëŠ¥, ì‚¬ìš©ì**ë¥¼ ê¸°ë°˜ìœ¼ë¡œ ì‘ì„±í•˜ì„¸ìš”
- âœ… ëª¨ë“  ì„¹ì…˜ì— **ì‹¤ì œ ì•„ì´ë””ì–´ì—ì„œ ì¶”ì¶œí•œ êµ¬ì²´ì ì¸ ë‚´ìš©**ì„ í¬í•¨í•˜ì„¸ìš”
- âœ… ì˜ˆì‹œê°€ ì•„ë‹Œ **ì‹¤ì œ í”„ë¡œì íŠ¸ ê¸°íšì„œ**ë¥¼ ì‘ì„±í•˜ì„¸ìš”

## PRD ì‘ì„± ìš”êµ¬ì‚¬í•­

**âš ï¸ ì ˆëŒ€ì ìœ¼ë¡œ ì¤€ìˆ˜í•´ì•¼ í•  ê·œì¹™:**
1. **ë°˜ë“œì‹œ ì•„ë˜ êµ¬ì¡°ë¥¼ ì •í™•íˆ ë”°ë¼ ì‘ì„±í•˜ì„¸ìš”.** ì„¹ì…˜ ìˆœì„œ, ì œëª©, í˜•ì‹ì„ ì ˆëŒ€ ë³€ê²½í•˜ì§€ ë§ˆì„¸ìš”.
2. **ëª¨ë“  ì„¹ì…˜ì„ ë°•ìŠ¤ ë‹¨ìœ„ë¡œ ì‘ì„±í•˜ì„¸ìš”.** ê° ì„¹ì…˜ì€ ëª…í™•í•œ ì œëª©ê³¼ ë‚´ìš©ìœ¼ë¡œ êµ¬ë¶„ë˜ì–´ì•¼ í•©ë‹ˆë‹¤.
3. **í”Œë ˆì´ìŠ¤í™€ë”([...])ë¥¼ ì ˆëŒ€ ì‚¬ìš©í•˜ì§€ ë§ˆì„¸ìš”.** ëª¨ë“  ë‚´ìš©ì€ ì•„ì´ë””ì–´ì—ì„œ ì¶”ì¶œí•œ ì‹¤ì œ ë‚´ìš©ì´ì–´ì•¼ í•©ë‹ˆë‹¤.
4. **ì•„ì´ë””ì–´ë§ˆë‹¤ í˜•ì‹ì´ ë‹¬ë¼ì§€ë©´ ì•ˆ ë©ë‹ˆë‹¤.** ëª¨ë“  ì•„ì´ë””ì–´ì— ëŒ€í•´ ë™ì¼í•œ êµ¬ì¡°ì™€ í˜•ì‹ì„ ì‚¬ìš©í•˜ì„¸ìš”.

ë‹¤ìŒ êµ¬ì¡°ë¥¼ **ì •í™•íˆ** ë”°ë¼ ë§ˆí¬ë‹¤ìš´ í˜•ì‹ìœ¼ë¡œ ì‘ì„±í•´ì£¼ì„¸ìš”. **ìœ„ì— ì œê³µëœ ì•„ì´ë””ì–´ ì •ë³´ë¥¼ ë°˜ë“œì‹œ ë¶„ì„í•˜ì—¬ ì‹¤ì œ ë‚´ìš©ì„ ì‘ì„±**í•˜ì„¸ìš”.

### 1. í”„ë¡œì íŠ¸ ê°œìš”

#### í”„ë¡œì íŠ¸ëª…
ì•„ì´ë””ì–´ ì œëª©ê³¼ ë‚´ìš©ì„ ë¶„ì„í•˜ì—¬ ì‹¤ì œ í”„ë¡œì íŠ¸ ì´ë¦„ì„ ì œì‹œí•˜ì„¸ìš”. (ì˜ˆ: "TaskFlow", "BudgetBuddy", "StudySync" ë“± êµ¬ì²´ì ì¸ ì´ë¦„)

#### í•œ ì¤„ ì„¤ëª…
ì•„ì´ë””ì–´ì—ì„œ ì œì‹œëœ ë¬¸ì œì™€ í•´ê²°ì±…ì„ ê¸°ë°˜ìœ¼ë¡œ í”„ë¡œì íŠ¸ì˜ í•µì‹¬ ê°€ì¹˜ë¥¼ í•œ ë¬¸ì¥ìœ¼ë¡œ ì„¤ëª…í•˜ì„¸ìš”.

#### í”„ë¡œì íŠ¸ ëª©ì 
ì•„ì´ë””ì–´ ë‚´ìš©ì„ ë¶„ì„í•˜ì—¬ ë‹¤ìŒ ì„¸ ê°€ì§€ë¥¼ ë°˜ë“œì‹œ í¬í•¨í•˜ì„¸ìš”:
- ì•„ì´ë””ì–´ì—ì„œ ì–¸ê¸‰ëœ êµ¬ì²´ì ì¸ ë¬¸ì œì ì„ ëª…í™•íˆ ì œì‹œ
- ì´ ë¬¸ì œë¥¼ í•´ê²°í•˜ê¸° ìœ„í•œ í”„ë¡œì íŠ¸ì˜ í•µì‹¬ ëª©í‘œë¥¼ ëª…í™•íˆ ì œì‹œ
- í”„ë¡œì íŠ¸ì˜ ë¹„ì „ê³¼ ë°©í–¥ì„±ì„ êµ¬ì²´ì ìœ¼ë¡œ ì„¤ëª…

#### í•µì‹¬ ê°€ì¹˜ ì œì•ˆ
ì•„ì´ë””ì–´ì—ì„œ ì œì‹œëœ í•´ê²°ì±…ì„ ê¸°ë°˜ìœ¼ë¡œ ì‚¬ìš©ìì—ê²Œ ì œê³µí•˜ëŠ” í•µì‹¬ ê°€ì¹˜ë¥¼ êµ¬ì²´ì ìœ¼ë¡œ ë‚˜ì—´í•˜ì„¸ìš”. ìµœì†Œ 3ê°œ ì´ìƒì˜ êµ¬ì²´ì ì¸ ê°€ì¹˜ë¥¼ ì œì‹œí•˜ì„¸ìš”.

#### íƒ€ê²Ÿ ì‚¬ìš©ì
ì•„ì´ë””ì–´ ë‚´ìš©ì„ ë¶„ì„í•˜ì—¬ ëˆ„ê°€ ì´ ë¬¸ì œë¥¼ ê²ªê³  ìˆëŠ”ì§€ êµ¬ì²´ì ìœ¼ë¡œ ì œì‹œí•˜ì„¸ìš”. ìµœì†Œ 2ê°œ ì´ìƒì˜ ì‚¬ìš©ì ê·¸ë£¹ì„ ëª…ì‹œí•˜ì„¸ìš”.

#### í•´ê²°í•˜ë ¤ëŠ” ë¬¸ì œ
ì•„ì´ë””ì–´ì—ì„œ ì œì‹œëœ ë¬¸ì œì ì„ êµ¬ì²´ì ìœ¼ë¡œ ë‚˜ì—´í•˜ì„¸ìš”. ìµœì†Œ 2ê°œ ì´ìƒì˜ êµ¬ì²´ì ì¸ ë¬¸ì œì ì„ ì œì‹œí•˜ì„¸ìš”.

### 2. ì‚¬ìš©ì ìŠ¤í† ë¦¬

#### ì£¼ìš” ì‚¬ìš©ì í˜ë¥´ì†Œë‚˜
ì•„ì´ë””ì–´ ë‚´ìš©ì„ ë¶„ì„í•˜ì—¬ ì‹¤ì œ ì‚¬ìš©ì í˜ë¥´ì†Œë‚˜ë¥¼ ì‘ì„±í•˜ì„¸ìš”. ìµœì†Œ 2ëª…ì˜ ì‚¬ìš©ì í˜ë¥´ì†Œë‚˜ë¥¼ ë‹¤ìŒ í˜•ì‹ìœ¼ë¡œ ì‘ì„±í•˜ì„¸ìš”:

**ì‚¬ìš©ì ìœ í˜• 1: [ì•„ì´ë””ì–´ì—ì„œ ì–¸ê¸‰ëœ êµ¬ì²´ì ì¸ ì‚¬ìš©ì ìœ í˜•]**
- ì—­í• : [ì•„ì´ë””ì–´ì—ì„œ ì–¸ê¸‰ëœ êµ¬ì²´ì ì¸ ì—­í• ]
- ëª©í‘œ: [ì•„ì´ë””ì–´ì—ì„œ ì–¸ê¸‰ëœ êµ¬ì²´ì ì¸ ëª©í‘œ]
- ë¶ˆí¸í•¨: [ì•„ì´ë””ì–´ì—ì„œ ì–¸ê¸‰ëœ êµ¬ì²´ì ì¸ ë¶ˆí¸í•¨]

**ì‚¬ìš©ì ìœ í˜• 2: [ì•„ì´ë””ì–´ì—ì„œ ì–¸ê¸‰ëœ êµ¬ì²´ì ì¸ ì‚¬ìš©ì ìœ í˜•]**
- ì—­í• : [ì•„ì´ë””ì–´ì—ì„œ ì–¸ê¸‰ëœ êµ¬ì²´ì ì¸ ì—­í• ]
- ëª©í‘œ: [ì•„ì´ë””ì–´ì—ì„œ ì–¸ê¸‰ëœ êµ¬ì²´ì ì¸ ëª©í‘œ]
- ë¶ˆí¸í•¨: [ì•„ì´ë””ì–´ì—ì„œ ì–¸ê¸‰ëœ êµ¬ì²´ì ì¸ ë¶ˆí¸í•¨]

#### ì‚¬ìš©ì ì—¬ì •
ì•„ì´ë””ì–´ì—ì„œ ì œì‹œëœ ë¬¸ì œ í•´ê²° ê³¼ì •ì„ ê¸°ë°˜ìœ¼ë¡œ ì‚¬ìš©ì ì—¬ì •ì„ ë‹¤ìŒ 4ë‹¨ê³„ë¡œ ì‘ì„±í•˜ì„¸ìš”:
1. **ì¸ì§€ ë‹¨ê³„**: ì•„ì´ë””ì–´ì—ì„œ ì–¸ê¸‰ëœ ë¬¸ì œ ì¸ì§€ ê³¼ì •ì„ êµ¬ì²´ì ìœ¼ë¡œ ì„¤ëª…
2. **íƒìƒ‰ ë‹¨ê³„**: ì•„ì´ë””ì–´ì—ì„œ ì–¸ê¸‰ëœ í•´ê²°ì±… íƒìƒ‰ ê³¼ì •ì„ êµ¬ì²´ì ìœ¼ë¡œ ì„¤ëª…
3. **ì‚¬ìš© ë‹¨ê³„**: ì•„ì´ë””ì–´ì—ì„œ ì–¸ê¸‰ëœ ì„œë¹„ìŠ¤ ì‚¬ìš© ê³¼ì •ì„ êµ¬ì²´ì ìœ¼ë¡œ ì„¤ëª…
4. **í‰ê°€ ë‹¨ê³„**: ì•„ì´ë””ì–´ì—ì„œ ì–¸ê¸‰ëœ í‰ê°€ ë° í”¼ë“œë°± ê³¼ì •ì„ êµ¬ì²´ì ìœ¼ë¡œ ì„¤ëª…

#### í•µì‹¬ ê¸°ëŠ¥ ìš”êµ¬ì‚¬í•­
ì•„ì´ë””ì–´ì—ì„œ ì œì‹œëœ ê¸°ëŠ¥ì´ë‚˜ í•´ê²°ì±…ì„ ê¸°ë°˜ìœ¼ë¡œ êµ¬ì²´ì ì¸ ê¸°ëŠ¥ì„ ë‚˜ì—´í•˜ì„¸ìš”. ê° ê¸°ëŠ¥ì— ëŒ€í•´ ìƒì„¸ ì„¤ëª…ê³¼ ì‚¬ìš© ì‹œë‚˜ë¦¬ì˜¤ë¥¼ í¬í•¨í•˜ì„¸ìš”. ìµœì†Œ 3ê°œ ì´ìƒì˜ ê¸°ëŠ¥ì„ ì œì‹œí•˜ì„¸ìš”.

### 3. ê¸°ëŠ¥ ëª…ì„¸

#### MVP ê¸°ëŠ¥ ëª©ë¡
ì•„ì´ë””ì–´ì—ì„œ ì œì‹œëœ ê¸°ëŠ¥ì„ ë¶„ì„í•˜ì—¬ êµ¬ì²´ì ì¸ ê¸°ëŠ¥ ëª©ë¡ì„ ì‘ì„±í•˜ì„¸ìš”. ê° ê¸°ëŠ¥ì€ ë‹¤ìŒ í˜•ì‹ì„ ì •í™•íˆ ë”°ë¼ ì‘ì„±í•˜ì„¸ìš”:

1. **ê¸°ëŠ¥ëª…: [ì•„ì´ë””ì–´ì—ì„œ ì–¸ê¸‰ëœ êµ¬ì²´ì ì¸ ê¸°ëŠ¥ëª…]**
   - ì„¤ëª…: ì•„ì´ë””ì–´ì—ì„œ ì–¸ê¸‰ëœ ì´ ê¸°ëŠ¥ì˜ ìƒì„¸ ì„¤ëª…ê³¼ ì‘ë™ ë°©ì‹ì„ êµ¬ì²´ì ìœ¼ë¡œ ì‘ì„±
   - ìš°ì„ ìˆœìœ„: P0 (í•„ìˆ˜)
   - ì˜ˆìƒ ê°œë°œ ì‹œê°„: ì‹¤ì œ ê°œë°œ ê°€ëŠ¥í•œ ì˜ˆìƒ ì‹œê°„ì„ êµ¬ì²´ì ìœ¼ë¡œ ì œì‹œ (ì˜ˆ: 2ì£¼, 3ì¼ ë“±)

2. **ê¸°ëŠ¥ëª…: [ì•„ì´ë””ì–´ì—ì„œ ì–¸ê¸‰ëœ êµ¬ì²´ì ì¸ ê¸°ëŠ¥ëª…]**
   - ì„¤ëª…: ì•„ì´ë””ì–´ì—ì„œ ì–¸ê¸‰ëœ ì´ ê¸°ëŠ¥ì˜ ìƒì„¸ ì„¤ëª…ê³¼ ì‘ë™ ë°©ì‹ì„ êµ¬ì²´ì ìœ¼ë¡œ ì‘ì„±
   - ìš°ì„ ìˆœìœ„: P0 (í•„ìˆ˜)
   - ì˜ˆìƒ ê°œë°œ ì‹œê°„: ì‹¤ì œ ê°œë°œ ê°€ëŠ¥í•œ ì˜ˆìƒ ì‹œê°„ì„ êµ¬ì²´ì ìœ¼ë¡œ ì œì‹œ

3. **ê¸°ëŠ¥ëª…: [ì•„ì´ë””ì–´ì—ì„œ ì–¸ê¸‰ëœ êµ¬ì²´ì ì¸ ê¸°ëŠ¥ëª…]**
   - ì„¤ëª…: ì•„ì´ë””ì–´ì—ì„œ ì–¸ê¸‰ëœ ì´ ê¸°ëŠ¥ì˜ ìƒì„¸ ì„¤ëª…ê³¼ ì‘ë™ ë°©ì‹ì„ êµ¬ì²´ì ìœ¼ë¡œ ì‘ì„±
   - ìš°ì„ ìˆœìœ„: P1 (ì¤‘ìš”)
   - ì˜ˆìƒ ê°œë°œ ì‹œê°„: ì‹¤ì œ ê°œë°œ ê°€ëŠ¥í•œ ì˜ˆìƒ ì‹œê°„ì„ êµ¬ì²´ì ìœ¼ë¡œ ì œì‹œ

#### ìš°ì„ ìˆœìœ„ë³„ ê¸°ëŠ¥ ë¶„ë¥˜
ì•„ì´ë””ì–´ ë‚´ìš©ì„ ë¶„ì„í•˜ì—¬ ìš°ì„ ìˆœìœ„ë³„ë¡œ ê¸°ëŠ¥ì„ ë¶„ë¥˜í•˜ì„¸ìš”. ë‹¤ìŒ í˜•ì‹ì„ ì •í™•íˆ ë”°ë¼ ì‘ì„±í•˜ì„¸ìš”:

**P0 (í•„ìˆ˜ ê¸°ëŠ¥ - MVP)**
- ì•„ì´ë””ì–´ì—ì„œ ì–¸ê¸‰ëœ í•„ìˆ˜ ê¸°ëŠ¥ë“¤ì˜ êµ¬ì²´ì ì¸ ëª©ë¡ì„ ì‘ì„±

**P1 (ì¤‘ìš” ê¸°ëŠ¥ - Phase 2)**
- ì•„ì´ë””ì–´ì—ì„œ ì–¸ê¸‰ëœ ì¤‘ìš” ê¸°ëŠ¥ë“¤ì˜ êµ¬ì²´ì ì¸ ëª©ë¡ì„ ì‘ì„±

**P2 (ì„ íƒ ê¸°ëŠ¥ - Phase 3)**
- ì•„ì´ë””ì–´ì—ì„œ ì–¸ê¸‰ëœ ì„ íƒ ê¸°ëŠ¥ë“¤ì˜ êµ¬ì²´ì ì¸ ëª©ë¡ì„ ì‘ì„±

#### ê¸°ìˆ ì  ì œì•½ì‚¬í•­
ì•„ì´ë””ì–´ì˜ íŠ¹ì„±ê³¼ ë¬´ë£Œ í”Œëœ ì‚¬ìš©ì„ ê³ ë ¤í•˜ì—¬ ì œì•½ì‚¬í•­ì„ ì‘ì„±í•˜ì„¸ìš”. ë‹¤ìŒì„ ë°˜ë“œì‹œ í¬í•¨í•˜ì„¸ìš”:
- ë¬´ë£Œ í”Œëœ ì‚¬ìš©: ëª¨ë“  ì¸í”„ë¼ ë° ì„œë¹„ìŠ¤ëŠ” ë¬´ë£Œ í”Œëœ ë²”ìœ„ ë‚´ì—ì„œë§Œ êµ¬ì¶•
- ì•„ì´ë””ì–´ íŠ¹ì„±ì— ë§ëŠ” êµ¬ì²´ì ì¸ ì œì•½ì‚¬í•­ì„ ìµœì†Œ 2ê°œ ì´ìƒ ì œì‹œ

### 4. í™”ë©´ ì„¤ê³„

ì•„ì´ë””ì–´ì—ì„œ ì œì‹œëœ ê¸°ëŠ¥ì„ ê¸°ë°˜ìœ¼ë¡œ ì‹¤ì œ í™”ë©´ì„ ì„¤ê³„í•˜ì„¸ìš”. ìµœì†Œ 2ê°œ ì´ìƒì˜ í™”ë©´ì„ ë‹¤ìŒ í˜•ì‹ìœ¼ë¡œ ì‘ì„±í•˜ì„¸ìš”:

#### í™”ë©´ 1: [ì•„ì´ë””ì–´ì—ì„œ ì–¸ê¸‰ëœ ì£¼ìš” í™”ë©´ëª…]
**ëª©ì **: ì•„ì´ë””ì–´ì—ì„œ ì–¸ê¸‰ëœ ì´ í™”ë©´ì˜ êµ¬ì²´ì ì¸ ëª©ì ê³¼ ì—­í• ì„ ëª…í™•íˆ ì œì‹œ

**í™”ë©´ êµ¬ì„±**:
- ìƒë‹¨: ì•„ì´ë””ì–´ ê¸°ëŠ¥ì— ë§ëŠ” ìƒë‹¨ ì˜ì—­ êµ¬ì„± ìš”ì†Œë¥¼ êµ¬ì²´ì ìœ¼ë¡œ ì œì‹œ
- ì¤‘ê°„: ì•„ì´ë””ì–´ ê¸°ëŠ¥ì— ë§ëŠ” ì¤‘ê°„ ì˜ì—­ êµ¬ì„± ìš”ì†Œë¥¼ êµ¬ì²´ì ìœ¼ë¡œ ì œì‹œ
- í•˜ë‹¨: ì•„ì´ë””ì–´ ê¸°ëŠ¥ì— ë§ëŠ” í•˜ë‹¨ ì˜ì—­ êµ¬ì„± ìš”ì†Œë¥¼ êµ¬ì²´ì ìœ¼ë¡œ ì œì‹œ

**ì£¼ìš” ê¸°ëŠ¥**:
- ì•„ì´ë””ì–´ì—ì„œ ì–¸ê¸‰ëœ êµ¬ì²´ì ì¸ ê¸°ëŠ¥ 1ì„ ëª…ì‹œ
- ì•„ì´ë””ì–´ì—ì„œ ì–¸ê¸‰ëœ êµ¬ì²´ì ì¸ ê¸°ëŠ¥ 2ë¥¼ ëª…ì‹œ

#### í™”ë©´ 2: [ì•„ì´ë””ì–´ì—ì„œ ì–¸ê¸‰ëœ ë‘ ë²ˆì§¸ í™”ë©´ëª…]
ìœ„ì™€ ë™ì¼í•œ í˜•ì‹ìœ¼ë¡œ ì•„ì´ë””ì–´ ë‚´ìš©ì„ ë¶„ì„í•˜ì—¬ êµ¬ì²´ì ìœ¼ë¡œ ì‘ì„±í•˜ì„¸ìš”.

### 5. ê¸°ìˆ  ìš”êµ¬ì‚¬í•­

#### ê¸°ìˆ  ìŠ¤íƒ ì œì•ˆ
**í”„ë¡ íŠ¸ì—”ë“œ**
- í”„ë ˆì„ì›Œí¬: React, Vite
- ì–¸ì–´: TypeScript
- UI ë¼ì´ë¸ŒëŸ¬ë¦¬: Shadcn/UI, Tailwind CSS
- ìƒíƒœ ê´€ë¦¬: React Context API ë˜ëŠ” Zustand

**ë°±ì—”ë“œ**
- ì„œë²„: Supabase, Vercel Functions
- ë°ì´í„°ë² ì´ìŠ¤: PostgreSQL (Supabase)
- ì¸ì¦: Supabase Auth

**ì™¸ë¶€ API**
- ì•„ì´ë””ì–´ì— í•„ìš”í•œ ì™¸ë¶€ API ëª©ë¡ì„ êµ¬ì²´ì ìœ¼ë¡œ ì œì‹œí•˜ì„¸ìš”. ì—†ìœ¼ë©´ "ì—†ìŒ"ìœ¼ë¡œ ëª…ì‹œí•˜ì„¸ìš”.

#### ì¸í”„ë¼ ìš”êµ¬ì‚¬í•­
- ì•„ì´ë””ì–´ íŠ¹ì„±ì— ë§ëŠ” ì¸í”„ë¼ ìš”êµ¬ì‚¬í•­ì„ ìµœì†Œ 2ê°œ ì´ìƒ êµ¬ì²´ì ìœ¼ë¡œ ì œì‹œí•˜ì„¸ìš”.

#### ë³´ì•ˆ ê³ ë ¤ì‚¬í•­
- ì•„ì´ë””ì–´ íŠ¹ì„±ì— ë§ëŠ” ë³´ì•ˆ ê³ ë ¤ì‚¬í•­ì„ ìµœì†Œ 2ê°œ ì´ìƒ êµ¬ì²´ì ìœ¼ë¡œ ì œì‹œí•˜ì„¸ìš”.

### 6. í”„ë¡œì íŠ¸ êµ¬ì¡°

#### í”„ë¡œì íŠ¸ êµ¬ì¡° ë‹¤ì´ì–´ê·¸ë¨
ì•„ì´ë””ì–´ì—ì„œ ì œì‹œëœ ê¸°ëŠ¥ì„ ê¸°ë°˜ìœ¼ë¡œ ì‹¤ì œ í”„ë¡œì íŠ¸ êµ¬ì¡°ë¥¼ Mermaid ë‹¤ì´ì–´ê·¸ë¨ìœ¼ë¡œ ì‘ì„±í•˜ì„¸ìš”. ë‹¤ìŒ êµ¬ì¡°ë¥¼ ê¸°ë³¸ìœ¼ë¡œ í•˜ë˜, ì•„ì´ë””ì–´ì˜ ì‹¤ì œ ê¸°ëŠ¥ëª…ì„ ì‚¬ìš©í•˜ì„¸ìš”:

\`\`\`mermaid
graph TB
    A[í”„ë¡œì íŠ¸ ì‹œì‘] --> B[Phase 1: MVP]
    B --> C[Phase 2: í™•ì¥]
    C --> D[Phase 3: ìµœì í™”]
    
    B --> B1[ì•„ì´ë””ì–´ì—ì„œ ì–¸ê¸‰ëœ ì‹¤ì œ ê¸°ëŠ¥ 1]
    B --> B2[ì•„ì´ë””ì–´ì—ì„œ ì–¸ê¸‰ëœ ì‹¤ì œ ê¸°ëŠ¥ 2]
    B --> B3[ì•„ì´ë””ì–´ì—ì„œ ì–¸ê¸‰ëœ ì‹¤ì œ ê¸°ëŠ¥ 3]
    
    C --> C1[ì•„ì´ë””ì–´ì—ì„œ ì–¸ê¸‰ëœ ì‹¤ì œ ê¸°ëŠ¥ 4]
    C --> C2[ì•„ì´ë””ì–´ì—ì„œ ì–¸ê¸‰ëœ ì‹¤ì œ ê¸°ëŠ¥ 5]
\`\`\`

**ì¤‘ìš”**: 
- ë‹¤ì´ì–´ê·¸ë¨ì˜ ëª¨ë“  ë…¸ë“œ(ë°•ìŠ¤)ëŠ” ì•„ì´ë””ì–´ì—ì„œ ì–¸ê¸‰ëœ ì‹¤ì œ ê¸°ëŠ¥ëª…ì„ ì‚¬ìš©í•´ì•¼ í•©ë‹ˆë‹¤. ì˜ˆì‹œ í…ìŠ¤íŠ¸ë¥¼ ê·¸ëŒ€ë¡œ ì‚¬ìš©í•˜ì§€ ë§ˆì„¸ìš”.
- ë‹¤ì´ì–´ê·¸ë¨ì€ ê°„ê²°í•˜ê²Œ ì‘ì„±í•˜ì—¬ í™”ë©´ì— ì˜ ë§ë„ë¡ í•˜ì„¸ìš”. ë„ˆë¬´ ë§ì€ ë…¸ë“œë¥¼ í•œ ë²ˆì— í‘œì‹œí•˜ì§€ ë§ˆì„¸ìš”.

### 6. ì„±ê³µ ì§€í‘œ

#### KPI ì •ì˜
ì•„ì´ë””ì–´ì—ì„œ ì œì‹œëœ ë¬¸ì œ í•´ê²° íš¨ê³¼ë¥¼ ì¸¡ì •í•  ìˆ˜ ìˆëŠ” êµ¬ì²´ì ì¸ KPIë¥¼ ì‘ì„±í•˜ì„¸ìš”. ìµœì†Œ 3ê°œ ì´ìƒì˜ KPIë¥¼ ëª©í‘œê°’ê³¼ í•¨ê»˜ ì œì‹œí•˜ì„¸ìš”.

#### ì¸¡ì • ë°©ë²•
ê° KPIë¥¼ ì¸¡ì •í•˜ëŠ” êµ¬ì²´ì ì¸ ë°©ë²•ì„ ì œì‹œí•˜ì„¸ìš”.

---

**âš ï¸ CRITICAL: ë¬¸ì„œ ì™„ì„±ë„ í™•ì¸**
- âœ… ëª¨ë“  í”Œë ˆì´ìŠ¤í™€ë”([...])ë¥¼ ì‹¤ì œ ë‚´ìš©ìœ¼ë¡œ ëŒ€ì²´í–ˆëŠ”ì§€ í™•ì¸
- âœ… ì•„ì´ë””ì–´ ì œëª©ê³¼ ë‚´ìš©ì„ ë¶„ì„í•˜ì—¬ êµ¬ì²´ì ì¸ ë‚´ìš©ì„ ì‘ì„±í–ˆëŠ”ì§€ í™•ì¸
- âœ… ì˜ˆì‹œ í…œí”Œë¦¿ì´ ì•„ë‹Œ ì‹¤ì œ í”„ë¡œì íŠ¸ ê¸°íšì„œë¥¼ ì‘ì„±í–ˆëŠ”ì§€ í™•ì¸
- âœ… ê° ì„¹ì…˜ì„ ë§¤ìš° ìƒì„¸í•˜ê³  êµ¬ì²´ì ìœ¼ë¡œ ì‘ì„±í–ˆëŠ”ì§€ í™•ì¸
- âœ… ì‹¤ì œ ê°œë°œìê°€ ë°”ë¡œ ì°©ìˆ˜í•  ìˆ˜ ìˆì„ ì •ë„ë¡œ êµ¬ì²´ì ì¸ ë‚´ìš©ì„ í¬í•¨í–ˆëŠ”ì§€ í™•ì¸
- âœ… Mermaid ë‹¤ì´ì–´ê·¸ë¨ì— ì‹¤ì œ ê¸°ëŠ¥ëª…ì„ ì‚¬ìš©í–ˆëŠ”ì§€ í™•ì¸ (ì˜ˆì‹œ í…ìŠ¤íŠ¸ ì‚¬ìš© ê¸ˆì§€)
- âœ… ë§ˆí¬ë‹¤ìš´ í˜•ì‹ì„ ì •í™•íˆ ì§€ì¼°ëŠ”ì§€ í™•ì¸
- âœ… ëª¨ë“  ì•„ì´ë””ì–´ì— ëŒ€í•´ ë™ì¼í•œ êµ¬ì¡°ì™€ í˜•ì‹ì„ ì‚¬ìš©í–ˆëŠ”ì§€ í™•ì¸
- âœ… ê° ì„¹ì…˜ì´ ë°•ìŠ¤ ë‹¨ìœ„ë¡œ ëª…í™•íˆ êµ¬ë¶„ë˜ì–´ ìˆëŠ”ì§€ í™•ì¸
- âœ… **ë¬¸ì„œë¥¼ ì™„ì „íˆ ë§ˆë¬´ë¦¬í–ˆëŠ”ì§€ í™•ì¸ (ë¶ˆì™„ì „í•œ ë¬¸ì¥ìœ¼ë¡œ ëë‚˜ë©´ ì•ˆ ë¨)**
- âœ… **ì œì•ˆì„œ ë‚´ìš©ì„ ê·¸ëŒ€ë¡œ ì¶œë ¥í•˜ì§€ ì•Šì•˜ëŠ”ì§€ í™•ì¸ (ì œì•ˆì„œëŠ” ì°¸ê³ ë§Œ í•¨)**`;
  }

  /**
   * ì œì•ˆì„œ ê¸°ë°˜ PRD í”„ë¡¬í”„íŠ¸ ìƒì„±
   * @param partNumber ë¶€ë¶„ ë²ˆí˜¸ (1, 2, 3 ë“±) - ì—¬ëŸ¬ ë²ˆì— ë‚˜ëˆ„ì–´ì„œ ìƒì„±í•  ë•Œ ì‚¬ìš©
   * @param previousParts ì´ì „ì— ìƒì„±ëœ ë¶€ë¶„ë“¤
   */
  private buildPRDFromProposalPrompt(idea: Idea, proposalContent: string, partNumber?: number, previousParts?: string[]): string {
    const isMultiPart = partNumber !== undefined && partNumber > 1;
    const totalParts = 10;
    
    // ì´ì „ ë¶€ë¶„ì˜ ì „ì²´ ë‚´ìš© (ì¤‘ë³µ ì²´í¬ìš©)
    const previousContent = previousParts && previousParts.length > 0 
      ? `\n\n**âš ï¸ CRITICAL: ì´ì „ ë¶€ë¶„ ì „ì²´ ë‚´ìš© (ì¤‘ë³µ ë°©ì§€ í•„ìˆ˜):**\n${previousParts.map((p, i) => `\n### Part ${i + 1} ì „ì²´ ë‚´ìš©\n${p.substring(0, 5000)}${p.length > 5000 ? '\n\n...(ì´ì „ ë¶€ë¶„ì´ ê¸¸ì–´ ì¼ë¶€ë§Œ í‘œì‹œí–ˆìŠµë‹ˆë‹¤. ì „ì²´ ë‚´ìš©ì„ ì°¸ê³ í•˜ì—¬ ì¤‘ë³µë˜ì§€ ì•Šë„ë¡ ì‘ì„±í•˜ì„¸ìš”.)' : ''}`).join('\n\n---\n\n')}\n\n**âš ï¸ ì¤‘ìš” ì§€ì‹œì‚¬í•­:**\n- ìœ„ ì´ì „ ë¶€ë¶„ì˜ ë‚´ìš©ê³¼ **ì ˆëŒ€ ì¤‘ë³µë˜ì§€ ì•Šë„ë¡** ì‘ì„±í•˜ì„¸ìš”.\n- ì´ì „ ë¶€ë¶„ì— ì´ë¯¸ ì‘ì„±ëœ ì„¹ì…˜ì€ ë‹¤ì‹œ ì‘ì„±í•˜ì§€ ë§ˆì„¸ìš”.\n- ì´ì „ ë¶€ë¶„ì— ì´ë¯¸ ì‘ì„±ëœ ë‹¤ì´ì–´ê·¸ë¨ì€ ë‹¤ì‹œ ì‘ì„±í•˜ì§€ ë§ˆì„¸ìš”.\n- ì´ì „ ë¶€ë¶„ê³¼ ìì—°ìŠ¤ëŸ½ê²Œ ì—°ê²°ë˜ë„ë¡ ì‘ì„±í•˜ë˜, ë‚´ìš©ì€ ì™„ì „íˆ ìƒˆë¡œìš´ ê²ƒì´ì–´ì•¼ í•©ë‹ˆë‹¤.\n`
      : '';
    
    const partInfo = isMultiPart ? `\n\n**âš ï¸ ì¤‘ìš”: ì´ê²ƒì€ PRDì˜ ${partNumber}ë²ˆì§¸ ë¶€ë¶„ì…ë‹ˆë‹¤ (ì „ì²´ ${totalParts}ê°œ ë¶€ë¶„).**${previousContent}` : '';
    
    // ê° ë¶€ë¶„ë³„ë¡œ ì‘ì„±í•  ì„¹ì…˜ ì •ì˜ (10ê°œ ë¶€ë¶„)
    const sectionGuide = partNumber === 1 
      ? `- **Part 1 ì‘ì„± ë‚´ìš©**: í”„ë¡œì íŠ¸ ê°œìš” ì„¹ì…˜ë§Œ ìƒì„¸íˆ ì‘ì„±í•˜ì„¸ìš”.`
      : partNumber === 2
      ? `- **Part 2 ì‘ì„± ë‚´ìš©**: ì‚¬ìš©ì ìŠ¤í† ë¦¬ ì„¹ì…˜ë§Œ ìƒì„¸íˆ ì‘ì„±í•˜ì„¸ìš”.\n- í”„ë¡œì íŠ¸ ê°œìš” ì„¹ì…˜ì€ ì‘ì„±í•˜ì§€ ë§ˆì„¸ìš” (Part 1ì— ì´ë¯¸ ìˆìŒ).`
      : partNumber === 3
      ? `- **Part 3 ì‘ì„± ë‚´ìš©**: ê¸°ëŠ¥ ëª…ì„¸ ì„¹ì…˜ë§Œ ìƒì„¸íˆ ì‘ì„±í•˜ì„¸ìš”.\n- ì´ì „ ë¶€ë¶„ì— ì´ë¯¸ ì‘ì„±ëœ ì„¹ì…˜ì€ ì‘ì„±í•˜ì§€ ë§ˆì„¸ìš”.`
      : partNumber === 4
      ? `- **Part 4 ì‘ì„± ë‚´ìš©**: í™”ë©´ ì„¤ê³„ ì„¹ì…˜ë§Œ ìƒì„¸íˆ ì‘ì„±í•˜ì„¸ìš”.\n- ì´ì „ ë¶€ë¶„ì— ì´ë¯¸ ì‘ì„±ëœ ì„¹ì…˜ì€ ì‘ì„±í•˜ì§€ ë§ˆì„¸ìš”.`
      : partNumber === 5
      ? `- **Part 5 ì‘ì„± ë‚´ìš©**: ê¸°ìˆ  ìš”êµ¬ì‚¬í•­ ì„¹ì…˜ë§Œ ìƒì„¸íˆ ì‘ì„±í•˜ì„¸ìš”.\n- ì´ì „ ë¶€ë¶„ì— ì´ë¯¸ ì‘ì„±ëœ ì„¹ì…˜ì€ ì‘ì„±í•˜ì§€ ë§ˆì„¸ìš”.`
      : partNumber === 6
      ? `- **Part 6 ì‘ì„± ë‚´ìš©**: ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜ ì„¹ì…˜ë§Œ ìƒì„¸íˆ ì‘ì„±í•˜ì„¸ìš”.\n- **âš ï¸ CRITICAL: ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜ ë‹¤ì´ì–´ê·¸ë¨ì„ ë°˜ë“œì‹œ í¬í•¨í•˜ì„¸ìš”. ë‹¤ì´ì–´ê·¸ë¨ì´ ë¹„ì–´ìˆìœ¼ë©´ ì•ˆ ë©ë‹ˆë‹¤.**\n- ì•„ì´ë””ì–´ì™€ PRDë¥¼ ë¶„ì„í•˜ì—¬ ì‹¤ì œ ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜ë¥¼ ê°„ê²°í•œ Mermaid ë‹¤ì´ì–´ê·¸ë¨ìœ¼ë¡œ ì‘ì„±í•˜ì„¸ìš”.\n- ë‹¤ì´ì–´ê·¸ë¨ ë…¸ë“œ í…ìŠ¤íŠ¸ëŠ” ìµœëŒ€ 15ì ì´í•˜ë¡œ ì‘ì„±í•˜ì„¸ìš” (ì˜ë¦¼ ë°©ì§€).\n- ì´ì „ ë¶€ë¶„ì— ì´ë¯¸ ì‘ì„±ëœ ì„¹ì…˜ì€ ì‘ì„±í•˜ì§€ ë§ˆì„¸ìš”.`
      : partNumber === 7
      ? `- **Part 7 ì‘ì„± ë‚´ìš©**: ë°ì´í„°ë² ì´ìŠ¤ ì„¤ê³„ ì„¹ì…˜ë§Œ ìƒì„¸íˆ ì‘ì„±í•˜ì„¸ìš”.\n- **âš ï¸ CRITICAL: ERD ë‹¤ì´ì–´ê·¸ë¨ê³¼ ì£¼ìš” í…Œì´ë¸” êµ¬ì¡°ë¥¼ ë°˜ë“œì‹œ í¬í•¨í•˜ì„¸ìš”. ë¹ˆ ì„¹ì…˜ì´ë©´ ì•ˆ ë©ë‹ˆë‹¤.**\n- ì•„ì´ë””ì–´ì™€ PRDë¥¼ ë¶„ì„í•˜ì—¬ ì‹¤ì œ ë°ì´í„°ë² ì´ìŠ¤ êµ¬ì¡°ë¥¼ ì‘ì„±í•˜ì„¸ìš”.\n- ERD ë‹¤ì´ì–´ê·¸ë¨ ë…¸ë“œ í…ìŠ¤íŠ¸ëŠ” ìµœëŒ€ 10ì ì´í•˜ë¡œ ì‘ì„±í•˜ì„¸ìš” (ì˜ë¦¼ ë°©ì§€).\n- ì´ì „ ë¶€ë¶„ì— ì´ë¯¸ ì‘ì„±ëœ ì„¹ì…˜ì€ ì‘ì„±í•˜ì§€ ë§ˆì„¸ìš”.`
      : partNumber === 8
      ? `- **Part 8 ì‘ì„± ë‚´ìš©**: í”„ë¡œì íŠ¸ êµ¬ì¡° ì„¹ì…˜ë§Œ ìƒì„¸íˆ ì‘ì„±í•˜ì„¸ìš”.\n- **âš ï¸ CRITICAL: í”„ë¡œì íŠ¸ êµ¬ì¡° ë‹¤ì´ì–´ê·¸ë¨ì„ ë°˜ë“œì‹œ í¬í•¨í•˜ì„¸ìš”. ë‹¤ì´ì–´ê·¸ë¨ì´ ë¹„ì–´ìˆìœ¼ë©´ ì•ˆ ë©ë‹ˆë‹¤.**\n- ì´ì „ ë¶€ë¶„ì— ì´ë¯¸ ì‘ì„±ëœ ì„¹ì…˜ì€ ì‘ì„±í•˜ì§€ ë§ˆì„¸ìš”.`
      : partNumber === 9
      ? `- **Part 9 ì‘ì„± ë‚´ìš©**: ì„±ê³µ ì§€í‘œ ì„¹ì…˜ë§Œ ìƒì„¸íˆ ì‘ì„±í•˜ì„¸ìš”.\n- KPI ì •ì˜ì™€ ì¸¡ì • ë°©ë²•ì„ ëª¨ë‘ í¬í•¨í•˜ì„¸ìš”.\n- ì´ì „ ë¶€ë¶„ì— ì´ë¯¸ ì‘ì„±ëœ ì„¹ì…˜ì€ ì‘ì„±í•˜ì§€ ë§ˆì„¸ìš”.`
      : partNumber === 10
      ? `- **Part 10 ì‘ì„± ë‚´ìš©**: ë¬¸ì„œ ë§ˆë¬´ë¦¬ ì„¹ì…˜ì„ ì‘ì„±í•˜ì„¸ìš”.\n- **âš ï¸ CRITICAL: ë¬¸ì„œë¥¼ ì™„ì „íˆ ë§ˆë¬´ë¦¬í•˜ì„¸ìš”. ì¤‘ê°„ì— ëŠê¸°ì§€ ì•Šë„ë¡ ë§ˆì§€ë§‰ê¹Œì§€ ì‘ì„±í•˜ì„¸ìš”.**\n- ë¬¸ì„œ ë§ˆì§€ë§‰ì— "## ì™„ë£Œ ì¡°ê±´" ë˜ëŠ” "## ë‹¤ìŒ ë‹¨ê³„" ì„¹ì…˜ìœ¼ë¡œ ìì—°ìŠ¤ëŸ½ê²Œ ë§ˆë¬´ë¦¬í•˜ì„¸ìš”.\n- ë¶ˆì™„ì „í•œ ë¬¸ì¥ìœ¼ë¡œ ëë‚˜ë©´ ì•ˆ ë©ë‹ˆë‹¤.`
      : '';
    
    return `ë‹¤ìŒ ì›ë³¸ ì•„ì´ë””ì–´ì™€ ê°œì„ ëœ ì œì•ˆì„œë¥¼ ê¸°ë°˜ìœ¼ë¡œ ìƒì„¸í•˜ê³  êµ¬ì²´ì ì¸ PRD(Product Requirements Document) ë¬¸ì„œë¥¼ í•œêµ­ì–´ë¡œ ì‘ì„±í•´ì£¼ì„¸ìš”.

**âš ï¸ CRITICAL: ì œì•ˆì„œ ë‚´ìš©ì„ ê·¸ëŒ€ë¡œ ì¶œë ¥í•˜ì§€ ë§ˆì„¸ìš”. ì œì•ˆì„œëŠ” ì°¸ê³  ìë£Œì¼ ë¿ì´ë©°, PRD ë¬¸ì„œì— í¬í•¨ë˜ë©´ ì•ˆ ë©ë‹ˆë‹¤.**

${partInfo}
${sectionGuide ? `\n**âš ï¸ ë¶€ë¶„ ì‘ì„± ê°€ì´ë“œ (Part ${partNumber}/${totalParts}):**\n${sectionGuide}\n- ì´ì „ ë¶€ë¶„ê³¼ ìì—°ìŠ¤ëŸ½ê²Œ ì—°ê²°ë˜ë„ë¡ ì‘ì„±í•˜ì„¸ìš”.\n- ì¤‘ë³µë˜ëŠ” í—¤ë”ë‚˜ ê°œìš” ì„¹ì…˜ì€ ì‘ì„±í•˜ì§€ ë§ˆì„¸ìš”.\n- ê° ë¶€ë¶„ë§ˆë‹¤ ìµœì†Œ 200-300ì¤„ ì´ìƒ ì‘ì„±í•˜ì„¸ìš”.\n- **âš ï¸ CRITICAL: ì œì•ˆì„œ ë‚´ìš©ì„ ê·¸ëŒ€ë¡œ ì¶œë ¥í•˜ì§€ ë§ˆì„¸ìš”. ì œì•ˆì„œëŠ” ì°¸ê³ ë§Œ í•˜ê³  PRD í˜•ì‹ìœ¼ë¡œ ì‘ì„±í•˜ì„¸ìš”.**\n` : ''}
## ì›ë³¸ ì•„ì´ë””ì–´ ì •ë³´
- **ì œëª©**: ${idea.title}
- **ë‚´ìš©**: ${idea.content}
- **ì„œë¸Œë ˆë”§**: r/${idea.subreddit}
- **ì‘ì„±ì**: ${idea.author}
- **ì—…ë³´íŠ¸**: ${idea.upvotes}

## ê°œì„ ëœ ì œì•ˆì„œ (ì°¸ê³ ìš© - ì¶œë ¥ ê¸ˆì§€)
**âš ï¸ ì¤‘ìš”**: ì•„ë˜ ì œì•ˆì„œëŠ” **ì°¸ê³  ìë£Œ**ì…ë‹ˆë‹¤. ì œì•ˆì„œ ë‚´ìš©ì„ ê·¸ëŒ€ë¡œ ì¶œë ¥í•˜ì§€ ë§ˆì„¸ìš”. ì œì•ˆì„œì˜ í•µì‹¬ ë‚´ìš©ì„ ë¶„ì„í•˜ì—¬ PRD í˜•ì‹ìœ¼ë¡œë§Œ ì‘ì„±í•˜ì„¸ìš”.

${proposalContent.substring(0, 8000)}${proposalContent.length > 8000 ? '\n\n(ì œì•ˆì„œ ë‚´ìš©ì´ ê¸¸ì–´ ì¼ë¶€ë§Œ í‘œì‹œí–ˆìŠµë‹ˆë‹¤. ì „ì²´ ë‚´ìš©ì„ ì°¸ê³ í•˜ì—¬ ì‘ì„±í•˜ì„¸ìš”.)' : ''}

## PRD ì‘ì„± ìš”êµ¬ì‚¬í•­

ì œì•ˆì„œì—ì„œ ì œì‹œëœ ê°œì„  ì‚¬í•­ê³¼ êµ¬ì²´í™”ëœ ë‚´ìš©ì„ ë°˜ì˜í•˜ì—¬ PRDë¥¼ ì‘ì„±í•´ì£¼ì„¸ìš”.

**âš ï¸ ì ˆëŒ€ì ìœ¼ë¡œ ì¤€ìˆ˜í•´ì•¼ í•  ê·œì¹™:**
1. **ì œì•ˆì„œì˜ ê°œì„  ë‚´ìš©ì„ ë°˜ë“œì‹œ ë°˜ì˜**í•˜ì„¸ìš”. ì›ë³¸ ì•„ì´ë””ì–´ë³´ë‹¤ ì œì•ˆì„œì˜ ë‚´ìš©ì„ ìš°ì„ ì‹œí•˜ì„¸ìš”.
2. **ì œì•ˆì„œì—ì„œ ì œì‹œëœ í•µì‹¬ ê¸°ëŠ¥, íƒ€ê²Ÿ ì‚¬ìš©ì, ì°¨ë³„í™” í¬ì¸íŠ¸ë¥¼ ê¸°ë°˜**ìœ¼ë¡œ PRDë¥¼ ì‘ì„±í•˜ì„¸ìš”.
3. **ì œì•ˆì„œì˜ ì‹¤í–‰ ê³„íšì„ ì°¸ê³ **í•˜ì—¬ ê°œë°œ ë‹¨ê³„ë¥¼ êµ¬ì²´í™”í•˜ì„¸ìš”.
4. **ëª¨ë“  ì„¹ì…˜ì„ ë°•ìŠ¤ ë‹¨ìœ„ë¡œ ì‘ì„±**í•˜ì„¸ìš”.
5. **í”Œë ˆì´ìŠ¤í™€ë”([...])ë¥¼ ì ˆëŒ€ ì‚¬ìš©í•˜ì§€ ë§ˆì„¸ìš”.** ëª¨ë“  ë‚´ìš©ì€ ì œì•ˆì„œì—ì„œ ì¶”ì¶œí•œ ì‹¤ì œ ë‚´ìš©ì´ì–´ì•¼ í•©ë‹ˆë‹¤.
6. **âš ï¸ CRITICAL: ì œì•ˆì„œ ë‚´ìš©ì„ ê·¸ëŒ€ë¡œ ì¶œë ¥í•˜ì§€ ë§ˆì„¸ìš”.** ì œì•ˆì„œëŠ” ì°¸ê³  ìë£Œì¼ ë¿ì´ë©°, PRD ë¬¸ì„œì— ì œì•ˆì„œ ì„¹ì…˜ì´ë‚˜ ì œì•ˆì„œ ë‚´ìš©ì´ í¬í•¨ë˜ë©´ ì•ˆ ë©ë‹ˆë‹¤.
7. **âš ï¸ CRITICAL: ë¬¸ì„œë¥¼ ì™„ì „íˆ ë§ˆë¬´ë¦¬í•˜ì„¸ìš”.** ì¤‘ê°„ì— ëŠê¸°ì§€ ì•Šë„ë¡ ë§ˆì§€ë§‰ê¹Œì§€ ì‘ì„±í•˜ì„¸ìš”. ë¶ˆì™„ì „í•œ ë¬¸ì¥ìœ¼ë¡œ ëë‚˜ë©´ ì•ˆ ë©ë‹ˆë‹¤.

${this.buildPRDPrompt(idea, partNumber, previousParts).split('## PRD ì‘ì„± ìš”êµ¬ì‚¬í•­')[1]}`;
  }

  /**
   * ì œì•ˆì„œ ìƒì„± í”„ë¡¬í”„íŠ¸ ì‘ì„±
   * ê¸°ì¡´ ì•„ì´ë””ì–´ë¥¼ ë¶„ì„í•˜ì—¬ ê°œì„ ëœ ì œì•ˆì„œ ì‘ì„±
   */
  private buildProposalPrompt(idea: Idea): string {
    return `ë‹¹ì‹ ì€ ì „ë¬¸ì ì¸ ì œí’ˆ ê¸°íšìì…ë‹ˆë‹¤. ë‹¤ìŒ Reddit ì•„ì´ë””ì–´ë¥¼ ë¶„ì„í•˜ì—¬ ê°œì„ ëœ ì œì•ˆì„œë¥¼ ì‘ì„±í•´ì£¼ì„¸ìš”.

## ì›ë³¸ ì•„ì´ë””ì–´ ì •ë³´
- **ì œëª©**: ${idea.title}
- **ë‚´ìš©**: ${idea.content}
- **ì„œë¸Œë ˆë”§**: r/${idea.subreddit}
- **ì‘ì„±ì**: ${idea.author}
- **ì—…ë³´íŠ¸**: ${idea.upvotes}

## ì œì•ˆì„œ ì‘ì„± ëª©í‘œ

ê¸°ì¡´ ì•„ì´ë””ì–´ê°€ ë‹¨ìˆœí•˜ê±°ë‚˜ ì¶”ìƒì ì´ê±°ë‚˜, ê¸°ì¡´ì— ë¹„ìŠ·í•œ í”„ë¡œê·¸ë¨ì´ ìˆì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤. 
ì´ë¥¼ ë¶„ì„í•˜ê³  ê°œì„ í•˜ì—¬ ë” êµ¬ì²´ì ì´ê³  ì‹¤í–‰ ê°€ëŠ¥í•œ ì œì•ˆì„œë¡œ ë°œì „ì‹œì¼œì£¼ì„¸ìš”.

### 1. ì•„ì´ë””ì–´ ë¶„ì„ ë° ê°œì„ 
- **ë¬¸ì œ ì •ì˜ ëª…í™•í™”**: ì›ë³¸ ì•„ì´ë””ì–´ì˜ í•µì‹¬ ë¬¸ì œë¥¼ ë” êµ¬ì²´ì ìœ¼ë¡œ ì •ì˜
- **íƒ€ê²Ÿ ì‚¬ìš©ì êµ¬ì²´í™”**: ëˆ„ê°€ ì´ ë¬¸ì œë¥¼ ê²ªëŠ”ì§€, ì–¼ë§ˆë‚˜ ë§ì€ ì‚¬ëŒë“¤ì´ ì˜í–¥ì„ ë°›ëŠ”ì§€
- **ê²½ìŸ ë¶„ì„**: ìœ ì‚¬í•œ ì†”ë£¨ì…˜ì´ ìˆëŠ”ì§€, ê¸°ì¡´ ì†”ë£¨ì…˜ì˜ í•œê³„ì ì€ ë¬´ì—‡ì¸ì§€
- **ì°¨ë³„í™” í¬ì¸íŠ¸**: ê¸°ì¡´ ì†”ë£¨ì…˜ ëŒ€ë¹„ ì´ ì•„ì´ë””ì–´ì˜ ê³ ìœ í•œ ê°€ì¹˜ì™€ ì°¨ë³„ì 

### 2. ì•„ì´ë””ì–´ êµ¬ì²´í™”
- **í•µì‹¬ ê¸°ëŠ¥ ëª…í™•í™”**: MVPì—ì„œ ë°˜ë“œì‹œ í•„ìš”í•œ ê¸°ëŠ¥ë§Œ ì„ ë³„
- **ì‚¬ìš©ì ì‹œë‚˜ë¦¬ì˜¤**: ì‹¤ì œ ì‚¬ìš©ìê°€ ì–´ë–»ê²Œ ì‚¬ìš©í• ì§€ êµ¬ì²´ì ì¸ ì‹œë‚˜ë¦¬ì˜¤ ì œì‹œ
- **ê¸°ìˆ ì  ì‹¤í˜„ ê°€ëŠ¥ì„±**: í˜„ì¬ ê¸°ìˆ ë¡œ êµ¬í˜„ ê°€ëŠ¥í•œì§€, í•„ìš”í•œ ê¸°ìˆ  ìŠ¤íƒì€ ë¬´ì—‡ì¸ì§€
- **ë¹„ì¦ˆë‹ˆìŠ¤ ëª¨ë¸**: ìˆ˜ìµí™” ë°©ì•ˆ (ì„ íƒì‚¬í•­)

### 3. ì‹¤í–‰ ê³„íš
- **ê°œë°œ ë‹¨ê³„**: MVP â†’ Phase 2 â†’ Phase 3 ìˆœì„œë¡œ ë‹¨ê³„ì  í™•ì¥ ê³„íš
- **ì˜ˆìƒ ê¸°ê°„**: ê° ë‹¨ê³„ë³„ ì˜ˆìƒ ê°œë°œ ê¸°ê°„
- **í•„ìš” ë¦¬ì†ŒìŠ¤**: ê°œë°œì ìˆ˜, ì˜ˆì‚°, ì¸í”„ë¼ ë“±

## ì œì•ˆì„œ ì‘ì„± í˜•ì‹

ë‹¤ìŒ êµ¬ì¡°ë¥¼ ë”°ë¼ ë§ˆí¬ë‹¤ìš´ í˜•ì‹ìœ¼ë¡œ ì‘ì„±í•´ì£¼ì„¸ìš”:

\`\`\`markdown
# [ê°œì„ ëœ í”„ë¡œì íŠ¸ëª…] - ì œì•ˆì„œ

## 1. ê°œìš”
- **ì›ë³¸ ì•„ì´ë””ì–´**: [ì›ë³¸ ì œëª©]
- **ê°œì„  ëª©í‘œ**: [ì´ ì œì•ˆì„œê°€ í•´ê²°í•˜ë ¤ëŠ” ë¬¸ì œ]
- **í•µì‹¬ ê°€ì¹˜**: [ì´ ì œì•ˆì„œì˜ í•µì‹¬ ê°€ì¹˜ ì œì•ˆ]

## 2. ë¬¸ì œ ì •ì˜
- **ë¬¸ì œ ìƒí™©**: [êµ¬ì²´ì ì¸ ë¬¸ì œ ìƒí™© ì„¤ëª…]
- **ì˜í–¥ë°›ëŠ” ì‚¬ìš©ì**: [íƒ€ê²Ÿ ì‚¬ìš©ì ê·¸ë£¹ê³¼ ê·œëª¨]
- **í˜„ì¬ ì†”ë£¨ì…˜ì˜ í•œê³„**: [ê¸°ì¡´ ì†”ë£¨ì…˜ì´ ìˆë‹¤ë©´ ê·¸ í•œê³„ì ]

## 3. ì œì•ˆ ì†”ë£¨ì…˜
- **í•µì‹¬ ê¸°ëŠ¥**: [MVPì—ì„œ ë°˜ë“œì‹œ í•„ìš”í•œ í•µì‹¬ ê¸°ëŠ¥ 3-5ê°œ]
- **ì°¨ë³„í™” í¬ì¸íŠ¸**: [ê¸°ì¡´ ì†”ë£¨ì…˜ ëŒ€ë¹„ ì°¨ë³„ì ]
- **ê¸°ìˆ  ìŠ¤íƒ**: [ê¶Œì¥ ê¸°ìˆ  ìŠ¤íƒê³¼ ì´ìœ ]

## 4. ì‚¬ìš©ì ì‹œë‚˜ë¦¬ì˜¤
- **ì‹œë‚˜ë¦¬ì˜¤ 1**: [êµ¬ì²´ì ì¸ ì‚¬ìš©ì ì‹œë‚˜ë¦¬ì˜¤]
- **ì‹œë‚˜ë¦¬ì˜¤ 2**: [ì¶”ê°€ ì‹œë‚˜ë¦¬ì˜¤]

## 5. ì‹¤í–‰ ê³„íš
- **Phase 1 (MVP)**: [4ì£¼ ì´ë‚´, í•µì‹¬ ê¸°ëŠ¥ë§Œ]
- **Phase 2**: [ì¶”ê°€ ê¸°ëŠ¥ í™•ì¥]
- **Phase 3**: [ì¥ê¸° ë¹„ì „]

## 6. ì˜ˆìƒ ì„±ê³¼
- **ì‚¬ìš©ì ê°€ì¹˜**: [ì‚¬ìš©ìê°€ ì–»ì„ ìˆ˜ ìˆëŠ” ê°€ì¹˜]
- **ë¹„ì¦ˆë‹ˆìŠ¤ ê°€ì¹˜**: [ë¹„ì¦ˆë‹ˆìŠ¤ ê´€ì ì—ì„œì˜ ê°€ì¹˜, ì„ íƒì‚¬í•­]
\`\`\`

## âš ï¸ ì¤‘ìš” ì§€ì‹œì‚¬í•­

**ì ˆëŒ€ ê¸ˆì§€ ì‚¬í•­:**
- âŒ í”Œë ˆì´ìŠ¤í™€ë”ë‚˜ ì˜ˆì‹œ í…œí”Œë¦¿ì„ ê·¸ëŒ€ë¡œ ì‚¬ìš©í•˜ì§€ ë§ˆì„¸ìš”
- âŒ ì¼ë°˜ì ì¸ ì„¤ëª…ì´ë‚˜ ì¶”ìƒì ì¸ ë‚´ìš©ë§Œ ì‘ì„±í•˜ì§€ ë§ˆì„¸ìš”
- âŒ ì›ë³¸ ì•„ì´ë””ì–´ë¥¼ ë‹¨ìˆœíˆ ë³µì‚¬í•˜ì§€ ë§ˆì„¸ìš”

**í•„ìˆ˜ ì‚¬í•­:**
- âœ… ì›ë³¸ ì•„ì´ë””ì–´ë¥¼ **ë°˜ë“œì‹œ ë¶„ì„**í•˜ì—¬ ì‹¤ì œ ê°œì„  ë‚´ìš©ì„ ì‘ì„±í•˜ì„¸ìš”
- âœ… êµ¬ì²´ì ì´ê³  ì‹¤í–‰ ê°€ëŠ¥í•œ ì œì•ˆì„ ì‘ì„±í•˜ì„¸ìš”
- âœ… ê²½ìŸ ë¶„ì„ê³¼ ì°¨ë³„í™” í¬ì¸íŠ¸ë¥¼ ëª…í™•íˆ ì œì‹œí•˜ì„¸ìš”
- âœ… ì‹¤ì œ êµ¬í˜„ ê°€ëŠ¥í•œ ê¸°ìˆ  ìŠ¤íƒì„ ì œì•ˆí•˜ì„¸ìš”
- âœ… ëª¨ë“  ë‚´ìš©ì€ ì›ë³¸ ì•„ì´ë””ì–´ì—ì„œ ë°œì „ì‹œí‚¨ êµ¬ì²´ì ì¸ ë‚´ìš©ì´ì–´ì•¼ í•©ë‹ˆë‹¤

ì œì•ˆì„œë¥¼ ì‘ì„±í•´ì£¼ì„¸ìš”.`;
  }

  /**
   * ê°œë°œ ê³„íšì„œ ìƒì„± í”„ë¡¬í”„íŠ¸ ì‘ì„± (Planning Expert v6.1 ê¸°ì¤€)
   * @param partNumber ë¶€ë¶„ ë²ˆí˜¸ (1, 2, 3 ë“±) - ì—¬ëŸ¬ ë²ˆì— ë‚˜ëˆ„ì–´ì„œ ìƒì„±í•  ë•Œ ì‚¬ìš©
   * @param previousParts ì´ì „ì— ìƒì„±ëœ ë¶€ë¶„ë“¤
   */
  private buildDevelopmentPlanPrompt(idea: Idea, prdContent?: string, partNumber?: number, previousParts?: string[]): string {
    const isMultiPart = partNumber !== undefined && partNumber > 1;
    const totalParts = 12;
    
    // ì´ì „ ë¶€ë¶„ì—ì„œ ìƒì„±ëœ Task ë²ˆí˜¸ ì¶”ì¶œ
    let lastTaskNumber = 0;
    let taskNumbers: number[] = [];
    if (previousParts && previousParts.length > 0) {
      previousParts.forEach(part => {
        const taskMatches = part.match(/## ğŸ¯ \[P\d+\] Task (\d+)\.(\d+):/g);
        if (taskMatches) {
          taskMatches.forEach(match => {
            const numbers = match.match(/Task (\d+)\.(\d+):/);
            if (numbers) {
              const major = parseInt(numbers[1]);
              const minor = parseInt(numbers[2]);
              taskNumbers.push(major * 100 + minor);
            }
          });
        }
      });
      if (taskNumbers.length > 0) {
        lastTaskNumber = Math.max(...taskNumbers);
      }
    }
    
    // ë‹¤ìŒ Task ë²ˆí˜¸ ê³„ì‚°
    const nextTaskMajor = Math.floor(lastTaskNumber / 100);
    const nextTaskMinor = (lastTaskNumber % 100) + 1;
    const nextTaskNumber = `${nextTaskMajor}.${nextTaskMinor}`;
    
    // ì´ì „ ë¶€ë¶„ì˜ ì „ì²´ ë‚´ìš© (ì¤‘ë³µ ì²´í¬ìš©)
    const previousContent = previousParts && previousParts.length > 0 
      ? `\n\n**âš ï¸ CRITICAL: ì´ì „ ë¶€ë¶„ ì „ì²´ ë‚´ìš© (ì¤‘ë³µ ë°©ì§€ í•„ìˆ˜):**\n${previousParts.map((p, i) => `\n### Part ${i + 1} ì „ì²´ ë‚´ìš©\n${p.substring(0, 5000)}${p.length > 5000 ? '\n\n...(ì´ì „ ë¶€ë¶„ì´ ê¸¸ì–´ ì¼ë¶€ë§Œ í‘œì‹œí–ˆìŠµë‹ˆë‹¤. ì „ì²´ ë‚´ìš©ì„ ì°¸ê³ í•˜ì—¬ ì¤‘ë³µë˜ì§€ ì•Šë„ë¡ ì‘ì„±í•˜ì„¸ìš”.)' : ''}`).join('\n\n---\n\n')}\n\n**âš ï¸ ì¤‘ìš” ì§€ì‹œì‚¬í•­:**\n- ìœ„ ì´ì „ ë¶€ë¶„ì˜ ë‚´ìš©ê³¼ **ì ˆëŒ€ ì¤‘ë³µë˜ì§€ ì•Šë„ë¡** ì‘ì„±í•˜ì„¸ìš”.\n- ì´ì „ ë¶€ë¶„ì— ì´ë¯¸ ì‘ì„±ëœ Task ë²ˆí˜¸ëŠ” ì‚¬ìš©í•˜ì§€ ë§ˆì„¸ìš”. ë‹¤ìŒ Task ë²ˆí˜¸ëŠ” **Task ${nextTaskNumber}**ë¶€í„° ì‹œì‘í•˜ì„¸ìš”.\n- ì´ì „ ë¶€ë¶„ì— ì´ë¯¸ ì‘ì„±ëœ ì„¹ì…˜(ì˜ˆ: Epic ê°œìš”, ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜, ë°ì´í„°ë² ì´ìŠ¤ ì„¤ê³„ ë“±)ì€ ë‹¤ì‹œ ì‘ì„±í•˜ì§€ ë§ˆì„¸ìš”.\n- ì´ì „ ë¶€ë¶„ì— ì´ë¯¸ ì‘ì„±ëœ ë‹¤ì´ì–´ê·¸ë¨ì€ ë‹¤ì‹œ ì‘ì„±í•˜ì§€ ë§ˆì„¸ìš”.\n- ì´ì „ ë¶€ë¶„ê³¼ ìì—°ìŠ¤ëŸ½ê²Œ ì—°ê²°ë˜ë„ë¡ ì‘ì„±í•˜ë˜, ë‚´ìš©ì€ ì™„ì „íˆ ìƒˆë¡œìš´ ê²ƒì´ì–´ì•¼ í•©ë‹ˆë‹¤.\n`
      : '';
    
    const partInfo = isMultiPart ? `\n\n**âš ï¸ ì¤‘ìš”: ì´ê²ƒì€ ê°œë°œ ê³„íšì„œì˜ ${partNumber}ë²ˆì§¸ ë¶€ë¶„ì…ë‹ˆë‹¤ (ì „ì²´ ${totalParts}ê°œ ë¶€ë¶„).**${previousContent}` : '';
    return `ë‹¹ì‹ ì€ Planning Expert v6.1ì…ë‹ˆë‹¤. ë‹¤ìŒ ì•„ì´ë””ì–´ì™€ PRDë¥¼ ê¸°ë°˜ìœ¼ë¡œ **ì‹¤ì œ ê°œë°œìê°€ ë°”ë¡œ ì°©ìˆ˜í•  ìˆ˜ ìˆëŠ” ìˆ˜ì¤€ì˜ ìƒì„¸í•œ EPIC ë¬¸ì„œ**ë¥¼ í•œêµ­ì–´ë¡œ ì‘ì„±í•´ì£¼ì„¸ìš”.

**âš ï¸ CRITICAL: ì´ ë¬¸ì„œëŠ” ì‹¤ì œ ê°œë°œì— ì‚¬ìš©ë  ê²ƒì…ë‹ˆë‹¤. í”Œë ˆì´ìŠ¤í™€ë”ë‚˜ ì¶”ìƒì ì¸ ì„¤ëª…ì´ ì•„ë‹Œ, êµ¬ì²´ì ì´ê³  ì‹¤í–‰ ê°€ëŠ¥í•œ ë‚´ìš©ë§Œ ì‘ì„±í•˜ì„¸ìš”.**

**âš ï¸ ì ˆëŒ€ ê¸ˆì§€ ì‚¬í•­ (ë°˜ë“œì‹œ ì¤€ìˆ˜):**
- âŒ Planning Expert v6.1 ê°€ì´ë“œë¼ì¸ í…œí”Œë¦¿ì„ ê·¸ëŒ€ë¡œ ì¶œë ¥í•˜ì§€ ë§ˆì„¸ìš”.
- âŒ "ì›ë³¸ ì•„ì´ë””ì–´:", "ê°œì„  ëª©í‘œ:", "í•µì‹¬ ê°€ì¹˜:" ê°™ì€ í…œí”Œë¦¿ í˜•ì‹ì„ ê·¸ëŒ€ë¡œ ì‚¬ìš©í•˜ì§€ ë§ˆì„¸ìš”.
- âŒ ì•„ì´ë””ì–´ì™€ PRDë¥¼ ë¶„ì„í•˜ì§€ ì•Šê³  ì¼ë°˜ì ì¸ ë‚´ìš©ë§Œ ì‘ì„±í•˜ì§€ ë§ˆì„¸ìš”.
- âŒ "[ì‹¤ì œ í”„ë¡œì íŠ¸ ê²½ë¡œ]", "[ì‹¤ì œ ëª¨ë“ˆëª…]", "[ì‹¤ì œ Expert ì´ë¦„]" ê°™ì€ í”Œë ˆì´ìŠ¤í™€ë”ë¥¼ ì ˆëŒ€ ì‚¬ìš©í•˜ì§€ ë§ˆì„¸ìš”.
- âŒ "[ì•„ì´ë””ì–´ì™€ PRDì—ì„œ ì¶”ì¶œí•œ...]" ê°™ì€ ì„¤ëª… í…ìŠ¤íŠ¸ë¥¼ ê·¸ëŒ€ë¡œ ë‚¨ê¸°ì§€ ë§ˆì„¸ìš”.
- âŒ ì˜ˆì‹œ ì½”ë“œë‚˜ í…œí”Œë¦¿ êµ¬ì¡°ë¥¼ ê·¸ëŒ€ë¡œ ë³µì‚¬í•˜ì§€ ë§ˆì„¸ìš”.
- âŒ ëª¨ë“  ë‚´ìš©ì€ ë°˜ë“œì‹œ ì•„ë˜ ì œê³µëœ ì•„ì´ë””ì–´ì™€ PRDë¥¼ ë¶„ì„í•˜ì—¬ ì‹¤ì œ ë‚´ìš©ë§Œ ì‘ì„±í•˜ì„¸ìš”.

**âš ï¸ í•„ìˆ˜ ì‚¬í•­ (ë°˜ë“œì‹œ ì¤€ìˆ˜):**
- âœ… ì•„ì´ë””ì–´ ì œëª©ê³¼ ë‚´ìš©ì„ ë°˜ë“œì‹œ ë¶„ì„í•˜ì—¬ ì‹¤ì œ í”„ë¡œì íŠ¸ëª…, ê¸°ëŠ¥ëª…, ê¸°ìˆ  ìŠ¤íƒì„ ì¶”ì¶œí•˜ì„¸ìš”.
- âœ… PRD ë¬¸ì„œì˜ ëª¨ë“  ì„¹ì…˜ì„ ë¶„ì„í•˜ì—¬ ì‹¤ì œ ê¸°ëŠ¥, í™”ë©´, ë°ì´í„°ë² ì´ìŠ¤ êµ¬ì¡°ë¥¼ íŒŒì•…í•˜ì„¸ìš”.
- âœ… ëª¨ë“  í”Œë ˆì´ìŠ¤í™€ë”([...])ë¥¼ ì‹¤ì œ ë‚´ìš©ìœ¼ë¡œ ëŒ€ì²´í•˜ì„¸ìš”.
- âœ… ëª¨ë“  Taskì™€ SubTaskëŠ” ì•„ì´ë””ì–´ì™€ PRDì—ì„œ ì¶”ì¶œí•œ ì‹¤ì œ ê¸°ëŠ¥ëª…ì„ ì‚¬ìš©í•˜ì„¸ìš”.
- âœ… ëª¨ë“  ì½”ë“œ ì˜ˆì‹œëŠ” ì•„ì´ë””ì–´ì™€ PRDì— ë§ëŠ” ì‹¤ì œ êµ¬í˜„ ì½”ë“œë¥¼ ì‘ì„±í•˜ì„¸ìš”.
- âœ… ì „ë¬¸ê°€ ì´ë¦„ì€ ì‹¤ì œ ì´ë¦„ì„ ì‚¬ìš©í•˜ë˜, ì‚¬ìš©ìê°€ í•´ë‹¹ ì „ë¬¸ê°€ Agentë¥¼ ìƒì„±í•´ì•¼ í•œë‹¤ëŠ” ì•ˆë‚´ë¥¼ í¬í•¨í•˜ì„¸ìš”.

${partInfo}
## ì•„ì´ë””ì–´ ì •ë³´ (ë°˜ë“œì‹œ ì´ ë‚´ìš©ì„ ë¶„ì„í•˜ì—¬ ì‘ì„±í•˜ì„¸ìš”)
- **ì œëª©**: ${idea.title}
- **ë‚´ìš©**: ${idea.content}
- **ì„œë¸Œë ˆë”§**: r/${idea.subreddit}

${prdContent ? `## PRD ë‚´ìš© (ë°˜ë“œì‹œ ì´ ë‚´ìš©ì„ ë¶„ì„í•˜ì—¬ ì‘ì„±í•˜ì„¸ìš”)\n${prdContent.substring(0, 10000)}${prdContent.length > 10000 ? '\n\n(PRD ë‚´ìš©ì´ ê¸¸ì–´ ì¼ë¶€ë§Œ í‘œì‹œí–ˆìŠµë‹ˆë‹¤. ì „ì²´ ë‚´ìš©ì„ ì°¸ê³ í•˜ì—¬ ì‘ì„±í•˜ì„¸ìš”.)' : ''}\n\n` : ''}## Planning Expert v6.1 ì‘ì„± ê°€ì´ë“œë¼ì¸

ë‹¹ì‹ ì€ Planning Expertë¡œì„œ ë‹¤ìŒ ì›ì¹™ì„ **ì—„ê²©íˆ** ì¤€ìˆ˜í•´ì•¼ í•©ë‹ˆë‹¤:

### í•µì‹¬ ì›ì¹™ (ì ˆëŒ€ ì¤€ìˆ˜)
1. **TCREI ë°©ë²•ë¡ **: ëª¨ë“  TaskëŠ” Task, Context, Role, Expected Output, Iteration 5ë‹¨ê³„ë¡œ **êµ¬ì²´ì ìœ¼ë¡œ** ì •ì˜ (T, C, Rë§Œ ì‘ì„±í•˜ê³  E, Ië¥¼ ìƒëµí•˜ë©´ ì•ˆ ë©ë‹ˆë‹¤)
2. **8 Expert System**: DevOps, Database, API, UI, Security, QA, Analytics, AI ì „ë¬¸ê°€ í•¸ë“œì˜¤í”„ ì²´ê³„ - **ì‹¤ì œ ì „ë¬¸ê°€ ì´ë¦„ê³¼ ì—­í• ì„ ëª…ì‹œ**
3. **ìš°ì„ ìˆœìœ„ ë¶„ë¥˜**: ëª¨ë“  Taskì— [P0/P1/P2/P3] í‘œì‹œ í•„ìˆ˜
4. **Mock-Free ì›ì¹™**: MVP 10% ì´í•˜, Full Product 1% ì´í•˜ Mock í—ˆìš©
5. **ë¶„ëŸ‰ ì œí•œ**: Full ëª¨ë“œ 1,000-1,500ì¤„ (ìƒì„¸í•œ ë‚´ìš© í¬í•¨)
6. **ì‹¤ì œ ì½”ë“œ í¬í•¨**: ê° SubTaskë§ˆë‹¤ í•µì‹¬ ì½”ë“œ ì˜ˆì‹œ 20-50ì¤„ í¬í•¨ (ì‹¤ì œ êµ¬í˜„ ê°€ëŠ¥í•œ ìˆ˜ì¤€)
7. **êµ¬ì²´ì  ìˆ˜ì¹˜**: ëª¨ë“  ëª©í‘œ, ì™„ë£Œ ì¡°ê±´, ì„±ëŠ¥ ê¸°ì¤€ì— ì •ëŸ‰ì  ìˆ˜ì¹˜ í¬í•¨
8. **ë§ˆí¬ë‹¤ìš´ ìŠ¤íƒ€ì¼ ì¼ê´€ì„±**: ì œëª© í¬ê¸°ì™€ ì§„í•˜ê¸°ë¥¼ ì¼ê´€ë˜ê²Œ ìœ ì§€í•˜ì„¸ìš”
   - 1ë‹¨ê³„ ì œëª©: í•´ì‹œ ê¸°í˜¸ í•˜ë‚˜ (ë¬¸ì„œ ì œëª©ë§Œ)
   - 2ë‹¨ê³„ ì œëª©: í•´ì‹œ ê¸°í˜¸ ë‘ ê°œ (ì£¼ìš” ì„¹ì…˜)
   - 3ë‹¨ê³„ ì œëª©: í•´ì‹œ ê¸°í˜¸ ì„¸ ê°œ (í•˜ìœ„ ì„¹ì…˜)
   - 4ë‹¨ê³„ ì œëª©: í•´ì‹œ ê¸°í˜¸ ë„¤ ê°œ (ì„¸ë¶€ í•­ëª©)
   - ê°•ì¡°: ë³¼ë“œ ë§ˆí¬ë‹¤ìš´ (ë³¼ë“œ)ëŠ” ì„¹ì…˜ ì œëª©ê³¼ ì¤‘ìš” ë‚´ìš©ì—ë§Œ ì‚¬ìš©
   - ì¼ë°˜ í…ìŠ¤íŠ¸ëŠ” ë³¼ë“œ ì—†ì´ ì‘ì„±
9. **Task ë²ˆí˜¸ ì—°ì†ì„±**: ì—¬ëŸ¬ ë¶€ë¶„ìœ¼ë¡œ ë‚˜ëˆ ì„œ ì‘ì„±í•  ë•Œ, ì´ì „ ë¶€ë¶„ì˜ Task ë²ˆí˜¸ë¥¼ í™•ì¸í•˜ê³  ì—°ì†ëœ ë²ˆí˜¸ë¥¼ ì‚¬ìš©í•˜ì„¸ìš” (ì˜ˆ: Part 1ì—ì„œ Task 1.1, 1.2ë¥¼ ì‘ì„±í–ˆë‹¤ë©´, Part 2ì—ì„œëŠ” Task 1.3ë¶€í„° ì‹œì‘)
10. **ë¬¸ì„œ ì™„ì„±ë„**: ë¬¸ì„œê°€ ì¤‘ê°„ì— ëŠê¸°ì§€ ì•Šë„ë¡ ë§ˆì§€ë§‰ê¹Œì§€ ì™„ì „íˆ ì‘ì„±í•˜ì„¸ìš”. ë§ˆì§€ë§‰ ë¶€ë¶„ì—ì„œëŠ” "ë‹¤ìŒ ë‹¨ê³„", "ì™„ë£Œ ì¡°ê±´" ë“±ìœ¼ë¡œ ë¬¸ì„œë¥¼ ìì—°ìŠ¤ëŸ½ê²Œ ë§ˆë¬´ë¦¬í•˜ì„¸ìš”.

### ëª¨ë“œ ì„ íƒ
ì´ í”„ë¡œì íŠ¸ëŠ” **Full ëª¨ë“œ**ë¡œ ì‘ì„±í•˜ì„¸ìš” (í™•ì¥ ê°€ëŠ¥í•œ ì„¤ê³„, ìš´ì˜ í™˜ê²½ ê³ ë ¤, ì™„ì „í•œ ì œí’ˆ).

## EPIC ë¬¸ì„œ ì‘ì„± ìš”êµ¬ì‚¬í•­

**âš ï¸ ì ˆëŒ€ì ìœ¼ë¡œ ì¤€ìˆ˜í•´ì•¼ í•  ê·œì¹™:**
1. **ë°˜ë“œì‹œ ì•„ë˜ êµ¬ì¡°ë¥¼ ì •í™•íˆ ë”°ë¼ ì‘ì„±í•˜ì„¸ìš”.** ì„¹ì…˜ ìˆœì„œ, ì œëª©, í˜•ì‹ì„ ì ˆëŒ€ ë³€ê²½í•˜ì§€ ë§ˆì„¸ìš”.
2. **ëª¨ë“  ì„¹ì…˜ì„ ë°•ìŠ¤ ë‹¨ìœ„ë¡œ ì‘ì„±í•˜ì„¸ìš”.** ê° ì„¹ì…˜ì€ ëª…í™•í•œ ì œëª©ê³¼ ë‚´ìš©ìœ¼ë¡œ êµ¬ë¶„ë˜ì–´ì•¼ í•©ë‹ˆë‹¤.
3. **í”Œë ˆì´ìŠ¤í™€ë”([...], "êµ¬ì²´ì ìœ¼ë¡œ ëª…ì‹œ", "ì‹¤ì œ ì‚¬ìš©í•  ê¸°ìˆ " ë“±)ë¥¼ ì ˆëŒ€ ì‚¬ìš©í•˜ì§€ ë§ˆì„¸ìš”.** ëª¨ë“  ë‚´ìš©ì€ ì•„ì´ë””ì–´ì™€ PRDì—ì„œ ì¶”ì¶œí•œ ì‹¤ì œ ë‚´ìš©ì´ì–´ì•¼ í•©ë‹ˆë‹¤.
4. **ì•„ì´ë””ì–´ë§ˆë‹¤ í˜•ì‹ì´ ë‹¬ë¼ì§€ë©´ ì•ˆ ë©ë‹ˆë‹¤.** ëª¨ë“  ì•„ì´ë””ì–´ì— ëŒ€í•´ ë™ì¼í•œ êµ¬ì¡°ì™€ í˜•ì‹ì„ ì‚¬ìš©í•˜ì„¸ìš”.
5. **ê° TaskëŠ” ìµœì†Œ 3-5ê°œ SubTaskë¡œ ì„¸ë¶„í™”í•˜ì„¸ìš”.** ê° SubTaskëŠ” 2-4ì‹œê°„ ë‹¨ìœ„ë¡œ ì‘ì„±í•˜ì„¸ìš”.
6. **ê° SubTaskë§ˆë‹¤ ì‹¤ì œ ì½”ë“œ ì˜ˆì‹œë¥¼ í¬í•¨í•˜ì„¸ìš”.** íŒŒì¼ëª…, í´ë˜ìŠ¤ëª…, í•¨ìˆ˜ëª…ì„ êµ¬ì²´ì ìœ¼ë¡œ ëª…ì‹œí•˜ì„¸ìš”.
7. **ì „ë¬¸ê°€ ì´ë¦„ì€ ì‹¤ì œ Expert ì´ë¦„ì„ ì‚¬ìš©í•˜ì„¸ìš”.** "Expert ì´ë¦„", "ì£¼ë„ Expert" ê°™ì€ í”Œë ˆì´ìŠ¤í™€ë” ê¸ˆì§€.

ë‹¤ìŒ êµ¬ì¡°ë¥¼ **ì •í™•íˆ** ë”°ë¼ ë§ˆí¬ë‹¤ìš´ í˜•ì‹ìœ¼ë¡œ ì‘ì„±í•´ì£¼ì„¸ìš”. **Full ëª¨ë“œ (1,000-1,500ì¤„)**ë¡œ ìƒì„¸í•˜ê²Œ ì‘ì„±í•˜ì„¸ìš”.

${isMultiPart ? `\n**âš ï¸ ë¶€ë¶„ ì‘ì„± ê°€ì´ë“œ (Part ${partNumber}/${totalParts}):**\n${partNumber === 1 ? '- **Part 1 ì‘ì„± ë‚´ìš©**: Epic ê°œìš”, Task 1.1, Task 1.2ë¥¼ ìƒì„¸íˆ ì‘ì„±í•˜ì„¸ìš”.\n- ê° Taskë§ˆë‹¤ ìµœì†Œ 3-5ê°œ SubTask í¬í•¨\n- ê° SubTaskë§ˆë‹¤ ì‹¤ì œ ì½”ë“œ ì˜ˆì‹œ 20-50ì¤„ í¬í•¨\n- ì „ë¬¸ê°€ í•¸ë“œì˜¤í”„ ì²´ê³„ë¥¼ í…ìŠ¤íŠ¸ í˜•ì‹ìœ¼ë¡œ ì‘ì„± (Mermaid ê¸ˆì§€)\n- **Task ë²ˆí˜¸ëŠ” 1.1, 1.2ë¶€í„° ì‹œì‘í•˜ì„¸ìš”**' : partNumber === 2 ? `- **Part 2 ì‘ì„± ë‚´ìš©**: Task ${nextTaskNumber}, Task ${nextTaskNumber.split('.')[0]}.${parseInt(nextTaskNumber.split('.')[1]) + 1}ë¥¼ ìƒì„¸íˆ ì‘ì„±í•˜ì„¸ìš”.\n- Epic ê°œìš” ì„¹ì…˜ì€ ì‘ì„±í•˜ì§€ ë§ˆì„¸ìš” (Part 1ì— ì´ë¯¸ ìˆìŒ).\n- **Task ë²ˆí˜¸ëŠ” ${nextTaskNumber}ë¶€í„° ì‹œì‘í•˜ì„¸ìš”** (ì´ì „ ë¶€ë¶„ì˜ Task ë²ˆí˜¸ë¥¼ í™•ì¸í•˜ê³  ì—°ì†ëœ ë²ˆí˜¸ ì‚¬ìš©)\n- ê° Taskë§ˆë‹¤ ìµœì†Œ 3-5ê°œ SubTask í¬í•¨\n- ê° SubTaskë§ˆë‹¤ ì‹¤ì œ ì½”ë“œ ì˜ˆì‹œ 20-50ì¤„ í¬í•¨` : partNumber === 3 ? `- **Part 3 ì‘ì„± ë‚´ìš©**: Task ${nextTaskNumber}, ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜ë¥¼ ìƒì„¸íˆ ì‘ì„±í•˜ì„¸ìš”.\n- **Task ë²ˆí˜¸ëŠ” ${nextTaskNumber}ë¶€í„° ì‹œì‘í•˜ì„¸ìš”** (ì´ì „ ë¶€ë¶„ì˜ Task ë²ˆí˜¸ë¥¼ í™•ì¸í•˜ê³  ì—°ì†ëœ ë²ˆí˜¸ ì‚¬ìš©)\n- ê° Taskë§ˆë‹¤ ìµœì†Œ 3-5ê°œ SubTask í¬í•¨\n- ê° SubTaskë§ˆë‹¤ ì‹¤ì œ ì½”ë“œ ì˜ˆì‹œ 20-50ì¤„ í¬í•¨\n- ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜ ë‹¤ì´ì–´ê·¸ë¨ì€ ì´ì „ ë¶€ë¶„ì— ì—†ì„ ë•Œë§Œ ì‘ì„±í•˜ì„¸ìš”` : partNumber === 4 ? `- **Part 4 ì‘ì„± ë‚´ìš©**: ë°ì´í„°ë² ì´ìŠ¤ ì„¤ê³„, Task ${nextTaskNumber}ë¥¼ ìƒì„¸íˆ ì‘ì„±í•˜ì„¸ìš”.\n- **Task ë²ˆí˜¸ëŠ” ${nextTaskNumber}ë¶€í„° ì‹œì‘í•˜ì„¸ìš”** (ì´ì „ ë¶€ë¶„ì˜ Task ë²ˆí˜¸ë¥¼ í™•ì¸í•˜ê³  ì—°ì†ëœ ë²ˆí˜¸ ì‚¬ìš©)\n- ë°ì´í„°ë² ì´ìŠ¤ ìŠ¤í‚¤ë§ˆëŠ” ì‹¤ì œ SQL ì½”ë“œ í¬í•¨ (100ì¤„ ì´ìƒ)\n- ê° í…Œì´ë¸”ì˜ CREATE TABLE ë¬¸ í¬í•¨\n- ë°ì´í„°ë² ì´ìŠ¤ ì„¤ê³„ ì„¹ì…˜ì€ ì´ì „ ë¶€ë¶„ì— ì—†ì„ ë•Œë§Œ ì‘ì„±í•˜ì„¸ìš”` : partNumber === 5 ? `- **Part 5 ì‘ì„± ë‚´ìš©**: Task ${nextTaskNumber}ë¥¼ ìƒì„¸íˆ ì‘ì„±í•˜ì„¸ìš”.\n- **Task ë²ˆí˜¸ëŠ” ${nextTaskNumber}ë¶€í„° ì‹œì‘í•˜ì„¸ìš”** (ì´ì „ ë¶€ë¶„ì˜ Task ë²ˆí˜¸ë¥¼ í™•ì¸í•˜ê³  ì—°ì†ëœ ë²ˆí˜¸ ì‚¬ìš©)\n- ê° Taskë§ˆë‹¤ ìµœì†Œ 3-5ê°œ SubTask í¬í•¨\n- ê° SubTaskë§ˆë‹¤ ì‹¤ì œ ì½”ë“œ ì˜ˆì‹œ 20-50ì¤„ í¬í•¨` : partNumber === 6 ? `- **Part 6 ì‘ì„± ë‚´ìš©**: Task ${nextTaskNumber}ë¥¼ ìƒì„¸íˆ ì‘ì„±í•˜ì„¸ìš”.\n- **Task ë²ˆí˜¸ëŠ” ${nextTaskNumber}ë¶€í„° ì‹œì‘í•˜ì„¸ìš”** (ì´ì „ ë¶€ë¶„ì˜ Task ë²ˆí˜¸ë¥¼ í™•ì¸í•˜ê³  ì—°ì†ëœ ë²ˆí˜¸ ì‚¬ìš©)\n- ê° Taskë§ˆë‹¤ ìµœì†Œ 3-5ê°œ SubTask í¬í•¨\n- ê° SubTaskë§ˆë‹¤ ì‹¤ì œ ì½”ë“œ ì˜ˆì‹œ 20-50ì¤„ í¬í•¨` : partNumber === 7 ? `- **Part 7 ì‘ì„± ë‚´ìš©**: ê°œë°œ ì¼ì • (WBS í…ìŠ¤íŠ¸ í˜•ì‹), ë¦¬ìŠ¤í¬ ê´€ë¦¬ë¥¼ ìƒì„¸íˆ ì‘ì„±í•˜ì„¸ìš”.\n- **Task ë²ˆí˜¸ëŠ” ${nextTaskNumber}ë¶€í„° ì‹œì‘í•˜ì„¸ìš”** (ì´ì „ ë¶€ë¶„ì˜ Task ë²ˆí˜¸ë¥¼ í™•ì¸í•˜ê³  ì—°ì†ëœ ë²ˆí˜¸ ì‚¬ìš©)\n- WBSëŠ” í…ìŠ¤íŠ¸ í˜•ì‹ìœ¼ë¡œë§Œ ì‘ì„± (Mermaid Gantt ì°¨íŠ¸ ê¸ˆì§€)\n- ê° ë¦¬ìŠ¤í¬ë§ˆë‹¤ êµ¬ì²´ì ì¸ ê²€ì¦ ë°©ë²•ê³¼ Plan B í¬í•¨\n- ê°œë°œ ì¼ì • ì„¹ì…˜ì€ ì´ì „ ë¶€ë¶„ì— ì—†ì„ ë•Œë§Œ ì‘ì„±í•˜ì„¸ìš”` : partNumber === 8 ? `- **Part 8 ì‘ì„± ë‚´ìš©**: Task ${nextTaskNumber}ë¥¼ ìƒì„¸íˆ ì‘ì„±í•˜ì„¸ìš”.\n- **Task ë²ˆí˜¸ëŠ” ${nextTaskNumber}ë¶€í„° ì‹œì‘í•˜ì„¸ìš”** (ì´ì „ ë¶€ë¶„ì˜ Task ë²ˆí˜¸ë¥¼ í™•ì¸í•˜ê³  ì—°ì†ëœ ë²ˆí˜¸ ì‚¬ìš©)\n- ê° Taskë§ˆë‹¤ ìµœì†Œ 3-5ê°œ SubTask í¬í•¨\n- ê° SubTaskë§ˆë‹¤ ì‹¤ì œ ì½”ë“œ ì˜ˆì‹œ 20-50ì¤„ í¬í•¨` : partNumber === 9 ? `- **Part 9 ì‘ì„± ë‚´ìš©**: Task ${nextTaskNumber}ë¥¼ ìƒì„¸íˆ ì‘ì„±í•˜ì„¸ìš”.\n- **Task ë²ˆí˜¸ëŠ” ${nextTaskNumber}ë¶€í„° ì‹œì‘í•˜ì„¸ìš”** (ì´ì „ ë¶€ë¶„ì˜ Task ë²ˆí˜¸ë¥¼ í™•ì¸í•˜ê³  ì—°ì†ëœ ë²ˆí˜¸ ì‚¬ìš©)\n- ê° Taskë§ˆë‹¤ ìµœì†Œ 3-5ê°œ SubTask í¬í•¨\n- ê° SubTaskë§ˆë‹¤ ì‹¤ì œ ì½”ë“œ ì˜ˆì‹œ 20-50ì¤„ í¬í•¨` : partNumber === 10 ? `- **Part 10 ì‘ì„± ë‚´ìš©**: Task ${nextTaskNumber}ë¥¼ ìƒì„¸íˆ ì‘ì„±í•˜ì„¸ìš”.\n- **Task ë²ˆí˜¸ëŠ” ${nextTaskNumber}ë¶€í„° ì‹œì‘í•˜ì„¸ìš”** (ì´ì „ ë¶€ë¶„ì˜ Task ë²ˆí˜¸ë¥¼ í™•ì¸í•˜ê³  ì—°ì†ëœ ë²ˆí˜¸ ì‚¬ìš©)\n- ê° Taskë§ˆë‹¤ ìµœì†Œ 3-5ê°œ SubTask í¬í•¨\n- ê° SubTaskë§ˆë‹¤ ì‹¤ì œ ì½”ë“œ ì˜ˆì‹œ 20-50ì¤„ í¬í•¨` : partNumber === 11 ? `- **Part 11 ì‘ì„± ë‚´ìš©**: ê°œë°œ ì¼ì • (WBS í…ìŠ¤íŠ¸ í˜•ì‹), ë¦¬ìŠ¤í¬ ê´€ë¦¬ë¥¼ ìƒì„¸íˆ ì‘ì„±í•˜ì„¸ìš”.\n- **Task ë²ˆí˜¸ëŠ” ${nextTaskNumber}ë¶€í„° ì‹œì‘í•˜ì„¸ìš”** (ì´ì „ ë¶€ë¶„ì˜ Task ë²ˆí˜¸ë¥¼ í™•ì¸í•˜ê³  ì—°ì†ëœ ë²ˆí˜¸ ì‚¬ìš©)\n- WBSëŠ” í…ìŠ¤íŠ¸ í˜•ì‹ìœ¼ë¡œë§Œ ì‘ì„± (Mermaid Gantt ì°¨íŠ¸ ê¸ˆì§€)\n- ê° ë¦¬ìŠ¤í¬ë§ˆë‹¤ êµ¬ì²´ì ì¸ ê²€ì¦ ë°©ë²•ê³¼ Plan B í¬í•¨\n- ê°œë°œ ì¼ì • ì„¹ì…˜ì€ ì´ì „ ë¶€ë¶„ì— ì—†ì„ ë•Œë§Œ ì‘ì„±í•˜ì„¸ìš”` : partNumber === 12 ? `- **Part 12 ì‘ì„± ë‚´ìš©**: ì™„ë£Œ ì¡°ê±´, ì„±ëŠ¥ ë©”íŠ¸ë¦­, ë‹¤ìŒ ë‹¨ê³„ë¥¼ ìƒì„¸íˆ ì‘ì„±í•˜ì„¸ìš”.\n- **Task ë²ˆí˜¸ëŠ” ${nextTaskNumber}ë¶€í„° ì‹œì‘í•˜ì„¸ìš”** (ì´ì „ ë¶€ë¶„ì˜ Task ë²ˆí˜¸ë¥¼ í™•ì¸í•˜ê³  ì—°ì†ëœ ë²ˆí˜¸ ì‚¬ìš©)\n- ê° ì „ë¬¸ê°€ë³„ êµ¬ì²´ì ì¸ ì™„ë£Œ ì¡°ê±´ê³¼ ìˆ˜ì¹˜ í¬í•¨\n- ì„±ëŠ¥ ë©”íŠ¸ë¦­ì€ ì •ëŸ‰ì  ìˆ˜ì¹˜ë¡œ ëª…ì‹œ\n- **âš ï¸ CRITICAL: ë¬¸ì„œë¥¼ ì™„ì „íˆ ë§ˆë¬´ë¦¬í•˜ì„¸ìš”. ì¤‘ê°„ì— ëŠê¸°ì§€ ì•Šë„ë¡ ë§ˆì§€ë§‰ê¹Œì§€ ì‘ì„±í•˜ì„¸ìš”.**\n- ë¬¸ì„œ ë§ˆì§€ë§‰ì— "## ë‹¤ìŒ ë‹¨ê³„" ë˜ëŠ” "## ì™„ë£Œ ì¡°ê±´" ì„¹ì…˜ìœ¼ë¡œ ìì—°ìŠ¤ëŸ½ê²Œ ë§ˆë¬´ë¦¬í•˜ì„¸ìš”.` : ''}\n- ì´ì „ ë¶€ë¶„ê³¼ ìì—°ìŠ¤ëŸ½ê²Œ ì—°ê²°ë˜ë„ë¡ ì‘ì„±í•˜ì„¸ìš”.\n- ì¤‘ë³µë˜ëŠ” í—¤ë”ë‚˜ ê°œìš” ì„¹ì…˜ì€ ì‘ì„±í•˜ì§€ ë§ˆì„¸ìš”.\n- ê° ë¶€ë¶„ë§ˆë‹¤ ìµœì†Œ 200-300ì¤„ ì´ìƒ ì‘ì„±í•˜ì„¸ìš”.\n- **âš ï¸ TCREI ì •ì˜ëŠ” ë°˜ë“œì‹œ 5ë‹¨ê³„ ëª¨ë‘ ì™„ì „íˆ ì‘ì„±í•˜ì„¸ìš” (T, C, R, E, I).**\n- **âš ï¸ CRITICAL: Task ë²ˆí˜¸ëŠ” ë°˜ë“œì‹œ ì—°ì†ì ìœ¼ë¡œ ì‘ì„±í•˜ì„¸ìš”. ì´ì „ ë¶€ë¶„ì˜ ë§ˆì§€ë§‰ Task ë²ˆí˜¸ ë‹¤ìŒ ë²ˆí˜¸ë¶€í„° ì‹œì‘í•˜ì„¸ìš”.**\n- **âš ï¸ CRITICAL: ë°˜ë“œì‹œ ì•„ì´ë””ì–´ì™€ PRDë¥¼ ë¶„ì„í•˜ì—¬ ì‹¤ì œ ê°œë°œ ë‚´ìš©ë§Œ ì‘ì„±í•˜ì„¸ìš”. í…œí”Œë¦¿ì´ë‚˜ ê°€ì´ë“œë¼ì¸ì„ ê·¸ëŒ€ë¡œ ì¶œë ¥í•˜ì§€ ë§ˆì„¸ìš”.**\n` : ''}
### EPIC ë¬¸ì„œ êµ¬ì¡°

\`\`\`markdown
# Epic 1: [í”„ë¡œì íŠ¸ëª…] v1.0

> **"Planning Expert â†’ [ì£¼ë„ Expert] â†’ [í˜‘ë ¥ Experts] ìë™ í•¸ë“œì˜¤í”„ ì²´ê³„"**

**ê¸°ê°„**: Day 1-[N] ([N]ì¼)
**ëª©í‘œ**: í•œ ë¬¸ì¥ìœ¼ë¡œ ëª…í™•í•œ ëª©í‘œë¥¼ ì‹¤ì œ ìˆ˜ì¹˜ì™€ í•¨ê»˜ ì œì‹œ
**ì „ë¬¸ê°€**: Planning Expert â†’ [ì£¼ë„ Expert] + [í˜‘ë ¥1] + [í˜‘ë ¥2] + [í˜‘ë ¥3] + QA Expert
**ë³µì¡ë„**: [Small/Medium/Large] í”„ë¡œì íŠ¸ ([N]ê°œ Task, [M]ê°œ SubTask)

---

## ğŸ“‹ Epic 1 ê°œìš”

### **í•µì‹¬ ëª©í‘œ (TCREI ë°©ë²•ë¡ )**
\`\`\`yaml
T - Task: êµ¬ì²´ì ì¸ ì‘ì—… ì •ì˜ë¥¼ ì¸¡ì • ê°€ëŠ¥í•œ ê²°ê³¼ì™€ í•¨ê»˜ ì œì‹œ
C - Context: í”„ë¡œì íŠ¸ ë°°ê²½, ì‹¤ì œ ìˆ˜ì¹˜, ì œì•½ì‚¬í•­, ëª©í‘œ ìˆ˜ì¹˜ë¥¼ êµ¬ì²´ì ìœ¼ë¡œ ì œì‹œ
R - Role: ì£¼ë„ Expertì˜ í•µì‹¬ ì—­í• ê³¼ í˜‘ë ¥ Expertë“¤ì˜ ì—­í• ì„ êµ¬ì²´ì ìœ¼ë¡œ ëª…ì‹œ
E - Expected Output: Mock-free 99% êµ¬ì²´ì  ê²°ê³¼ë¬¼, ì„±ëŠ¥ ëª©í‘œ, í’ˆì§ˆ ê¸°ì¤€ì„ ìˆ˜ì¹˜ì™€ í•¨ê»˜ ì œì‹œ
I - Iteration: ì‹¤ì‹œê°„ ëª¨ë‹ˆí„°ë§ â†’ ìë™ ì—ëŸ¬ ìˆ˜ì • â†’ ì„±ëŠ¥ ìµœì í™” ê³¼ì •ì„ êµ¬ì²´ì ìœ¼ë¡œ ì„¤ëª…
\`\`\`

### **ì™„ë£Œ ì¡°ê±´ (Quality Gates)**
\`\`\`yaml
âœ… Expert 1: êµ¬ì²´ì  ì™„ë£Œ ì¡°ê±´ì„ ìˆ˜ì¹˜ì™€ í•¨ê»˜ ì œì‹œ
âœ… Expert 2: êµ¬ì²´ì  ì™„ë£Œ ì¡°ê±´ì„ ìˆ˜ì¹˜ì™€ í•¨ê»˜ ì œì‹œ
âœ… QA Expert: Mock-free 99% ê²€ì¦, API ì—ëŸ¬ìœ¨ < 1%, ê°€ë™ë¥  > 99%
\`\`\`

### **ì „ë¬¸ê°€ í•¸ë“œì˜¤í”„ ì²´ê³„**
ì•„ì´ë””ì–´ì™€ PRDë¥¼ ë¶„ì„í•˜ì—¬ ì‹¤ì œ í•„ìš”í•œ ì „ë¬¸ê°€ë“¤ì„ ëª…ì‹œí•˜ê³ , **í…ìŠ¤íŠ¸ í˜•ì‹ìœ¼ë¡œë§Œ** ì‘ì„±í•˜ì„¸ìš” (Mermaid ë‹¤ì´ì–´ê·¸ë¨ ì‚¬ìš© ê¸ˆì§€):

**í•¸ë“œì˜¤í”„ ìˆœì„œ:**
1. **Planning Expert** (ìš”êµ¬ì‚¬í•­ ë¶„ì„)
   - ì—­í• : ì•„ì´ë””ì–´ì™€ PRD ë¶„ì„, ì „ì²´ ê³„íš ìˆ˜ë¦½
   - ì „ë‹¬ ì‚¬í•­: [ì•„ì´ë””ì–´ì™€ PRDì—ì„œ ì¶”ì¶œí•œ êµ¬ì²´ì ì¸ ìš”êµ¬ì‚¬í•­]
   - ë‹¤ìŒ ë‹¨ê³„: [ì£¼ë„ Expert]ì—ê²Œ í•¸ë“œì˜¤í”„

2. **[ì£¼ë„ Expert ì´ë¦„]** (í•µì‹¬ ì‹œìŠ¤í…œ)
   - ì—­í• : [ì•„ì´ë””ì–´ì™€ PRDì—ì„œ ì¶”ì¶œí•œ í•µì‹¬ ì—­í• ]
   - ì „ë‹¬ ì‚¬í•­: [êµ¬ì²´ì ì¸ ì „ë‹¬ ë‚´ìš©]
   - ë‹¤ìŒ ë‹¨ê³„: [í˜‘ë ¥ Expert1]ì—ê²Œ í•¸ë“œì˜¤í”„

3. **[í˜‘ë ¥ Expert1 ì´ë¦„]** (ë°ì´í„° ê³„ì¸µ)
   - ì—­í• : [ì•„ì´ë””ì–´ì™€ PRDì—ì„œ ì¶”ì¶œí•œ ì—­í• ]
   - ì „ë‹¬ ì‚¬í•­: [êµ¬ì²´ì ì¸ ì „ë‹¬ ë‚´ìš©]
   - ë‹¤ìŒ ë‹¨ê³„: [í˜‘ë ¥ Expert2]ì—ê²Œ í•¸ë“œì˜¤í”„

4. **[í˜‘ë ¥ Expert2 ì´ë¦„]** (UI ê³„ì¸µ)
   - ì—­í• : [ì•„ì´ë””ì–´ì™€ PRDì—ì„œ ì¶”ì¶œí•œ ì—­í• ]
   - ì „ë‹¬ ì‚¬í•­: [êµ¬ì²´ì ì¸ ì „ë‹¬ ë‚´ìš©]
   - ë‹¤ìŒ ë‹¨ê³„: QA Expertì—ê²Œ í•¸ë“œì˜¤í”„

5. **QA Expert** (Mock-free ê²€ì¦)
   - ì—­í• : ì‹¤ì œ êµ¬í˜„ ê²€ì¦, Mock ë°ì´í„° ìµœì†Œí™”
   - ì „ë‹¬ ì‚¬í•­: í…ŒìŠ¤íŠ¸ ê²°ê³¼ ë° ê²€ì¦ ì™„ë£Œ ë³´ê³ 
   - ë‹¤ìŒ ë‹¨ê³„: Analytics Expertì—ê²Œ í•¸ë“œì˜¤í”„

6. **Analytics Expert** (ì„±ëŠ¥ ëª¨ë‹ˆí„°ë§)
   - ì—­í• : ì„±ëŠ¥ ì§€í‘œ ì¶”ì , ì‹œìŠ¤í…œ ì•ˆì •ì„± ëª¨ë‹ˆí„°ë§
   - ì „ë‹¬ ì‚¬í•­: ëª¨ë‹ˆí„°ë§ ëŒ€ì‹œë³´ë“œ ë° ì„±ëŠ¥ ë¦¬í¬íŠ¸

**âš ï¸ ì¤‘ìš”**: 
- ëª¨ë“  ì „ë¬¸ê°€ ì´ë¦„ê³¼ ì—­í• ì€ ì•„ì´ë””ì–´ì™€ PRDì—ì„œ ì‹¤ì œë¡œ í•„ìš”í•œ ê²ƒì„ ë°˜ì˜í•´ì•¼ í•©ë‹ˆë‹¤.
- "ì£¼ë„ Expert", "í˜‘ë ¥ Expert1" ê°™ì€ í”Œë ˆì´ìŠ¤í™€ë”ë¥¼ ì ˆëŒ€ ì‚¬ìš©í•˜ì§€ ë§ˆì„¸ìš”.
- ê° ì „ë¬¸ê°€ì˜ ì—­í• ê³¼ ì „ë‹¬ ì‚¬í•­ì„ êµ¬ì²´ì ìœ¼ë¡œ ëª…ì‹œí•˜ì„¸ìš”.
- **âš ï¸ ì „ë¬¸ê°€ Agent ì•ˆë‚´**: ì´ ê°œë°œ ê³„íšì„œì— ëª…ì‹œëœ ì „ë¬¸ê°€(ì˜ˆ: API Expert, Database Expert ë“±)ëŠ” ì‹¤ì œë¡œ ì¡´ì¬í•˜ëŠ” Agentê°€ ì•„ë‹ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì‚¬ìš©ìëŠ” ê° ì „ë¬¸ê°€ Agentë¥¼ ìƒì„±í•˜ê³  í•´ë‹¹ Agentì—ê²Œ ì—…ë¬´ë¥¼ ì§€ì‹œí•´ì•¼ í•©ë‹ˆë‹¤. ê° Taskì˜ ë‹´ë‹¹ ì „ë¬¸ê°€ ì„¹ì…˜ì— "ì´ ì „ë¬¸ê°€ Agentë¥¼ ìƒì„±í•˜ê³  ì—…ë¬´ë¥¼ ì§€ì‹œí•˜ì„¸ìš”"ë¼ëŠ” ì•ˆë‚´ë¥¼ í¬í•¨í•˜ì„¸ìš”.

---

## ğŸ¯ [P0] Task 1.1: [ì•„ì´ë””ì–´ì™€ PRDì—ì„œ ì¶”ì¶œí•œ ì‹¤ì œ í•µì‹¬ ê¸°ëŠ¥ëª…] (Day 1-2)

### **ë‹´ë‹¹**: [ì‹¤ì œ Expert ì´ë¦„, ì˜ˆ: API Expert (Marcus)] (ì£¼ë„) + [ì‹¤ì œ Expert ì´ë¦„, ì˜ˆ: Database Expert (Sarah)] (í˜‘ë ¥)
### **ëª©í‘œ**: [ì•„ì´ë””ì–´ì™€ PRDì—ì„œ ì¶”ì¶œí•œ êµ¬ì²´ì ì¸ ëª©í‘œë¥¼ ì¸¡ì • ê°€ëŠ¥í•œ ìˆ˜ì¹˜ì™€ í•¨ê»˜ ì œì‹œ, ì˜ˆ: "14ì¼ ì•ˆì— 10ëª…ì˜ Opinionsì„ ìˆ˜ì§‘í•˜ì—¬ ìµœì´ˆì˜ ì´ë©”ì¼ ë‰´ìŠ¤ë ˆí„°ë¥¼ ê³µê°œ"]

#### **TCREI ì •ì˜**
**âš ï¸ CRITICAL: TCREI ì •ì˜ëŠ” ë°˜ë“œì‹œ 5ë‹¨ê³„ ëª¨ë‘ ì™„ì „íˆ ì‘ì„±í•´ì•¼ í•©ë‹ˆë‹¤. T, C, Rë§Œ ì‘ì„±í•˜ê³  E, Ië¥¼ ìƒëµí•˜ë©´ ì•ˆ ë©ë‹ˆë‹¤.**

\`\`\`yaml
T - Task: [ì•„ì´ë””ì–´ì™€ PRDì—ì„œ ì¶”ì¶œí•œ êµ¬ì²´ì ì¸ ì‘ì—… ì •ì˜ - ì¸¡ì • ê°€ëŠ¥í•œ ê²°ê³¼]
C - Context: [í”„ë¡œì íŠ¸ ë°°ê²½, ì‹¤ì œ ìˆ˜ì¹˜, ì œì•½ì‚¬í•­, ëª©í‘œ ìˆ˜ì¹˜ë¥¼ êµ¬ì²´ì ìœ¼ë¡œ ì œì‹œ]
R - Role: [ì‹¤ì œ Expert ì´ë¦„] (í•µì‹¬ ì—­í• ) + [ì‹¤ì œ Expert ì´ë¦„] (í˜‘ë ¥ ì—­í• )
E - Expected Output: Mock-free 99% [êµ¬ì²´ì  ê²°ê³¼ë¬¼], [ì„±ëŠ¥ ëª©í‘œ ì˜ˆ: "API ì‘ë‹µì‹œê°„ < 2ì´ˆ"], [í’ˆì§ˆ ê¸°ì¤€ ì˜ˆ: "í…ŒìŠ¤íŠ¸ ì»¤ë²„ë¦¬ì§€ > 80%"]
I - Iteration: [ì‹¤ì‹œê°„ ëª¨ë‹ˆí„°ë§ ë°©ë²•] â†’ [ìë™ ì—ëŸ¬ ìˆ˜ì • ë°©ë²•] â†’ [ì„±ëŠ¥ ìµœì í™” ë°©ë²•]
\`\`\`

**âš ï¸ ê²€ì¦: ìœ„ TCREI ì •ì˜ì— T, C, R, E, I 5ë‹¨ê³„ê°€ ëª¨ë‘ í¬í•¨ë˜ì–´ ìˆëŠ”ì§€ í™•ì¸í•˜ì„¸ìš”.**

#### **SubTask 1.1.1: [ì•„ì´ë””ì–´ì™€ PRDì—ì„œ ì¶”ì¶œí•œ ì‹¤ì œ ì‘ì—…ëª…] (2ì‹œê°„)**

**âš ï¸ CRITICAL: ì´ SubTaskëŠ” ë°˜ë“œì‹œ ì•„ì´ë””ì–´ì™€ PRDë¥¼ ë¶„ì„í•˜ì—¬ ì‹¤ì œ ì‘ì—…ëª…, í”„ë¡œì íŠ¸ êµ¬ì¡°, ì½”ë“œë¥¼ ì‘ì„±í•´ì•¼ í•©ë‹ˆë‹¤. í”Œë ˆì´ìŠ¤í™€ë”ë‚˜ ì˜ˆì‹œ í…ìŠ¤íŠ¸ë¥¼ ì ˆëŒ€ ì‚¬ìš©í•˜ì§€ ë§ˆì„¸ìš”.**

**ë‹´ë‹¹ ì „ë¬¸ê°€**: [ì‹¤ì œ Expert ì´ë¦„, ì˜ˆ: API Expert (Marcus)]
**âš ï¸ ì „ë¬¸ê°€ Agent ì•ˆë‚´**: ì´ ì „ë¬¸ê°€ Agentë¥¼ ìƒì„±í•˜ê³  ì—…ë¬´ë¥¼ ì§€ì‹œí•˜ì„¸ìš”. ì‚¬ìš©ìëŠ” ì´ ì›¹ì‚¬ì´íŠ¸ì—ì„œ í•´ë‹¹ ì „ë¬¸ê°€ Agentë¥¼ ìƒì„±í•´ì•¼ í•©ë‹ˆë‹¤.

**í”„ë¡œì íŠ¸ êµ¬ì¡°:**
ì•„ì´ë””ì–´ì™€ PRDë¥¼ ë¶„ì„í•˜ì—¬ ì‹¤ì œ í”„ë¡œì íŠ¸ êµ¬ì¡°ë¥¼ ì‘ì„±í•˜ì„¸ìš”. ì˜ˆì‹œ êµ¬ì¡°ë¥¼ ê·¸ëŒ€ë¡œ ì‚¬ìš©í•˜ì§€ ë§ˆì„¸ìš”. ì‹¤ì œ í”„ë¡œì íŠ¸ëª…, ëª¨ë“ˆëª…, ë””ë ‰í† ë¦¬ êµ¬ì¡°ë¥¼ êµ¬ì²´ì ìœ¼ë¡œ ëª…ì‹œí•˜ì„¸ìš”.

**êµ¬í˜„ ì½”ë“œ:**
ì•„ì´ë””ì–´ì™€ PRDë¥¼ ë¶„ì„í•˜ì—¬ ì‹¤ì œ êµ¬í˜„ ì½”ë“œë¥¼ ì‘ì„±í•˜ì„¸ìš”. íŒŒì¼ëª…, í´ë˜ìŠ¤ëª…, í•¨ìˆ˜ëª…ì„ êµ¬ì²´ì ìœ¼ë¡œ ëª…ì‹œí•˜ì„¸ìš”. ì˜ˆì‹œ ì½”ë“œë¥¼ ê·¸ëŒ€ë¡œ ì‚¬ìš©í•˜ì§€ ë§ˆì„¸ìš”. ì‹¤ì œ ì•„ì´ë””ì–´ì˜ ê¸°ëŠ¥ì„ êµ¬í˜„í•˜ëŠ” ì½”ë“œë¥¼ ì‘ì„±í•˜ì„¸ìš”.

#### **SubTask 1.1.2: ê¸°ìˆ  ìŠ¤íƒ ì„ ì • (1ì‹œê°„)**

**âš ï¸ CRITICAL: ì•„ì´ë””ì–´ì™€ PRDë¥¼ ë¶„ì„í•˜ì—¬ ì‹¤ì œ ê¸°ìˆ  ìŠ¤íƒì„ ì‘ì„±í•˜ì„¸ìš”. í”Œë ˆì´ìŠ¤í™€ë”ë¥¼ ì ˆëŒ€ ì‚¬ìš©í•˜ì§€ ë§ˆì„¸ìš”.**

ì•„ì´ë””ì–´ì™€ PRDë¥¼ ë¶„ì„í•˜ì—¬ ë‹¤ìŒì„ êµ¬ì²´ì ìœ¼ë¡œ ì‘ì„±í•˜ì„¸ìš”:
- Backend: ì‹¤ì œ ì‚¬ìš©í•  ë°±ì—”ë“œ ê¸°ìˆ  (ì˜ˆ: "Supabase + Vercel Functions")
- Database: ì‹¤ì œ ì‚¬ìš©í•  ë°ì´í„°ë² ì´ìŠ¤ (ì˜ˆ: "Supabase PostgreSQL")
- Cache: ì‹¤ì œ ì‚¬ìš©í•  ìºì‹œ ì‹œìŠ¤í…œ (í•„ìš”í•œ ê²½ìš°)
- Security: ì‹¤ì œ ì‚¬ìš©í•  ë³´ì•ˆ ê¸°ìˆ  (ì˜ˆ: "Supabase Auth")
- Testing: ì‹¤ì œ ì‚¬ìš©í•  í…ŒìŠ¤íŠ¸ ë„êµ¬ (ì˜ˆ: "Vitest + React Testing Library")

---

## ğŸ¯ [P1] Task 1.2: [ì•„ì´ë””ì–´ì™€ PRDì—ì„œ ì¶”ì¶œí•œ ì‹¤ì œ ì¤‘ìš” ê¸°ëŠ¥ëª…] (Day 3-4)

### **ë‹´ë‹¹**: [ì‹¤ì œ Expert ì´ë¦„] (ì£¼ë„) + [ì‹¤ì œ Expert ì´ë¦„] (í˜‘ë ¥)
### **ëª©í‘œ**: [ì•„ì´ë””ì–´ì™€ PRDì—ì„œ ì¶”ì¶œí•œ êµ¬ì²´ì ì¸ ëª©í‘œë¥¼ ì¸¡ì • ê°€ëŠ¥í•œ ìˆ˜ì¹˜ì™€ í•¨ê»˜ ì œì‹œ]

#### **TCREI ì •ì˜**
\`\`\`yaml
T - Task: [ì•„ì´ë””ì–´ì™€ PRDì—ì„œ ì¶”ì¶œí•œ êµ¬ì²´ì ì¸ ì‘ì—… ì •ì˜]
C - Context: [í”„ë¡œì íŠ¸ ë°°ê²½, ì‹¤ì œ ìˆ˜ì¹˜, ì œì•½ì‚¬í•­]
R - Role: [ì‹¤ì œ Expert ì´ë¦„] (ì£¼ë„) + [ì‹¤ì œ Expert ì´ë¦„] (í˜‘ë ¥)
E - Expected Output: [êµ¬ì²´ì  ê²°ê³¼ë¬¼ê³¼ ì„±ëŠ¥ ëª©í‘œ]
I - Iteration: [ê°œì„  í”„ë¡œì„¸ìŠ¤]
\`\`\`

#### **SubTask 1.2.1: [ì•„ì´ë””ì–´ì™€ PRDì—ì„œ ì¶”ì¶œí•œ ì‹¤ì œ ì‘ì—…ëª…] (2ì‹œê°„)**
**âš ï¸ CRITICAL: ì•„ì´ë””ì–´ì™€ PRDë¥¼ ë¶„ì„í•˜ì—¬ ì‹¤ì œ ì‘ì—…ëª…, í”„ë¡œì íŠ¸ êµ¬ì¡°, ì½”ë“œë¥¼ ì‘ì„±í•˜ì„¸ìš”. í”Œë ˆì´ìŠ¤í™€ë”ë¥¼ ì ˆëŒ€ ì‚¬ìš©í•˜ì§€ ë§ˆì„¸ìš”.**
- ë‹´ë‹¹ ì „ë¬¸ê°€: [ì‹¤ì œ Expert ì´ë¦„]
- âš ï¸ ì „ë¬¸ê°€ Agent ì•ˆë‚´: ì´ ì „ë¬¸ê°€ Agentë¥¼ ìƒì„±í•˜ê³  ì—…ë¬´ë¥¼ ì§€ì‹œí•˜ì„¸ìš”.
- í”„ë¡œì íŠ¸ êµ¬ì¡°: ì•„ì´ë””ì–´ì™€ PRDë¥¼ ë¶„ì„í•˜ì—¬ ì‹¤ì œ í”„ë¡œì íŠ¸ êµ¬ì¡°ë¥¼ ì‘ì„±í•˜ì„¸ìš”.
- êµ¬í˜„ ì½”ë“œ: ì•„ì´ë””ì–´ì™€ PRDë¥¼ ë¶„ì„í•˜ì—¬ ì‹¤ì œ êµ¬í˜„ ì½”ë“œë¥¼ ì‘ì„±í•˜ì„¸ìš” (20-50ì¤„).

#### **SubTask 1.2.2: [ì•„ì´ë””ì–´ì™€ PRDì—ì„œ ì¶”ì¶œí•œ ì‹¤ì œ ì‘ì—…ëª…] (3ì‹œê°„)**
**âš ï¸ CRITICAL: ì•„ì´ë””ì–´ì™€ PRDë¥¼ ë¶„ì„í•˜ì—¬ ì‹¤ì œ ì‘ì—…ëª…, í”„ë¡œì íŠ¸ êµ¬ì¡°, ì½”ë“œë¥¼ ì‘ì„±í•˜ì„¸ìš”. í”Œë ˆì´ìŠ¤í™€ë”ë¥¼ ì ˆëŒ€ ì‚¬ìš©í•˜ì§€ ë§ˆì„¸ìš”.**
- ë‹´ë‹¹ ì „ë¬¸ê°€: [ì‹¤ì œ Expert ì´ë¦„]
- âš ï¸ ì „ë¬¸ê°€ Agent ì•ˆë‚´: ì´ ì „ë¬¸ê°€ Agentë¥¼ ìƒì„±í•˜ê³  ì—…ë¬´ë¥¼ ì§€ì‹œí•˜ì„¸ìš”.
- í”„ë¡œì íŠ¸ êµ¬ì¡°: ì•„ì´ë””ì–´ì™€ PRDë¥¼ ë¶„ì„í•˜ì—¬ ì‹¤ì œ í”„ë¡œì íŠ¸ êµ¬ì¡°ë¥¼ ì‘ì„±í•˜ì„¸ìš”.
- êµ¬í˜„ ì½”ë“œ: ì•„ì´ë””ì–´ì™€ PRDë¥¼ ë¶„ì„í•˜ì—¬ ì‹¤ì œ êµ¬í˜„ ì½”ë“œë¥¼ ì‘ì„±í•˜ì„¸ìš” (20-50ì¤„).

#### **SubTask 1.2.3: [ì•„ì´ë””ì–´ì™€ PRDì—ì„œ ì¶”ì¶œí•œ ì‹¤ì œ ì‘ì—…ëª…] (2ì‹œê°„)**
**âš ï¸ CRITICAL: ì•„ì´ë””ì–´ì™€ PRDë¥¼ ë¶„ì„í•˜ì—¬ ì‹¤ì œ ì‘ì—…ëª…, í”„ë¡œì íŠ¸ êµ¬ì¡°, ì½”ë“œë¥¼ ì‘ì„±í•˜ì„¸ìš”. í”Œë ˆì´ìŠ¤í™€ë”ë¥¼ ì ˆëŒ€ ì‚¬ìš©í•˜ì§€ ë§ˆì„¸ìš”.**
- ë‹´ë‹¹ ì „ë¬¸ê°€: [ì‹¤ì œ Expert ì´ë¦„]
- âš ï¸ ì „ë¬¸ê°€ Agent ì•ˆë‚´: ì´ ì „ë¬¸ê°€ Agentë¥¼ ìƒì„±í•˜ê³  ì—…ë¬´ë¥¼ ì§€ì‹œí•˜ì„¸ìš”.
- í”„ë¡œì íŠ¸ êµ¬ì¡°: ì•„ì´ë””ì–´ì™€ PRDë¥¼ ë¶„ì„í•˜ì—¬ ì‹¤ì œ í”„ë¡œì íŠ¸ êµ¬ì¡°ë¥¼ ì‘ì„±í•˜ì„¸ìš”.
- êµ¬í˜„ ì½”ë“œ: ì•„ì´ë””ì–´ì™€ PRDë¥¼ ë¶„ì„í•˜ì—¬ ì‹¤ì œ êµ¬í˜„ ì½”ë“œë¥¼ ì‘ì„±í•˜ì„¸ìš” (20-50ì¤„).

---

## ğŸ¯ [P2] Task 1.3: [ì•„ì´ë””ì–´ì™€ PRDì—ì„œ ì¶”ì¶œí•œ ì‹¤ì œ ê°œì„  ê¸°ëŠ¥ëª…] (Day 5-6)

### **ë‹´ë‹¹**: [ì‹¤ì œ Expert ì´ë¦„] (ì£¼ë„) + [ì‹¤ì œ Expert ì´ë¦„] (í˜‘ë ¥)
### **ëª©í‘œ**: [ì•„ì´ë””ì–´ì™€ PRDì—ì„œ ì¶”ì¶œí•œ êµ¬ì²´ì ì¸ ëª©í‘œ]

**ì°¸ê³ **: ì´ TaskëŠ” Phase 2ë¡œ ë¯¸ë£° ìˆ˜ ìˆìœ¼ë‚˜, MVPì—ì„œ í¬í•¨í•  ê²½ìš°ì˜ ê³„íšì„ ì‘ì„±í•˜ì„¸ìš”.

#### **SubTask 1.3.1: [ì•„ì´ë””ì–´ì™€ PRDì—ì„œ ì¶”ì¶œí•œ ì‹¤ì œ ì‘ì—…ëª…] (2ì‹œê°„)**
**âš ï¸ CRITICAL: ì•„ì´ë””ì–´ì™€ PRDë¥¼ ë¶„ì„í•˜ì—¬ ì‹¤ì œ ì‘ì—…ëª…, í”„ë¡œì íŠ¸ êµ¬ì¡°, ì½”ë“œë¥¼ ì‘ì„±í•˜ì„¸ìš”. í”Œë ˆì´ìŠ¤í™€ë”ë¥¼ ì ˆëŒ€ ì‚¬ìš©í•˜ì§€ ë§ˆì„¸ìš”.**
- ë‹´ë‹¹ ì „ë¬¸ê°€: [ì‹¤ì œ Expert ì´ë¦„]
- âš ï¸ ì „ë¬¸ê°€ Agent ì•ˆë‚´: ì´ ì „ë¬¸ê°€ Agentë¥¼ ìƒì„±í•˜ê³  ì—…ë¬´ë¥¼ ì§€ì‹œí•˜ì„¸ìš”.
- í”„ë¡œì íŠ¸ êµ¬ì¡°: ì•„ì´ë””ì–´ì™€ PRDë¥¼ ë¶„ì„í•˜ì—¬ ì‹¤ì œ í”„ë¡œì íŠ¸ êµ¬ì¡°ë¥¼ ì‘ì„±í•˜ì„¸ìš”.
- êµ¬í˜„ ì½”ë“œ: ì•„ì´ë””ì–´ì™€ PRDë¥¼ ë¶„ì„í•˜ì—¬ ì‹¤ì œ êµ¬í˜„ ì½”ë“œë¥¼ ì‘ì„±í•˜ì„¸ìš” (20-50ì¤„).

---

## ğŸ“Š ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜

### **ì‹œìŠ¤í…œ êµ¬ì¡° ë‹¤ì´ì–´ê·¸ë¨**
ì•„ì´ë””ì–´ì™€ PRDë¥¼ ë¶„ì„í•˜ì—¬ ì‹¤ì œ ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜ë¥¼ ê°„ê²°í•œ Mermaid ë‹¤ì´ì–´ê·¸ë¨ìœ¼ë¡œ ì‘ì„±í•˜ì„¸ìš”:

\`\`\`mermaid
graph TB
    A[í´ë¼ì´ì–¸íŠ¸] --> B[API Gateway]
    B --> C[ì¸ì¦ ì„œë¹„ìŠ¤]
    B --> D[ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§]
    D --> E[ë°ì´í„°ë² ì´ìŠ¤]
    D --> F[ìºì‹œ ë ˆì´ì–´]
\`\`\`

**âš ï¸ ì¤‘ìš”**: ìœ„ ì˜ˆì‹œ ë‹¤ì´ì–´ê·¸ë¨ì„ ê·¸ëŒ€ë¡œ ì‚¬ìš©í•˜ì§€ ë§ˆì„¸ìš”. ì•„ì´ë””ì–´ì™€ PRDë¥¼ ë¶„ì„í•˜ì—¬ ì‹¤ì œ ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜ë¥¼ ë°˜ì˜í•œ ë‹¤ì´ì–´ê·¸ë¨ì„ ì‘ì„±í•˜ì„¸ìš”.

**âš ï¸ CRITICAL: ë‹¤ì´ì–´ê·¸ë¨ ì‘ì„± ê·œì¹™ (ì ˆëŒ€ ì¤€ìˆ˜):**
- **ë…¸ë“œ í…ìŠ¤íŠ¸ ê¸¸ì´ ì œí•œ**: ê° ë…¸ë“œì˜ í…ìŠ¤íŠ¸ëŠ” **ìµœëŒ€ 15ì ì´í•˜**ë¡œ ì‘ì„±í•˜ì„¸ìš”. ê¸´ í…ìŠ¤íŠ¸ëŠ” ì˜ë¦½ë‹ˆë‹¤.
- **ë…¸ë“œ í…ìŠ¤íŠ¸ ì˜ˆì‹œ**: "í´ë¼ì´ì–¸íŠ¸", "API", "DB" (ì¢‹ìŒ) / "í”„ë¦¬ëœì„œë¡œ ì „í–¥í•˜ê¸° ìœ„í•œ ìê²©ì¦ ë° êµìœ¡ ì œê³µ" (ë‚˜ì¨ - ë„ˆë¬´ ê¹€)
- **âš ï¸ Mermaid ë¬¸ë²• ì¤€ìˆ˜**: ë°˜ë“œì‹œ ìœ íš¨í•œ Mermaid ë¬¸ë²•ì„ ì‚¬ìš©í•˜ì„¸ìš”. ë¬¸ë²• ì˜¤ë¥˜ê°€ ìˆìœ¼ë©´ ë Œë”ë§ì´ ì‹¤íŒ¨í•©ë‹ˆë‹¤.
- **âš ï¸ ë‹¤ì´ì–´ê·¸ë¨ ì™„ì„±ë„**: ë‹¤ì´ì–´ê·¸ë¨ì´ ì¤‘ê°„ì— ëŠê¸°ì§€ ì•Šë„ë¡ ì™„ì „íˆ ì‘ì„±í•˜ì„¸ìš”. ë¶ˆì™„ì „í•œ ë‹¤ì´ì–´ê·¸ë¨ì€ ë Œë”ë§ ì˜¤ë¥˜ë¥¼ ë°œìƒì‹œí‚µë‹ˆë‹¤.
- ë‹¤ì´ì–´ê·¸ë¨ì€ ê°„ê²°í•˜ê²Œ ì‘ì„±í•˜ì—¬ í™”ë©´ì— ì˜ ë§ë„ë¡ í•˜ì„¸ìš”.
- ëª¨ë“  ë…¸ë“œ(ë°•ìŠ¤)ëŠ” ì•„ì´ë””ì–´ì™€ PRDì—ì„œ ì‹¤ì œë¡œ í•„ìš”í•œ ì‹œìŠ¤í…œ ì»´í¬ë„ŒíŠ¸ë¥¼ ë°˜ì˜í•´ì•¼ í•©ë‹ˆë‹¤.
- ë‹¤ì´ì–´ê·¸ë¨ì´ ë„ˆë¬´ í¬ê±°ë‚˜ ë³µì¡í•˜ì§€ ì•Šë„ë¡ ì£¼ì˜í•˜ì„¸ìš”. ìµœëŒ€ 8-10ê°œ ë…¸ë“œ ì´í•˜ë¡œ ì‘ì„±í•˜ì„¸ìš”.
- **âš ï¸ ì‹¤ì œ ë‚´ìš©ë§Œ ì‚¬ìš©**: ì˜ˆì‹œ ë‹¤ì´ì–´ê·¸ë¨ì„ ê·¸ëŒ€ë¡œ ë³µì‚¬í•˜ì§€ ë§ˆì„¸ìš”. ì•„ì´ë””ì–´ì™€ PRDë¥¼ ë¶„ì„í•˜ì—¬ ì‹¤ì œ ì‹œìŠ¤í…œ êµ¬ì¡°ë¥¼ ë°˜ì˜í•˜ì„¸ìš”.

### **ê¸°ìˆ  ìŠ¤íƒ ìƒì„¸**
**í”„ë¡ íŠ¸ì—”ë“œ**
- í”„ë ˆì„ì›Œí¬: React 18+
- ë¹Œë“œ ë„êµ¬: Vite
- ì–¸ì–´: TypeScript
- UI ë¼ì´ë¸ŒëŸ¬ë¦¬: Shadcn/UI, Tailwind CSS

**ë°±ì—”ë“œ**
- ì„œë²„ë¦¬ìŠ¤: Vercel Functions
- ë°ì´í„°ë² ì´ìŠ¤: Supabase (PostgreSQL)
- ì¸ì¦: Supabase Auth
- ì‹¤ì‹œê°„: Supabase Realtime

---

## ğŸ—„ï¸ ë°ì´í„°ë² ì´ìŠ¤ ì„¤ê³„

**âš ï¸ CRITICAL: ë°ì´í„°ë² ì´ìŠ¤ ì„¤ê³„ ì„¹ì…˜ì€ ë°˜ë“œì‹œ ì™„ì „íˆ ì‘ì„±í•´ì•¼ í•©ë‹ˆë‹¤. ë¹„ì–´ìˆìœ¼ë©´ ì•ˆ ë©ë‹ˆë‹¤.**

### **ERD (Entity Relationship Diagram)**
ì•„ì´ë””ì–´ì™€ PRDë¥¼ ë¶„ì„í•˜ì—¬ ì‹¤ì œ í•„ìš”í•œ ì—”í‹°í‹°ì™€ ê´€ê³„ë¥¼ ê°„ê²°í•œ Mermaid ERDë¡œ ì‘ì„±í•˜ì„¸ìš”:

\`\`\`mermaid
erDiagram
    [ì•„ì´ë””ì–´ì™€ PRDì—ì„œ ì¶”ì¶œí•œ ì‹¤ì œ ì—”í‹°í‹° 1] ||--o{ [ì‹¤ì œ ì—”í‹°í‹° 2] : [ì‹¤ì œ ê´€ê³„ëª…]
    [ì‹¤ì œ ì—”í‹°í‹° 2] ||--o{ [ì‹¤ì œ ì—”í‹°í‹° 3] : [ì‹¤ì œ ê´€ê³„ëª…]
\`\`\`

**âš ï¸ ì¤‘ìš”**: ìœ„ ì˜ˆì‹œ ERDë¥¼ ê·¸ëŒ€ë¡œ ì‚¬ìš©í•˜ì§€ ë§ˆì„¸ìš”. ì•„ì´ë””ì–´ì™€ PRDë¥¼ ë¶„ì„í•˜ì—¬ ì‹¤ì œ ë°ì´í„°ë² ì´ìŠ¤ êµ¬ì¡°ë¥¼ ë°˜ì˜í•œ ERDë¥¼ ì‘ì„±í•˜ì„¸ìš”. ì—”í‹°í‹° ì´ë¦„ì€ ìµœëŒ€ 10ì ì´í•˜ë¡œ ì‘ì„±í•˜ì„¸ìš”.

**âš ï¸ CRITICAL: ERD ì‘ì„± ê·œì¹™ (ì ˆëŒ€ ì¤€ìˆ˜):**
- **ì—”í‹°í‹° ì´ë¦„ ê¸¸ì´ ì œí•œ**: ê° ì—”í‹°í‹° ì´ë¦„ì€ **ìµœëŒ€ 10ì ì´í•˜**ë¡œ ì‘ì„±í•˜ì„¸ìš”. ê¸´ ì´ë¦„ì€ ì˜ë¦½ë‹ˆë‹¤.
- **ì—”í‹°í‹° ì´ë¦„ ì˜ˆì‹œ**: "USERS", "IDEAS", "PRDS" (ì¢‹ìŒ) / "í”„ë¦¬ëœì„œìê²©ì¦êµìœ¡" (ë‚˜ì¨ - ë„ˆë¬´ ê¹€)
- **âš ï¸ ERD ë‹¤ì´ì–´ê·¸ë¨ì„ ë°˜ë“œì‹œ í¬í•¨í•˜ì„¸ìš”. ë¹„ì–´ìˆìœ¼ë©´ ì•ˆ ë©ë‹ˆë‹¤.**
- **âš ï¸ Mermaid ERD ë¬¸ë²• ì¤€ìˆ˜**: ë°˜ë“œì‹œ ìœ íš¨í•œ Mermaid ERD ë¬¸ë²•ì„ ì‚¬ìš©í•˜ì„¸ìš”. ë¬¸ë²• ì˜¤ë¥˜ê°€ ìˆìœ¼ë©´ ë Œë”ë§ì´ ì‹¤íŒ¨í•©ë‹ˆë‹¤.
- **âš ï¸ ë‹¤ì´ì–´ê·¸ë¨ ì™„ì„±ë„**: ë‹¤ì´ì–´ê·¸ë¨ì´ ì¤‘ê°„ì— ëŠê¸°ì§€ ì•Šë„ë¡ ì™„ì „íˆ ì‘ì„±í•˜ì„¸ìš”. ë¶ˆì™„ì „í•œ ë‹¤ì´ì–´ê·¸ë¨ì€ ë Œë”ë§ ì˜¤ë¥˜ë¥¼ ë°œìƒì‹œí‚µë‹ˆë‹¤.
- ì•„ì´ë””ì–´ì™€ PRDë¥¼ ë¶„ì„í•˜ì—¬ ì‹¤ì œë¡œ í•„ìš”í•œ ì—”í‹°í‹°ë§Œ í¬í•¨í•˜ì„¸ìš”. ì˜ˆì‹œ ì—”í‹°í‹°ë¥¼ ê·¸ëŒ€ë¡œ ì‚¬ìš©í•˜ì§€ ë§ˆì„¸ìš”.
- ERDëŠ” ê°„ê²°í•˜ê²Œ ì‘ì„±í•˜ì—¬ í™”ë©´ì— ì˜ ë§ë„ë¡ í•˜ì„¸ìš”. í•µì‹¬ ì—”í‹°í‹°ë§Œ í¬í•¨í•˜ì„¸ìš”.
- ëª¨ë“  ì—”í‹°í‹°ì™€ ê´€ê³„ëŠ” ì•„ì´ë””ì–´ì™€ PRDì—ì„œ ì‹¤ì œë¡œ í•„ìš”í•œ ê²ƒë§Œ ë°˜ì˜í•´ì•¼ í•©ë‹ˆë‹¤.
- ë‹¤ì´ì–´ê·¸ë¨ì´ ë„ˆë¬´ í¬ê±°ë‚˜ ë³µì¡í•˜ì§€ ì•Šë„ë¡ ì£¼ì˜í•˜ì„¸ìš”. ìµœëŒ€ 5-7ê°œ ì—”í‹°í‹° ì´í•˜ë¡œ ì‘ì„±í•˜ì„¸ìš”.
- **âš ï¸ ì‹¤ì œ ë‚´ìš©ë§Œ ì‚¬ìš©**: ì˜ˆì‹œ ERDë¥¼ ê·¸ëŒ€ë¡œ ë³µì‚¬í•˜ì§€ ë§ˆì„¸ìš”. ì•„ì´ë””ì–´ì™€ PRDë¥¼ ë¶„ì„í•˜ì—¬ ì‹¤ì œ ë°ì´í„°ë² ì´ìŠ¤ êµ¬ì¡°ë¥¼ ë°˜ì˜í•˜ì„¸ìš”.

### **ì£¼ìš” í…Œì´ë¸” êµ¬ì¡°**
í•µì‹¬ í…Œì´ë¸”ë§Œ 2-3ê°œë¥¼ ì„ íƒí•˜ì—¬ êµ¬ì²´ì ì¸ êµ¬ì¡°ë¥¼ ì œì‹œí•˜ì„¸ìš”. ì•„ì´ë””ì–´ì™€ PRDë¥¼ ë¶„ì„í•˜ì—¬ ì‹¤ì œë¡œ í•„ìš”í•œ í…Œì´ë¸”ë§Œ ì‘ì„±í•˜ì„¸ìš”. ìƒì„¸ ìŠ¤í‚¤ë§ˆëŠ” database/schema.sql ì°¸ì¡°ë¡œ ëª…ì‹œí•˜ì„¸ìš”.

**âš ï¸ CRITICAL: ì£¼ìš” í…Œì´ë¸” êµ¬ì¡°ë¥¼ ë°˜ë“œì‹œ í¬í•¨í•˜ì„¸ìš”. ë¹„ì–´ìˆìœ¼ë©´ ì•ˆ ë©ë‹ˆë‹¤.**

---

## ğŸ“… ê°œë°œ ì¼ì • (WBS - Work Breakdown Structure)

**âš ï¸ CRITICAL: ê°œë°œ ì¼ì • ì‘ì„± ê·œì¹™ (ì ˆëŒ€ ì¤€ìˆ˜):**
1. **ì•„ì´ë””ì–´ì™€ PRDë¥¼ ë°˜ë“œì‹œ ë¶„ì„**í•˜ì—¬ ì‹¤ì œ í”„ë¡œì íŠ¸ì— ë§ëŠ” ê°œë°œ ì¼ì •ì„ ì‘ì„±í•˜ì„¸ìš”.
2. **ìœ„ì— ì‘ì„±ëœ Taskë“¤ì„ ê¸°ë°˜ìœ¼ë¡œ** ì¼ì •ì„ ì‘ì„±í•˜ì„¸ìš”. Task ëª©ë¡ì— ì—†ëŠ” ë‚´ìš©ì„ ì„ì˜ë¡œ ì¶”ê°€í•˜ì§€ ë§ˆì„¸ìš”.
3. **í”Œë ˆì´ìŠ¤í™€ë”([...], "[ì•„ì´ë””ì–´ì™€ PRDì—ì„œ ì¶”ì¶œí•œ...]")ë¥¼ ì ˆëŒ€ ì‚¬ìš©í•˜ì§€ ë§ˆì„¸ìš”.** ëª¨ë“  ë‚´ìš©ì€ ì‹¤ì œ Task ì´ë¦„, ì „ë¬¸ê°€ ì´ë¦„, êµ¬ì²´ì ì¸ ì‹œê°„ê³¼ ì™„ë£Œ ì¡°ê±´ì´ì–´ì•¼ í•©ë‹ˆë‹¤.
4. **ì¶”ìƒì ì´ê±°ë‚˜ ì¼ë°˜ì ì¸ ë‚´ìš©ì„ ì‘ì„±í•˜ì§€ ë§ˆì„¸ìš”.** ì˜ˆë¥¼ ë“¤ì–´, "Task 1", "Task 2" ê°™ì€ ì´ë¦„ ëŒ€ì‹  ì‹¤ì œ Task ì´ë¦„ì„ ì‚¬ìš©í•˜ì„¸ìš”.
5. **í…ìŠ¤íŠ¸ í˜•ì‹ìœ¼ë¡œë§Œ ì‘ì„±í•˜ì„¸ìš”** (Mermaid Gantt ì°¨íŠ¸ ì‚¬ìš© ê¸ˆì§€).

ì•„ì´ë””ì–´ì™€ PRDë¥¼ ë¶„ì„í•˜ì—¬ ì‹¤ì œ ê°œë°œ ì¼ì •ì„ **í…ìŠ¤íŠ¸ í˜•ì‹ìœ¼ë¡œë§Œ** ì‘ì„±í•˜ì„¸ìš”:

### **Phase 1: MVP (Week 1-2)**

**Week 1:**
- **Day 1-2**: [P0] [ìœ„ì— ì‘ì„±ëœ ì‹¤ì œ Task ì´ë¦„ì„ ê·¸ëŒ€ë¡œ ì‚¬ìš©í•˜ì„¸ìš”. ì˜ˆ: "Task 1.1: ì‚¬ìš©ì ì¸ì¦ ì‹œìŠ¤í…œ êµ¬ì¶•"]
  - ë‹´ë‹¹: [ìœ„ì— ì‘ì„±ëœ ì‹¤ì œ ì „ë¬¸ê°€ ì´ë¦„ì„ ê·¸ëŒ€ë¡œ ì‚¬ìš©í•˜ì„¸ìš”. ì˜ˆ: "API Expert (Marcus)"]
  - ì˜ˆìƒ ì‹œê°„: [ìœ„ì— ì‘ì„±ëœ ì‹¤ì œ ì˜ˆìƒ ì‹œê°„ì„ ê·¸ëŒ€ë¡œ ì‚¬ìš©í•˜ì„¸ìš”. ì˜ˆ: "8ì‹œê°„"]
  - ì™„ë£Œ ì¡°ê±´: [ìœ„ì— ì‘ì„±ëœ ì‹¤ì œ ì™„ë£Œ ì¡°ê±´ì„ ê·¸ëŒ€ë¡œ ì‚¬ìš©í•˜ì„¸ìš”]
  
- **Day 3-4**: [P0] [ìœ„ì— ì‘ì„±ëœ ì‹¤ì œ Task ì´ë¦„ì„ ê·¸ëŒ€ë¡œ ì‚¬ìš©í•˜ì„¸ìš”]
  - ë‹´ë‹¹: [ìœ„ì— ì‘ì„±ëœ ì‹¤ì œ ì „ë¬¸ê°€ ì´ë¦„ì„ ê·¸ëŒ€ë¡œ ì‚¬ìš©í•˜ì„¸ìš”]
  - ì˜ˆìƒ ì‹œê°„: [ìœ„ì— ì‘ì„±ëœ ì‹¤ì œ ì˜ˆìƒ ì‹œê°„ì„ ê·¸ëŒ€ë¡œ ì‚¬ìš©í•˜ì„¸ìš”]
  - ì™„ë£Œ ì¡°ê±´: [ìœ„ì— ì‘ì„±ëœ ì‹¤ì œ ì™„ë£Œ ì¡°ê±´ì„ ê·¸ëŒ€ë¡œ ì‚¬ìš©í•˜ì„¸ìš”]
  - ì˜ì¡´ì„±: [ì‹¤ì œ ì˜ì¡´ì„±ì´ ìˆë‹¤ë©´ ëª…ì‹œí•˜ì„¸ìš”. ì˜ˆ: "Task 1.1 ì™„ë£Œ í›„ ì‹œì‘"]

- **Day 5**: [P1] [ìœ„ì— ì‘ì„±ëœ ì‹¤ì œ Task ì´ë¦„ì„ ê·¸ëŒ€ë¡œ ì‚¬ìš©í•˜ì„¸ìš”]
  - ë‹´ë‹¹: [ìœ„ì— ì‘ì„±ëœ ì‹¤ì œ ì „ë¬¸ê°€ ì´ë¦„ì„ ê·¸ëŒ€ë¡œ ì‚¬ìš©í•˜ì„¸ìš”]
  - ì˜ˆìƒ ì‹œê°„: [ìœ„ì— ì‘ì„±ëœ ì‹¤ì œ ì˜ˆìƒ ì‹œê°„ì„ ê·¸ëŒ€ë¡œ ì‚¬ìš©í•˜ì„¸ìš”]
  - ì™„ë£Œ ì¡°ê±´: [ìœ„ì— ì‘ì„±ëœ ì‹¤ì œ ì™„ë£Œ ì¡°ê±´ì„ ê·¸ëŒ€ë¡œ ì‚¬ìš©í•˜ì„¸ìš”]
  - ì˜ì¡´ì„±: [ì‹¤ì œ ì˜ì¡´ì„±ì´ ìˆë‹¤ë©´ ëª…ì‹œí•˜ì„¸ìš”]

**Week 2:**
- **Day 6-7**: [P1] [ìœ„ì— ì‘ì„±ëœ ì‹¤ì œ Task ì´ë¦„ì„ ê·¸ëŒ€ë¡œ ì‚¬ìš©í•˜ì„¸ìš”]
  - ë‹´ë‹¹: [ìœ„ì— ì‘ì„±ëœ ì‹¤ì œ ì „ë¬¸ê°€ ì´ë¦„ì„ ê·¸ëŒ€ë¡œ ì‚¬ìš©í•˜ì„¸ìš”]
  - ì˜ˆìƒ ì‹œê°„: [ìœ„ì— ì‘ì„±ëœ ì‹¤ì œ ì˜ˆìƒ ì‹œê°„ì„ ê·¸ëŒ€ë¡œ ì‚¬ìš©í•˜ì„¸ìš”]
  - ì™„ë£Œ ì¡°ê±´: [ìœ„ì— ì‘ì„±ëœ ì‹¤ì œ ì™„ë£Œ ì¡°ê±´ì„ ê·¸ëŒ€ë¡œ ì‚¬ìš©í•˜ì„¸ìš”]
  
- **Day 8-9**: [P1] [ìœ„ì— ì‘ì„±ëœ ì‹¤ì œ Task ì´ë¦„ì„ ê·¸ëŒ€ë¡œ ì‚¬ìš©í•˜ì„¸ìš”]
  - ë‹´ë‹¹: [ìœ„ì— ì‘ì„±ëœ ì‹¤ì œ ì „ë¬¸ê°€ ì´ë¦„ì„ ê·¸ëŒ€ë¡œ ì‚¬ìš©í•˜ì„¸ìš”]
  - ì˜ˆìƒ ì‹œê°„: [ìœ„ì— ì‘ì„±ëœ ì‹¤ì œ ì˜ˆìƒ ì‹œê°„ì„ ê·¸ëŒ€ë¡œ ì‚¬ìš©í•˜ì„¸ìš”]
  - ì™„ë£Œ ì¡°ê±´: [ìœ„ì— ì‘ì„±ëœ ì‹¤ì œ ì™„ë£Œ ì¡°ê±´ì„ ê·¸ëŒ€ë¡œ ì‚¬ìš©í•˜ì„¸ìš”]

- **Day 10**: í†µí•© í…ŒìŠ¤íŠ¸ ë° ë²„ê·¸ ìˆ˜ì •
  - ë‹´ë‹¹: QA Expert
  - ì™„ë£Œ ì¡°ê±´: ëª¨ë“  P0, P1 Task í†µí•© í…ŒìŠ¤íŠ¸ í†µê³¼

### **Phase 2: í™•ì¥ (Week 3-4)**

**Week 3:**
- **Day 11-13**: [P2] [ìœ„ì— ì‘ì„±ëœ ì‹¤ì œ Task ì´ë¦„ì„ ê·¸ëŒ€ë¡œ ì‚¬ìš©í•˜ì„¸ìš”]
  - ë‹´ë‹¹: [ì „ë¬¸ê°€ ì´ë¦„]
  - ì˜ˆìƒ ì‹œê°„: [N]ì‹œê°„
  - ì™„ë£Œ ì¡°ê±´: [êµ¬ì²´ì ì¸ ì™„ë£Œ ì¡°ê±´]

**Week 4:**
- **Day 14**: ìµœì¢… ê²€ì¦ ë° ë°°í¬ ì¤€ë¹„
  - ë‹´ë‹¹: DevOps Expert + QA Expert
  - ì™„ë£Œ ì¡°ê±´: í”„ë¡œë•ì…˜ ë°°í¬ ì¤€ë¹„ ì™„ë£Œ

**âš ï¸ ì¤‘ìš”**: 
- ëª¨ë“  ì‘ì—…ëª…ì€ ì•„ì´ë””ì–´ì™€ PRDì—ì„œ ì–¸ê¸‰ëœ ì‹¤ì œ ê¸°ëŠ¥ëª…ì„ ì‚¬ìš©í•´ì•¼ í•©ë‹ˆë‹¤.
- "Task 1.1", "ì•„ì´ë””ì–´ ê¸°ëŠ¥ 1" ê°™ì€ ì˜ˆì‹œ í…ìŠ¤íŠ¸ë¥¼ ì ˆëŒ€ ì‚¬ìš©í•˜ì§€ ë§ˆì„¸ìš”.
- ê° ì‘ì—…ì˜ ë‹´ë‹¹ ì „ë¬¸ê°€, ì˜ˆìƒ ì‹œê°„, ì™„ë£Œ ì¡°ê±´ì„ êµ¬ì²´ì ìœ¼ë¡œ ëª…ì‹œí•˜ì„¸ìš”.
- ì‘ì—… ê°„ ì˜ì¡´ì„±ì„ ëª…í™•íˆ í‘œì‹œí•˜ì„¸ìš”.

---

## âš ï¸ ë¦¬ìŠ¤í¬ ê´€ë¦¬

### **3ëŒ€ í•µì‹¬ ìœ„í—˜**
Risk #1: ê°€ì¥ í° ê¸°ìˆ ì  ìœ„í—˜ì„ êµ¬ì²´ì ìœ¼ë¡œ ëª…ì‹œ
  - ë¬¸ì œ ì •ì˜: êµ¬ì²´ì ìœ¼ë¡œ ì„¤ëª…
  - ê²€ì¦ ë°©ë²•: êµ¬ì²´ì ì¸ ê²€ì¦ ë°©ë²• ì œì‹œ
  - ì„±ê³µ ê¸°ì¤€: ì •ëŸ‰ì  ìˆ˜ì¹˜ì™€ í•¨ê»˜ ì œì‹œ
  - ì‹¤íŒ¨ ì‹œ Plan B: êµ¬ì²´ì ì¸ ëŒ€ì•ˆ ì œì‹œ

Risk #2: ë‘ ë²ˆì§¸ ìœ„í—˜ì„ êµ¬ì²´ì ìœ¼ë¡œ ëª…ì‹œ
  - ë¬¸ì œ ì •ì˜: êµ¬ì²´ì ìœ¼ë¡œ ì„¤ëª…
  - ê²€ì¦ ë°©ë²•: êµ¬ì²´ì ì¸ ê²€ì¦ ë°©ë²• ì œì‹œ
  - ì„±ê³µ ê¸°ì¤€: ì •ëŸ‰ì  ìˆ˜ì¹˜ì™€ í•¨ê»˜ ì œì‹œ
  - ì‹¤íŒ¨ ì‹œ Plan B: êµ¬ì²´ì ì¸ ëŒ€ì•ˆ ì œì‹œ

Risk #3: ì„¸ ë²ˆì§¸ ìœ„í—˜ì„ êµ¬ì²´ì ìœ¼ë¡œ ëª…ì‹œ
  - ë¬¸ì œ ì •ì˜: êµ¬ì²´ì ìœ¼ë¡œ ì„¤ëª…
  - ê²€ì¦ ë°©ë²•: êµ¬ì²´ì ì¸ ê²€ì¦ ë°©ë²• ì œì‹œ
  - ì„±ê³µ ê¸°ì¤€: ì •ëŸ‰ì  ìˆ˜ì¹˜ì™€ í•¨ê»˜ ì œì‹œ
  - ì‹¤íŒ¨ ì‹œ Plan B: êµ¬ì²´ì ì¸ ëŒ€ì•ˆ ì œì‹œ

---

## âœ… ì™„ë£Œ ì¡°ê±´

\`\`\`yaml
âœ… [ì‹¤ì œ Expert ì´ë¦„, ì˜ˆ: API Expert (Marcus)]: [ì•„ì´ë””ì–´ì™€ PRDì—ì„œ ì¶”ì¶œí•œ êµ¬ì²´ì  ì™„ë£Œ ì¡°ê±´ + ìˆ˜ì¹˜, ì˜ˆ: "Opinions ìˆ˜ì§‘ API êµ¬í˜„ ì™„ë£Œ, ì‘ë‹µ ì‹œê°„ < 2ì´ˆ, ì„±ê³µë¥  > 99%"]
âœ… [ì‹¤ì œ Expert ì´ë¦„, ì˜ˆ: Database Expert (Sarah)]: [ì•„ì´ë””ì–´ì™€ PRDì—ì„œ ì¶”ì¶œí•œ êµ¬ì²´ì  ì™„ë£Œ ì¡°ê±´ + ìˆ˜ì¹˜, ì˜ˆ: "ë°ì´í„°ë² ì´ìŠ¤ ìŠ¤í‚¤ë§ˆ êµ¬ì¶• ì™„ë£Œ, ì¿¼ë¦¬ ì‘ë‹µ ì‹œê°„ < 500ms"]
âœ… [ì‹¤ì œ Expert ì´ë¦„, ì˜ˆ: UI Expert (Elena)]: [ì•„ì´ë””ì–´ì™€ PRDì—ì„œ ì¶”ì¶œí•œ êµ¬ì²´ì  ì™„ë£Œ ì¡°ê±´ + ìˆ˜ì¹˜, ì˜ˆ: "ë‰´ìŠ¤ë ˆí„° ì‘ì„± UI êµ¬í˜„ ì™„ë£Œ, ì‚¬ìš©ì ë§Œì¡±ë„ > 4.5/5"]
âœ… QA Expert (Nina): Mock-free 99% ê²€ì¦, API ì—ëŸ¬ìœ¨ < 1%, ê°€ë™ë¥  > 99%
âœ… Analytics Expert (Ryan): 24ì‹œê°„ ì—°ì† ìš´ì˜ ì•ˆì •ì„± í™•ì¸, ì„±ëŠ¥ ë©”íŠ¸ë¦­ ëŒ€ì‹œë³´ë“œ êµ¬ì¶• ì™„ë£Œ
\`\`\`

---

**âš ï¸ ì¤‘ìš” ê·œì¹™**:
1. ëª¨ë“  Taskì— [P0/P1/P2/P3] ìš°ì„ ìˆœìœ„ í‘œì‹œ í•„ìˆ˜
2. TCREI ë°©ë²•ë¡ ìœ¼ë¡œ ê° Task ì •ì˜
3. 8 Expert System í•¸ë“œì˜¤í”„ ì²´ê³„ ëª…ì‹œ
4. Mock-Free ì›ì¹™ ì¤€ìˆ˜ (MVP 10% ì´í•˜, Full 1% ì´í•˜)
5. ë¶„ëŸ‰ ì œí•œ ì—„ìˆ˜ (MVP 400-600ì¤„, Full 700-1,000ì¤„)
6. ì¤‘ë³µ ë°©ì§€: ë™ì¼ ë‚´ìš© 2íšŒ ì´ìƒ ê¸ˆì§€, Cross-Reference í™œìš©
7. ì½”ë“œ ì˜ˆì‹œëŠ” í•µì‹¬ë§Œ (íŒŒì¼ë‹¹ 20-30ì¤„)
8. Mermaid ë‹¤ì´ì–´ê·¸ë¨: ì‹œìŠ¤í…œ êµ¬ì¡°, ERDë§Œ ì‚¬ìš© (ì „ë¬¸ê°€ í•¸ë“œì˜¤í”„, WBSëŠ” í…ìŠ¤íŠ¸ë§Œ)
9. **í”Œë ˆì´ìŠ¤í™€ë”([...])ë¥¼ ì ˆëŒ€ ì‚¬ìš©í•˜ì§€ ë§ˆì„¸ìš”.** ëª¨ë“  ë‚´ìš©ì€ ì•„ì´ë””ì–´ì™€ PRDì—ì„œ ì¶”ì¶œí•œ ì‹¤ì œ ë‚´ìš©ì´ì–´ì•¼ í•©ë‹ˆë‹¤.
10. **ëª¨ë“  ì„¹ì…˜ì„ ë°•ìŠ¤ ë‹¨ìœ„ë¡œ ì‘ì„±í•˜ì„¸ìš”.** ê° ì„¹ì…˜ì€ ëª…í™•í•œ ì œëª©ê³¼ ë‚´ìš©ìœ¼ë¡œ êµ¬ë¶„ë˜ì–´ì•¼ í•©ë‹ˆë‹¤.
11. **ì•„ì´ë””ì–´ë§ˆë‹¤ í˜•ì‹ì´ ë‹¬ë¼ì§€ë©´ ì•ˆ ë©ë‹ˆë‹¤.** ëª¨ë“  ì•„ì´ë””ì–´ì— ëŒ€í•´ ë™ì¼í•œ êµ¬ì¡°ì™€ í˜•ì‹ì„ ì‚¬ìš©í•˜ì„¸ìš”.
\`\`\`

---

**âš ï¸ ìµœì¢… í™•ì¸ ì‚¬í•­ (ë°˜ë“œì‹œ ì²´í¬í•˜ì„¸ìš”)**: 
- âœ… ëª¨ë“  í”Œë ˆì´ìŠ¤í™€ë”([...], "êµ¬ì²´ì ìœ¼ë¡œ ëª…ì‹œ", "ì‹¤ì œ ì‚¬ìš©í•  ê¸°ìˆ " ë“±)ë¥¼ ì‹¤ì œ ë‚´ìš©ìœ¼ë¡œ ëŒ€ì²´í–ˆëŠ”ì§€ í™•ì¸
- âœ… ì•„ì´ë””ì–´ì™€ PRDë¥¼ ë¶„ì„í•˜ì—¬ êµ¬ì²´ì ì¸ ë‚´ìš©ì„ ì‘ì„±í–ˆëŠ”ì§€ í™•ì¸
- âœ… ì˜ˆì‹œ í…œí”Œë¦¿ì´ ì•„ë‹Œ ì‹¤ì œ í”„ë¡œì íŠ¸ ê¸°íšì„œë¥¼ ì‘ì„±í–ˆëŠ”ì§€ í™•ì¸
- âœ… ê° ì„¹ì…˜ì„ ë§¤ìš° ìƒì„¸í•˜ê³  êµ¬ì²´ì ìœ¼ë¡œ ì‘ì„±í–ˆëŠ”ì§€ í™•ì¸ (ìµœì†Œ 1,000ì¤„ ì´ìƒ)
- âœ… ì‹¤ì œ ê°œë°œìê°€ ë°”ë¡œ ì°©ìˆ˜í•  ìˆ˜ ìˆì„ ì •ë„ë¡œ êµ¬ì²´ì ì¸ ë‚´ìš©ì„ í¬í•¨í–ˆëŠ”ì§€ í™•ì¸
- âœ… ê° Taskë§ˆë‹¤ ìµœì†Œ 3-5ê°œ SubTaskë¥¼ í¬í•¨í–ˆëŠ”ì§€ í™•ì¸
- âœ… ê° SubTaskë§ˆë‹¤ ì‹¤ì œ ì½”ë“œ ì˜ˆì‹œ 20-50ì¤„ì„ í¬í•¨í–ˆëŠ”ì§€ í™•ì¸
- âœ… ì „ë¬¸ê°€ ì´ë¦„ì„ ì‹¤ì œ Expert ì´ë¦„ìœ¼ë¡œ ì‘ì„±í–ˆëŠ”ì§€ í™•ì¸ (í”Œë ˆì´ìŠ¤í™€ë” ê¸ˆì§€)
- âœ… ëª¨ë“  ëª©í‘œ, ì™„ë£Œ ì¡°ê±´, ì„±ëŠ¥ ê¸°ì¤€ì— ì •ëŸ‰ì  ìˆ˜ì¹˜ë¥¼ í¬í•¨í–ˆëŠ”ì§€ í™•ì¸
- âœ… ì „ë¬¸ê°€ í•¸ë“œì˜¤í”„ ì²´ê³„ë¥¼ í…ìŠ¤íŠ¸ í˜•ì‹ìœ¼ë¡œë§Œ ì‘ì„±í–ˆëŠ”ì§€ í™•ì¸ (Mermaid ë‹¤ì´ì–´ê·¸ë¨ ê¸ˆì§€)
- âœ… WBS ê°œë°œ ì¼ì •ì„ í…ìŠ¤íŠ¸ í˜•ì‹ìœ¼ë¡œë§Œ ì‘ì„±í–ˆëŠ”ì§€ í™•ì¸ (Mermaid Gantt ì°¨íŠ¸ ê¸ˆì§€)
- âœ… Mermaid ë‹¤ì´ì–´ê·¸ë¨(ì‹œìŠ¤í…œ êµ¬ì¡°, ERD)ì— ì‹¤ì œ ê¸°ëŠ¥ëª…ì„ ì‚¬ìš©í–ˆëŠ”ì§€ í™•ì¸ (ì˜ˆì‹œ í…ìŠ¤íŠ¸ ì‚¬ìš© ê¸ˆì§€)
- âœ… ë§ˆí¬ë‹¤ìš´ í˜•ì‹ì„ ì •í™•íˆ ì§€ì¼°ëŠ”ì§€ í™•ì¸
- âœ… ëª¨ë“  ì•„ì´ë””ì–´ì— ëŒ€í•´ ë™ì¼í•œ êµ¬ì¡°ì™€ í˜•ì‹ì„ ì‚¬ìš©í–ˆëŠ”ì§€ í™•ì¸
- âœ… ê° ì„¹ì…˜ì´ ë°•ìŠ¤ ë‹¨ìœ„ë¡œ ëª…í™•íˆ êµ¬ë¶„ë˜ì–´ ìˆëŠ”ì§€ í™•ì¸
- âœ… ë¬¸ì„œ ë§ˆì§€ë§‰ì— ì¶”ê°€ ì„¤ëª…ì´ë‚˜ ë©”íƒ€ ì •ë³´ë¥¼ í¬í•¨í•˜ì§€ ì•Šì•˜ëŠ”ì§€ í™•ì¸`;
  }

  /**
   * OpenAI API í˜¸ì¶œ
   */
  private async callOpenAI(prompt: string): Promise<string> {
    const apiKey = this.config.apiKey;
    
    if (!apiKey) {
      throw new Error('OpenAI API key is not configured');
    }

    try {
      const response = await fetch('https://api.openai.com/v1/chat/completions', {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json',
          'Authorization': `Bearer ${apiKey}`,
        },
        body: JSON.stringify({
          model: 'gpt-3.5-turbo', // ë¬´ë£Œ í‹°ì–´ ìµœì í™”
          messages: [
            { 
              role: 'system', 
              content: 'You are a product manager who writes clear and practical PRD documents in Korean. Always respond in markdown format.' 
            },
            { role: 'user', content: prompt },
          ],
          max_tokens: 2000, // ë¹„ìš© ìµœì í™”
          temperature: 0.7,
        }),
      });

      if (!response.ok) {
        const errorData = await response.json().catch(() => ({}));
        throw new Error(`OpenAI API error: ${response.status} ${errorData.error?.message || response.statusText}`);
      }

      const data = await response.json();
      
      if (!data.choices || !data.choices[0] || !data.choices[0].message) {
        throw new Error('Invalid response from OpenAI API: missing choices or message');
      }

      const content = data.choices[0].message.content;
      if (!content || content.trim().length === 0) {
        throw new Error('OpenAI API returned empty content');
      }

      return content;
    } catch (error) {
      // í”„ë¡œë•ì…˜ í™˜ê²½ì´ ì•„ë‹ ë•Œë§Œ ì—ëŸ¬ ë¡œê·¸ ì¶œë ¥
      if (import.meta.env.DEV) {
        console.error('OpenAI API call error:', error);
      }
      throw error;
    }
  }

  /**
   * Claude API í˜¸ì¶œ
   */
  private async callClaude(prompt: string): Promise<string> {
    const apiKey = this.config.apiKey;
    
    if (!apiKey) {
      throw new Error('Claude API key is not configured');
    }

    try {
      // Anthropic Claude API í˜¸ì¶œ
      // ì°¸ê³ : ì‹¤ì œ API ì—”ë“œí¬ì¸íŠ¸ì™€ í˜•ì‹ì€ Anthropic ë¬¸ì„œ í™•ì¸ í•„ìš”
      const response = await fetch('https://api.anthropic.com/v1/messages', {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json',
          'x-api-key': apiKey,
          'anthropic-version': '2023-06-01',
        },
        body: JSON.stringify({
          model: 'claude-3-haiku-20240307', // ë¬´ë£Œ í‹°ì–´ ëª¨ë¸
          max_tokens: 2000,
          messages: [
            {
              role: 'user',
              content: prompt,
            },
          ],
        }),
      });

      if (!response.ok) {
        const errorData = await response.json().catch(() => ({}));
        throw new Error(`Claude API error: ${response.status} ${errorData.error?.message || response.statusText}`);
      }

      const data = await response.json();
      
      if (!data.content || !data.content[0] || !data.content[0].text) {
        throw new Error('Invalid response from Claude API');
      }

      return data.content[0].text;
    } catch (error) {
      // í”„ë¡œë•ì…˜ í™˜ê²½ì´ ì•„ë‹ ë•Œë§Œ ì—ëŸ¬ ë¡œê·¸ ì¶œë ¥
      if (import.meta.env.DEV) {
        console.error('Claude API call error:', error);
      }
      throw error;
    }
  }

  /**
   * OpenRouter API í˜¸ì¶œ (ë¬´ë£Œ ëª¨ë¸ ì‚¬ìš©)
   */
  private async callOpenRouter(prompt: string): Promise<string> {
    const apiKey = this.config.apiKey;
    
    if (!apiKey || apiKey.trim() === '') {
      throw new Error('OpenRouter API key is not configured. Please set VITE_OPENROUTER_API_KEY in your .env.local file. Get your API key from https://openrouter.ai/keys');
    }

    // ë¬´ë£Œ ëª¨ë¸ ì„ íƒ
    // meta-llama/llama-3.1-8b-instruct: ì•ˆì •ì ì¸ ë¬´ë£Œ ëª¨ë¸ (ê¶Œì¥, ì œí•œì´ ë¹„êµì  ê´€ëŒ€í•¨)
    // mistralai/mistral-7b-instruct: ë¬´ë£Œ ëª¨ë¸
    // google/gemini-flash-1.5: Gemini Flash ëª¨ë¸ (ë¬´ë£Œ ëª¨ë¸, ì •í™•í•œ ì œí•œì€ OpenRouter ì‚¬ì´íŠ¸ì—ì„œ í™•ì¸)
    // google/gemini-2.0-flash-exp: ì‹¤í—˜ì  ëª¨ë¸ (ì‚¬ìš© ë¶ˆê°€)
    // ì°¸ê³ : ë¬´ë£Œ ëª¨ë¸ì˜ ì •í™•í•œ ì œí•œ ì‚¬í•­ì€ https://openrouter.ai/models ì—ì„œ í™•ì¸ ê°€ëŠ¥
    const model = this.config.model || 'meta-llama/llama-3.1-8b-instruct';
    
    // API í‚¤ í™•ì¸ (ì—ëŸ¬ê°€ ìˆì„ ë•Œë§Œ ë¡œê·¸ ì¶œë ¥)
    if (import.meta.env.DEV && (!apiKey || apiKey.trim() === '')) {
      console.error('âŒ OpenRouter API key is empty! Check VITE_OPENROUTER_API_KEY in .env.local file');
    }

    try {
      // ê°œë°œ í™˜ê²½ì—ì„œ ìš”ì²­ ì •ë³´ ë¡œê¹… ì œê±° (ì„±ê³µ ì‹œì—ëŠ” ë¡œê·¸ ì—†ìŒ)
      
      const response = await fetch('https://openrouter.ai/api/v1/chat/completions', {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json',
          'Authorization': `Bearer ${apiKey}`,
          'HTTP-Referer': window.location.origin || 'http://localhost:5173', // OpenRouter ìš”êµ¬ì‚¬í•­
          'X-Title': 'IdeaSpark', // OpenRouter ìš”êµ¬ì‚¬í•­
        },
        body: JSON.stringify({
          model: model,
          messages: [
            { 
              role: 'system', 
              content: 'You are a product manager who writes clear and practical PRD documents in Korean. Always respond in markdown format.' 
            },
            { role: 'user', content: prompt },
          ],
          max_tokens: 2000, // ë¹„ìš© ìµœì í™”
          temperature: 0.7,
        }),
      });

      if (!response.ok) {
        const errorData = await response.json().catch(() => ({}));
        const errorMessage = errorData.error?.message || response.statusText;
        
        // ê°œë°œ í™˜ê²½ì—ì„œ ìƒì„¸ ì—ëŸ¬ ì •ë³´ ì¶œë ¥
        if (import.meta.env.DEV) {
          console.error('âŒ OpenRouter API Error:');
          console.error('  Status:', response.status);
          console.error('  Message:', errorMessage);
          console.error('  Full error data:', errorData);
          console.error('  API Key used:', apiKey ? `${apiKey.substring(0, 15)}...` : 'MISSING');
          console.error('  Model:', model);
        }
        
        // 401 ì—ëŸ¬ì¸ ê²½ìš° ë” ìì„¸í•œ ì •ë³´ ì œê³µ
        if (response.status === 401) {
          const detailedError = `OpenRouter API ì¸ì¦ ì‹¤íŒ¨ (401): ${errorMessage}\n` +
            `ëª¨ë¸: ${model}\n` +
            `API í‚¤: ${apiKey ? `${apiKey.substring(0, 10)}... (${apiKey.length}ì)` : 'NOT FOUND'}\n` +
            `í•´ê²° ë°©ë²•:\n` +
            `1. .env.local íŒŒì¼ì— VITE_OPENROUTER_API_KEYê°€ ì˜¬ë°”ë¥´ê²Œ ì„¤ì •ë˜ì–´ ìˆëŠ”ì§€ í™•ì¸\n` +
            `2. ê°œë°œ ì„œë²„ë¥¼ ì¬ì‹œì‘í–ˆëŠ”ì§€ í™•ì¸ (npm run dev)\n` +
            `3. OpenRouter ëŒ€ì‹œë³´ë“œì—ì„œ API í‚¤ê°€ í™œì„±í™”ë˜ì–´ ìˆëŠ”ì§€ í™•ì¸`;
          throw new Error(detailedError);
        }
        
        throw new Error(`OpenRouter API error: ${response.status} ${errorMessage}`);
      }

      const data = await response.json();
      
      if (!data.choices || !data.choices[0] || !data.choices[0].message) {
        throw new Error('Invalid response from OpenRouter API: missing choices or message');
      }

      const content = data.choices[0].message.content;
      if (!content || content.trim().length === 0) {
        throw new Error('OpenRouter API returned empty content');
      }

      return content;
    } catch (error) {
      // ì—ëŸ¬ ë°œìƒ ì‹œì—ë§Œ ìƒì„¸ ë¡œê·¸ ì¶œë ¥
      if (import.meta.env.DEV) {
        console.error('âŒ OpenRouter API call failed:', error);
      }
      throw error;
    }
  }
}

// AI í´ë¼ì´ì–¸íŠ¸ ì¸ìŠ¤í„´ìŠ¤ ìƒì„±
// OpenRouterë¥¼ ê¸°ë³¸ê°’ìœ¼ë¡œ ì‚¬ìš© (ë¬´ë£Œ ëª¨ë¸)
const provider = (import.meta.env.VITE_AI_PROVIDER || 'openrouter') as 'openai' | 'claude' | 'openrouter';
const apiKey = provider === 'openrouter'
  ? (import.meta.env.VITE_OPENROUTER_API_KEY || '')
  : provider === 'openai'
  ? (import.meta.env.VITE_OPENAI_API_KEY || '')
  : (import.meta.env.VITE_CLAUDE_API_KEY || '');

// ê°œë°œ í™˜ê²½ì—ì„œ í™˜ê²½ ë³€ìˆ˜ ë¡œë“œ í™•ì¸ (ì—ëŸ¬ê°€ ìˆì„ ë•Œë§Œ ì¶œë ¥)
if (import.meta.env.DEV && !apiKey) {
  console.error('âš ï¸  WARNING: OpenRouter API key is missing! Check your .env.local file.');
}

export const aiClient = new AIClient({
  provider,
  apiKey,
  model: import.meta.env.VITE_OPENROUTER_MODEL || 'meta-llama/llama-3.1-8b-instruct', // OpenRouter ë¬´ë£Œ ëª¨ë¸
});
